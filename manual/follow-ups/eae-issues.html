<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSIÓN DE LA PÁGINA -->
    <meta name="page-version" content="25.11.08.12.15">
    
    <title>Manual - Seguimientos - Registrar asuntos EAE - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSIÓN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Tarjeta para reportar bugs */
        .bug-report-card {
            background: var(--system-secondary-color, #667eea);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Botón flotante para reportar bugs */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #dc3545) !important;
            border-color: var(--system-primary-color, #dc3545) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Estilos específicos para el manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 1rem;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .success-box {
            background: #d1e7dd;
            border-left: 4px solid #198754;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #198754;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .keyboard-shortcut {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Seguimientos
                        </h1>
                        <p class="subtitle mb-0">Sistema de registro de asuntos EAE (Estudiantes con Apoyo Educativo)</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/follow-ups/eae-issues.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al Módulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACIÓN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong>Seguimientos</strong></h5>
                            <p class="text-muted mb-0 small">Registrar asuntos EAE</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras algún problema,<br>
                                puedes reportarlo usando el botón de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- CONTENIDO DEL MANUAL -->

                <!-- Descripción General -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¿Qué es Registrar asuntos EAE?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            Esta función especializada permite registrar y documentar incidencias, situaciones 
                            y seguimientos relacionados específicamente con estudiantes que requieren 
                            <strong>Apoyo Educativo Especializado (EAE)</strong>.
                        </p>
                        
                        <p>
                            Los registros EAE están diseñados para facilitar el seguimiento detallado y 
                            personalizado de estudiantes con necesidades educativas especiales, permitiendo 
                            mantener un historial completo de su proceso de acompañamiento y las adaptaciones 
                            o intervenciones realizadas.
                        </p>

                        <div class="info-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Propósito especial:</strong>
                            Crear registros diferenciados que permitan a los equipos de orientación, 
                            docentes y directivos tener visibilidad específica sobre el seguimiento 
                            de estudiantes EAE, facilitando la coordinación de apoyos y adaptaciones curriculares.
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-shield-exclamation me-2"></i>Confidencialidad:</strong>
                            Los registros EAE contienen información sensible. Maneja esta información 
                            con el máximo respeto a la privacidad del estudiante y su familia. 
                            Solo personal autorizado debe tener acceso a estos registros.
                        </div>
                    </div>
                </section>

                <!-- Diferencia con asuntos individuales normales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-diagram-3 me-2"></i>
                        Asuntos EAE vs. Asuntos individuales regulares
                    </h2>
                    
                    <div class="step-card">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="text-primary">Asuntos EAE</h5>
                                <ul>
                                    <li>Para estudiantes con apoyo educativo especializado</li>
                                    <li>Se marca con bandera especial <code>is_eae = true</code></li>
                                    <li>Visible para equipos de orientación y apoyo</li>
                                    <li>Enfoque en adaptaciones y seguimiento especializado</li>
                                    <li>Ejemplo: "Seguimiento de plan de apoyo para Juan"</li>
                                    <li>Ejemplo: "Adaptación curricular implementada en matemáticas"</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5 class="text-success">Asuntos Individuales Regulares</h5>
                                <ul>
                                    <li>Para cualquier estudiante del colegio</li>
                                    <li>Marcador <code>is_eae = false</code> o sin marcar</li>
                                    <li>Seguimiento académico y disciplinario general</li>
                                    <li>Enfoque en incidencias puntuales</li>
                                    <li>Ejemplo: "María llegó tarde 3 veces"</li>
                                    <li>Ejemplo: "Pedro mostró mejora en rendimiento"</li>
                                </ul>
                            </div>
                        </div>

                        <div class="info-box mt-3">
                            <strong><i class="bi bi-info-circle me-2"></i>Cuándo usar cada uno:</strong>
                            <ul class="mb-0 mt-2">
                                <li><strong>Usa EAE</strong> cuando el registro esté directamente relacionado con el proceso de apoyo educativo especializado del estudiante</li>
                                <li><strong>Usa Individual regular</strong> para incidencias normales, incluso si el estudiante también recibe apoyo EAE</li>
                                <li>Un mismo estudiante puede tener ambos tipos de registros según la naturaleza de cada situación</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Características principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Características principales
                    </h2>
                    
                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Búsqueda inteligente de estudiantes:</strong> Autocompletado con sugerencias mientras escribes</li>
                            <li><strong>Visualización de foto:</strong> Confirmación visual del estudiante seleccionado</li>
                            <li><strong>Editor de texto enriquecido Quill:</strong> Formato profesional con encabezados, negritas, listas y enlaces</li>
                            <li><strong>Sistema de categorización múltiple:</strong> Asigna varias categorías para mejor clasificación</li>
                            <li><strong>Búsqueda de categorías integrada:</strong> Filtra categorías en tiempo real para encontrarlas rápidamente</li>
                            <li><strong>Marcado automático EAE:</strong> Los registros se marcan automáticamente como <code>is_eae = true</code></li>
                            <li><strong>Notificaciones automáticas:</strong> Alertas a directores de curso y sección</li>
                            <li><strong>Edición completa de registros abiertos:</strong> Modifica descripción y categorías</li>
                            <li><strong>Gestión de registros editables:</strong> Visualiza y edita tus registros desde un modal especializado</li>
                            <li><strong>Protección contra duplicados:</strong> Sistema que previene envíos múltiples accidentales</li>
                            <li><strong>Timeout de seguridad:</strong> Protección de 30 segundos en caso de problemas de red</li>
                        </ul>
                    </div>
                </section>

                <!-- Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5>Requisitos previos:</h5>
                        <ul>
                            <li>Tener permisos para "Registrar asuntos EAE"</li>
                            <li>Conocer el nombre del estudiante</li>
                            <li>Confirmar que el estudiante requiere o recibe apoyo educativo especializado</li>
                            <li>Tener clara la descripción del asunto o seguimiento EAE</li>
                            <li>Identificar las categorías aplicables</li>
                        </ul>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante sobre privacidad:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Maneja la información con confidencialidad</li>
                                <li>No compartas detalles de diagnósticos médicos innecesarios</li>
                                <li>Enfócate en aspectos educativos y pedagógicos</li>
                                <li>Consulta con orientación si tienes dudas sobre qué información registrar</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota sobre edición:</strong>
                            Los registros solo pueden editarse mientras estén marcados como "abiertos". 
                            Una vez que un director o administrador cierre un registro, quedará como 
                            parte del historial permanente del estudiante y no podrá modificarse.
                        </div>
                    </div>
                </section>

                <!-- Paso a paso -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Guía paso a paso
                    </h2>

                    <!-- Paso 1 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Buscar y seleccionar al estudiante
                        </h4>
                        
                        <p>
                            En el campo <strong>"Estudiante"</strong>, comienza a escribir el nombre 
                            o apellido del estudiante. El sistema mostrará sugerencias automáticamente.
                        </p>

                        <div class="info-box">
                            <strong><i class="bi bi-search me-2"></i>Búsqueda inteligente:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Escribe al menos 2 caracteres para ver sugerencias</li>
                                <li>Puedes buscar por nombre, primer apellido o segundo apellido</li>
                                <li>El sistema busca coincidencias en cualquier parte del nombre</li>
                                <li>Las sugerencias aparecen después de medio segundo de pausa</li>
                                <li>Se muestran hasta 15 resultados ordenados alfabéticamente</li>
                            </ul>
                        </div>

                        <p class="mt-3"><strong>Navegación en las sugerencias:</strong></p>
                        <ul>
                            <li><span class="keyboard-shortcut">↓</span> Flecha abajo: Mover a la siguiente sugerencia</li>
                            <li><span class="keyboard-shortcut">↑</span> Flecha arriba: Mover a la sugerencia anterior</li>
                            <li><span class="keyboard-shortcut">Enter</span> Seleccionar la sugerencia resaltada</li>
                            <li><span class="keyboard-shortcut">Esc</span> Cerrar el panel de sugerencias</li>
                            <li>También puedes hacer clic directamente sobre cualquier sugerencia</li>
                        </ul>

                        <div class="success-box">
                            <strong><i class="bi bi-camera me-2"></i>Confirmación visual con fotografía:</strong>
                            Si el estudiante seleccionado tiene código asignado y fotografía disponible 
                            en el sistema de almacenamiento, esta se mostrará automáticamente debajo 
                            del campo para que confirmes visualmente que seleccionaste al estudiante correcto.
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-circle me-2"></i>Validación obligatoria:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Debes seleccionar un estudiante de la lista de sugerencias</li>
                                <li>No puedes simplemente escribir un nombre sin seleccionarlo</li>
                                <li>El sistema valida que hayas hecho la selección correcta</li>
                                <li>Si ves el mensaje de error, asegúrate de seleccionar de la lista desplegable</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-question-circle me-2"></i>¿No encuentras al estudiante?</strong>
                            <ul class="mb-0 mt-2">
                                <li>Verifica que estés escribiendo correctamente el nombre</li>
                                <li>Intenta buscar solo por el apellido</li>
                                <li>Verifica que el estudiante esté registrado en el sistema</li>
                                <li>Contacta al administrador si el estudiante debería aparecer pero no lo hace</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Paso 2 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Describir el asunto o seguimiento EAE
                        </h4>
                        
                        <p>
                            En el editor <strong>"Descripción del asunto"</strong>, documenta detalladamente 
                            el seguimiento, incidencia o situación relacionada con el apoyo educativo del estudiante.
                        </p>

                        <p><strong>Herramientas del editor Quill:</strong></p>
                        <ul>
                            <li><strong>Encabezados (H1, H2, H3):</strong> Para estructurar la descripción en secciones</li>
                            <li><strong>Negrita, cursiva, subrayado, tachado:</strong> Para dar énfasis o formato</li>
                            <li><strong>Listas ordenadas y con viñetas:</strong> Para enumerar puntos o pasos</li>
                            <li><strong>Enlaces (Link):</strong> Para referenciar documentos o recursos externos</li>
                            <li><strong>Limpiar formato (Clean):</strong> Para eliminar todo el formato del texto seleccionado</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-file-text me-2"></i>Qué incluir en la descripción:</strong>
                            <ul class="mb-0 mt-2">
                                <li><strong>Contexto:</strong> Situación o actividad donde se realizó la observación</li>
                                <li><strong>Observación específica:</strong> Qué se observó o qué sucedió</li>
                                <li><strong>Relación con el plan de apoyo:</strong> Cómo se relaciona con el plan EAE del estudiante</li>
                                <li><strong>Adaptaciones aplicadas:</strong> Si se implementaron ajustes o adaptaciones</li>
                                <li><strong>Respuesta del estudiante:</strong> Cómo respondió el estudiante</li>
                                <li><strong>Seguimiento requerido:</strong> Acciones o seguimientos necesarios</li>
                                <li><strong>Coordinación:</strong> Si se requiere coordinación con otros profesionales</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-pencil me-2"></i>Recomendaciones importantes:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Sé objetivo y profesional en la descripción</li>
                                <li>Enfócate en aspectos educativos y pedagógicos</li>
                                <li>Evita incluir diagnósticos médicos específicos innecesarios</li>
                                <li>Usa lenguaje respetuoso y centrado en fortalezas</li>
                                <li>Incluye fechas si son relevantes para el seguimiento</li>
                                <li>Mínimo 10 caracteres requeridos para guardar</li>
                                <li>Usa el formato del editor para hacer la información más legible</li>
                            </ul>
                        </div>

                        <div class="success-box">
                            <strong><i class="bi bi-check-circle me-2"></i>Ejemplo de buena descripción:</strong>
                            <em>"Durante la clase de matemáticas del 08/11/2025, se implementó la adaptación 
                            de tiempo extendido para María según su plan de apoyo. Se le proporcionaron 
                            15 minutos adicionales para completar la evaluación. María utilizó todo el tiempo 
                            disponible y logró completar el 90% de los ejercicios correctamente, mostrando 
                            mejor comprensión que en evaluaciones anteriores sin adaptación. 
                            Se recomienda continuar con esta estrategia."</em>
                        </div>
                    </div>

                    <!-- Paso 3 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Seleccionar categorías
                        </h4>
                        
                        <p>
                            En la sección <strong>"Categorías"</strong>, selecciona una o más categorías 
                            que clasifiquen el tipo de seguimiento o asunto EAE que estás registrando.
                        </p>

                        <p><strong>Para seleccionar categorías:</strong></p>
                        <ol>
                            <li>Revisa la lista de categorías disponibles</li>
                            <li>Usa el campo de búsqueda si hay muchas opciones</li>
                            <li>Marca las casillas de las categorías aplicables</li>
                            <li>Puedes seleccionar múltiples categorías si el asunto pertenece a varios tipos</li>
                        </ol>

                        <div class="info-box">
                            <strong><i class="bi bi-funnel me-2"></i>Búsqueda integrada de categorías:</strong>
                            El campo de búsqueda filtra las categorías en tiempo real mientras escribes. 
                            Esto es especialmente útil cuando hay muchas categorías disponibles. 
                            El filtrado es instantáneo y no requiere presionar Enter.
                        </div>

                        <p class="mt-3"><strong>Ejemplos de categorías comunes para EAE:</strong></p>
                        <ul>
                            <li><strong>Adaptación curricular:</strong> Cuando se implementan ajustes en contenidos o metodología</li>
                            <li><strong>Seguimiento especializado:</strong> Para reportes de progreso del plan de apoyo</li>
                            <li><strong>Coordinación interdisciplinaria:</strong> Cuando involucra múltiples profesionales</li>
                            <li><strong>Evaluación adaptada:</strong> Cuando se aplican modificaciones en evaluaciones</li>
                            <li><strong>Apoyo psicopedagógico:</strong> Para intervenciones específicas de orientación</li>
                        </ul>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-circle me-2"></i>Obligatorio:</strong>
                            Debes seleccionar al menos una categoría para poder guardar el registro. 
                            Las categorías facilitan filtrar y buscar registros específicos posteriormente.
                        </div>

                        <div class="success-box">
                            <strong><i class="bi bi-tags me-2"></i>Categorías múltiples:</strong>
                            No dudes en seleccionar varias categorías si el asunto EAE abarca diferentes aspectos. 
                            Por ejemplo, una adaptación curricular puede también requerir coordinación 
                            interdisciplinaria y ser parte del seguimiento especializado.
                        </div>
                    </div>

                    <!-- Paso 4 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Guardar el registro
                        </h4>
                        
                        <p>
                            Una vez completados todos los campos obligatorios (estudiante, descripción y categorías), 
                            haz clic en el botón 
                            <button class="btn btn-primary btn-sm"><i class="bi bi-floppy me-1"></i>Guardar registro</button>
                        </p>

                        <p><strong>Validaciones automáticas antes de guardar:</strong></p>
                        <ul>
                            <li>Estudiante seleccionado de la lista (no solo escrito)</li>
                            <li>Descripción con al menos 10 caracteres de contenido significativo</li>
                            <li>Al menos una categoría seleccionada</li>
                        </ul>

                        <p class="mt-3"><strong>¿Qué sucede al guardar?</strong></p>
                        <ol>
                            <li><strong>Validación final:</strong> El sistema verifica todos los campos obligatorios</li>
                            <li><strong>Creación del registro principal:</strong> Se guarda en <code>stm_students_topics</code> con:
                                <ul>
                                    <li>ID del estudiante</li>
                                    <li>Descripción con formato HTML del editor Quill</li>
                                    <li>Fecha actual del sistema</li>
                                    <li>Tu correo como creador del registro</li>
                                    <li><strong>Marcador especial: <code>is_eae = true</code></strong></li>
                                    <li>Estado inicial: <code>is_open = 'SI'</code></li>
                                    <li>Escalable: <code>is_escalable = 'SI'</code></li>
                                </ul>
                            </li>
                            <li><strong>Asociación de categorías:</strong> Se vinculan todas las categorías seleccionadas en <code>stm_students_topics_categories</code></li>
                            <li><strong>Envío de notificaciones:</strong> Se envían correos automáticos con el contenido completo a:
                                <ul>
                                    <li>Director del curso al que pertenece el estudiante</li>
                                    <li>Director de la sección (si es diferente al director del curso)</li>
                                </ul>
                            </li>
                            <li><strong>Confirmación:</strong> Mensaje de éxito con el ID del registro creado</li>
                            <li><strong>Limpieza automática:</strong> El formulario se limpia para un nuevo registro</li>
                        </ol>

                        <div class="success-box">
                            <strong><i class="bi bi-envelope-check me-2"></i>Notificaciones enviadas:</strong>
                            Los directores reciben un correo con formato HTML que incluye:
                            <ul class="mb-0 mt-2">
                                <li>Título: "Nuevo Asunto Individual Registrado"</li>
                                <li>Nombre completo del estudiante</li>
                                <li>Descripción completa con formato preservado</li>
                                <li>Nombre de quien reporta</li>
                                <li>Fecha del registro</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-hourglass-split me-2"></i>Durante el guardado:</strong>
                            <ul class="mb-0 mt-2">
                                <li>El botón cambia a "Guardando..." y se deshabilita</li>
                                <li>Todos los campos del formulario se deshabilitan temporalmente</li>
                                <li>NO cierres ni recargues la página</li>
                                <li>El proceso normalmente toma 3-5 segundos</li>
                                <li>Sistema de timeout de seguridad a los 30 segundos</li>
                                <li>Si hay error, recibirás un mensaje descriptivo</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-shield-lock me-2"></i>Protección contra duplicados:</strong>
                            El sistema incluye múltiples capas de protección:
                            <ul class="mb-0 mt-2">
                                <li>Variable de control <code>enviandoFormulario</code></li>
                                <li>Deshabilitación de botones durante el envío</li>
                                <li>Estilos visuales que indican envío en proceso</li>
                                <li>Mensaje de advertencia si intentas enviar mientras se procesa</li>
                                <li>Timeout de seguridad en caso de problemas de conexión</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Gestión de registros -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-pencil-square me-2"></i>
                        Visualizar y editar mis registros EAE
                    </h2>

                    <!-- Abrir modal de registros -->
                    <div class="step-card">
                        <h5><i class="bi bi-journal-text me-2"></i>Acceder a tus registros editables</h5>
                        <p>
                            Haz clic en el botón 
                            <button class="btn btn-outline-info btn-sm"><i class="bi bi-pencil-square me-1"></i>Mis registros</button>
                            para abrir un modal con todos los registros EAE que has creado y que aún están abiertos.
                        </p>

                        <p><strong>El modal muestra una tabla con:</strong></p>
                        <ul>
                            <li><strong>Fecha:</strong> Cuándo se creó el registro (formato YYYY-MM-DD)</li>
                            <li><strong>Estudiante:</strong> Nombre completo del estudiante</li>
                            <li><strong>Descripción:</strong> Resumen truncado (primeros 150 caracteres)</li>
                            <li><strong>Categorías:</strong> Lista de categorías asignadas</li>
                            <li><strong>Acciones:</strong> Botón "Editar" para modificar el registro</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Sobre los registros mostrados:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Solo aparecen registros que <strong>tú</strong> has creado</li>
                                <li>Solo se muestran registros con estado <code>is_open = 'SI'</code></li>
                                <li>Los registros cerrados no aparecen porque no son editables</li>
                                <li>Se muestran hasta 50 registros, ordenados por fecha (más recientes primero)</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-circle me-2"></i>Si no aparecen registros:</strong>
                            Verás un mensaje indicando que no tienes registros editables. Esto puede ser porque:
                            <ul class="mb-0 mt-2">
                                <li>Aún no has creado ningún registro EAE</li>
                                <li>Todos tus registros ya fueron cerrados por un director o administrador</li>
                                <li>Los registros fueron creados con otro usuario</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Editar un registro -->
                    <div class="step-card">
                        <h5><i class="bi bi-pencil me-2"></i>Modificar un registro existente</h5>
                        
                        <p><strong>Para editar un registro:</strong></p>
                        <ol>
                            <li>En la tabla de registros, localiza el que deseas modificar</li>
                            <li>Haz clic en el botón <button class="btn btn-warning btn-sm" style="padding: 4px 8px; font-size: 11px;">Editar</button></li>
                            <li>Se abrirá un sub-modal de edición con:
                                <ul>
                                    <li><strong>Editor Quill</strong> con el contenido actual de la descripción</li>
                                    <li><strong>Lista de categorías</strong> con las actuales ya marcadas</li>
                                    <li><strong>Búsqueda de categorías</strong> para filtrar opciones</li>
                                </ul>
                            </li>
                            <li>Realiza los cambios necesarios en la descripción y/o categorías</li>
                            <li>Haz clic en <button class="btn btn-success btn-sm"><i class="bi bi-check-lg me-1"></i>Guardar Cambios</button></li>
                            <li>El sistema guardará los cambios y mostrará confirmación</li>
                            <li>El modal de edición se cerrará automáticamente después de 2 segundos</li>
                            <li>La tabla de registros se actualizará con los nuevos datos</li>
                        </ol>

                        <div class="success-box">
                            <strong><i class="bi bi-check-circle me-2"></i>Proceso de actualización:</strong>
                            Al guardar cambios, el sistema:
                            <ul class="mb-0 mt-2">
                                <li>Verifica que el registro sigue siendo tuyo y está abierto</li>
                                <li>Actualiza la descripción en <code>stm_students_topics</code></li>
                                <li>Elimina todas las categorías anteriores</li>
                                <li>Inserta las nuevas categorías seleccionadas</li>
                                <li>Mantiene todos los demás campos sin cambios</li>
                                <li>Recarga automáticamente la lista de registros</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-lock me-2"></i>Limitaciones de la edición:</strong>
                            <ul class="mb-0 mt-2">
                                <li>No puedes cambiar el <strong>estudiante</strong> asociado al registro</li>
                                <li>No puedes cambiar la <strong>fecha</strong> del registro</li>
                                <li>No puedes cambiar el <strong>estado</strong> (abierto/cerrado)</li>
                                <li>No puedes cambiar el marcador <strong>is_eae</strong></li>
                                <li>Solo puedes modificar la <strong>descripción</strong> y las <strong>categorías</strong></li>
                                <li>Los registros cerrados NO aparecen en la lista y no pueden editarse</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-shield-check me-2"></i>Seguridad en la edición:</strong>
                            <ul class="mb-0 mt-2">
                                <li>El sistema valida tu identidad en cada cambio</li>
                                <li>Solo puedes editar registros creados con tu correo</li>
                                <li>Se verifica el estado "abierto" antes de permitir cambios</li>
                                <li>Todos los cambios quedan registrados con tu usuario</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Funciones adicionales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-tools me-2"></i>
                        Funciones adicionales
                    </h2>

                    <div class="step-card">
                        <h5><i class="bi bi-x-circle me-2"></i>Limpiar formulario</h5>
                        <p>
                            El botón <button class="btn btn-outline-secondary btn-sm"><i class="bi bi-x-circle me-1"></i>Limpiar</button>
                            elimina todos los datos ingresados y reinicia el formulario.
                        </p>
                        
                        <p><strong>Al hacer clic en Limpiar:</strong></p>
                        <ul>
                            <li>Se muestra un diálogo de confirmación para prevenir borrados accidentales</li>
                            <li>Si confirmas, se limpia:
                                <ul>
                                    <li>El campo de búsqueda del estudiante</li>
                                    <li>El estudiante seleccionado</li>
                                    <li>La foto mostrada (si había una)</li>
                                    <li>Todo el contenido del editor Quill</li>
                                    <li>Todas las categorías marcadas</li>
                                    <li>El campo de búsqueda de categorías</li>
                                </ul>
                            </li>
                            <li>El cursor se posiciona automáticamente en el campo de búsqueda del estudiante</li>
                        </ul>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Advertencia:</strong>
                            Esta acción no se puede deshacer. Asegúrate de querer eliminar todos los datos 
                            antes de confirmar. Si solo necesitas modificar un campo específico, 
                            hazlo directamente sin usar esta función.
                        </div>
                    </div>
                </section>

                <!-- Solución de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Solución de problemas comunes
                    </h2>

                    <div class="step-card">
                        <h5>No aparecen sugerencias al buscar estudiante</h5>
                        <ul>
                            <li>Verifica que hayas escrito al menos 2 caracteres</li>
                            <li>Espera medio segundo después de escribir para que se active la búsqueda</li>
                            <li>Verifica tu conexión a internet</li>
                            <li>Prueba con diferentes partes del nombre (nombre, apellidos)</li>
                            <li>Si aparece "Error al buscar estudiantes", recarga la página</li>
                            <li>Contacta al administrador si persiste el problema</li>
                        </ul>

                        <h5 class="mt-3">El sistema dice que debo seleccionar un estudiante válido</h5>
                        <ul>
                            <li>No basta con escribir el nombre, debes seleccionarlo de la lista desplegable</li>
                            <li>Asegúrate de hacer clic sobre el nombre en las sugerencias</li>
                            <li>O usa las flechas del teclado y presiona Enter para seleccionar</li>
                            <li>El campo debe mostrar exactamente el nombre completo del estudiante</li>
                        </ul>

                        <h5 class="mt-3">La foto del estudiante no aparece</h5>
                        <ul>
                            <li>Esto es normal si el estudiante no tiene código asignado</li>
                            <li>También es normal si no hay foto en el sistema de almacenamiento</li>
                            <li>La falta de foto NO impide crear el registro</li>
                            <li>Puedes continuar normalmente sin la confirmación visual</li>
                        </ul>

                        <h5 class="mt-3">El editor Quill no responde o no puedo escribir</h5>
                        <ul>
                            <li>Haz clic directamente dentro del área del editor</li>
                            <li>Verifica que la página haya terminado de cargar completamente</li>
                            <li>Intenta recargar la página (F5)</li>
                            <li>Verifica que JavaScript esté habilitado en tu navegador</li>
                            <li>Prueba en otro navegador si el problema persiste</li>
                        </ul>

                        <h5 class="mt-3">Los botones de formato del editor no funcionan</h5>
                        <ul>
                            <li>Asegúrate de seleccionar el texto primero antes de aplicar formato</li>
                            <li>Para encabezados, coloca el cursor en la línea y selecciona el nivel</li>
                            <li>Algunos formatos requieren que hayas escrito algo primero</li>
                            <li>El botón "Clean" elimina todos los formatos del texto seleccionado</li>
                        </ul>

                        <h5 class="mt-3">Las categorías no se cargan</h5>
                        <ul>
                            <li>Espera unos segundos, pueden estar cargando desde la base de datos</li>
                            <li>Verifica tu conexión a internet</li>
                            <li>Recarga la página si no aparecen después de 10 segundos</li>
                            <li>Si ves "No hay categorías disponibles", contacta al administrador</li>
                        </ul>

                        <h5 class="mt-3">La búsqueda de categorías no funciona</h5>
                        <ul>
                            <li>Asegúrate de escribir en el campo correcto (arriba del listado)</li>
                            <li>La búsqueda es instantánea, no necesitas presionar Enter</li>
                            <li>Prueba con diferentes palabras clave</li>
                            <li>Borra el contenido del campo para ver todas las categorías de nuevo</li>
                        </ul>

                        <h5 class="mt-3">El botón "Guardar registro" está deshabilitado</h5>
                        <ul>
                            <li>Verifica que hayas seleccionado un estudiante de la lista</li>
                            <li>Verifica que el editor tenga al menos 10 caracteres de contenido</li>
                            <li>Verifica que hayas seleccionado al menos una categoría</li>
                            <li>Todos estos requisitos deben cumplirse simultáneamente</li>
                        </ul>

                        <h5 class="mt-3">Error al guardar el registro</h5>
                        <ul>
                            <li>Verifica que todos los campos obligatorios estén completos</li>
                            <li>Verifica tu conexión a internet</li>
                            <li>Lee el mensaje de error específico que aparece</li>
                            <li>Si dice "timeout", puede ser problema de conexión - intenta de nuevo</li>
                            <li>Copia tu descripción en un lugar seguro antes de recargar la página</li>
                            <li>Contacta al administrador si el error persiste</li>
                        </ul>

                        <h5 class="mt-3">El modal de "Mis registros" no se abre</h5>
                        <ul>
                            <li>Espera a que la página termine de cargar completamente</li>
                            <li>Verifica tu conexión a internet</li>
                            <li>Recarga la página e intenta de nuevo</li>
                            <li>Verifica que no haya mensajes de error en la consola del navegador</li>
                        </ul>

                        <h5 class="mt-3">No aparecen registros en el modal aunque sé que los creé</h5>
                        <ul>
                            <li>Verifica que estés usando el mismo usuario con el que los creaste</li>
                            <li>Recuerda que solo aparecen registros con estado "abierto"</li>
                            <li>Los registros cerrados no se muestran porque no son editables</li>
                            <li>Si los registros son muy antiguos, pueden haber sido cerrados</li>
                        </ul>

                        <h5 class="mt-3">No puedo editar un registro desde el modal</h5>
                        <ul>
                            <li>Verifica que el registro esté marcado como "abierto"</li>
                            <li>Verifica que sea un registro creado por ti</li>
                            <li>Haz clic en el botón "Editar" amarillo junto al registro</li>
                            <li>Si el botón no responde, recarga la página e intenta de nuevo</li>
                        </ul>

                        <h5 class="mt-3">Error al guardar cambios en un registro editado</h5>
                        <ul>
                            <li>Verifica que la descripción no esté vacía</li>
                            <li>Verifica que tengas al menos una categoría seleccionada</li>
                            <li>Verifica tu conexión a internet</li>
                            <li>El registro puede haber sido cerrado por un director mientras lo editabas</li>
                            <li>Cierra el modal de edición y verifica si el registro sigue en la lista</li>
                        </ul>

                        <h5 class="mt-3">Las notificaciones no llegan a los directores</h5>
                        <ul>
                            <li>Verifica que el estudiante esté asignado a un curso con director</li>
                            <li>Verifica que los directores tengan correos configurados en el sistema</li>
                            <li>Los correos pueden tardar algunos minutos en llegar</li>
                            <li>Solicita a los directores que revisen su carpeta de spam</li>
                            <li>Contacta al administrador si después de 10 minutos no han llegado</li>
                        </ul>
                    </div>
                </section>

                <!-- Buenas prácticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas prácticas para registros EAE
                    </h2>

                    <div class="step-card">
                        <ul class="feature-list">
                            <li>Registra el seguimiento EAE de forma regular y consistente</li>
                            <li>Documenta tanto avances como áreas de oportunidad del estudiante</li>
                            <li>Sé específico sobre las adaptaciones o ajustes implementados</li>
                            <li>Incluye evidencia observable del desempeño del estudiante</li>
                            <li>Usa lenguaje profesional, respetuoso y centrado en fortalezas</li>
                            <li>Enfócate en aspectos educativos más que en diagnósticos médicos</li>
                            <li>Incluye fechas específicas para facilitar el seguimiento temporal</li>
                            <li>Menciona la efectividad de las estrategias implementadas</li>
                            <li>Indica si se requiere coordinación con otros profesionales</li>
                            <li>Usa el formato del editor para estructurar información compleja</li>
                            <li>Selecciona categorías precisas para facilitar búsquedas posteriores</li>
                            <li>Mantén confidencialidad sobre información sensible del estudiante</li>
                            <li>Actualiza o edita registros abiertos si hay nueva información relevante</li>
                            <li>Consulta con orientación ante dudas sobre qué información registrar</li>
                            <li>Revisa tus registros periódicamente para dar seguimiento continuo</li>
                        </ul>

                        <div class="info-box mt-3">
                            <strong><i class="bi bi-book me-2"></i>Documentación efectiva:</strong>
                            Un buen registro EAE permite que cualquier profesional que lo lea pueda:
                            <ul class="mb-0 mt-2">
                                <li>Entender claramente la situación del estudiante</li>
                                <li>Conocer las adaptaciones que están funcionando</li>
                                <li>Identificar áreas que requieren ajustes</li>
                                <li>Dar continuidad al proceso de apoyo</li>
                                <li>Tomar decisiones informadas sobre siguiente pasos</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Aspectos técnicos -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-gear me-2"></i>
                        Aspectos técnicos importantes
                    </h2>

                    <div class="step-card">
                        <h5>Diferenciador clave: Marcador EAE</h5>
                        <p>
                            La diferencia fundamental entre este formulario y el de asuntos individuales 
                            regulares es el campo <code>is_eae</code> que se establece automáticamente:
                        </p>
                        <ul>
                            <li><strong>Registros EAE:</strong> <code>is_eae = true</code></li>
                            <li><strong>Registros individuales regulares:</strong> <code>is_eae = false</code> o sin valor</li>
                        </ul>
                        <p>
                            Este marcador permite filtrar y consultar específicamente registros relacionados 
                            con apoyo educativo especializado, facilitando reportes y seguimientos diferenciados.
                        </p>

                        <h5 class="mt-4">Campos automáticos del sistema</h5>
                        <p>Al crear un registro, el sistema completa automáticamente:</p>
                        <ul>
                            <li><strong>student_id:</strong> ID del estudiante seleccionado</li>
                            <li><strong>topic_description:</strong> Contenido HTML del editor Quill</li>
                            <li><strong>topic_date:</strong> Fecha actual del sistema (YYYY-MM-DD)</li>
                            <li><strong>email:</strong> Tu correo institucional del usuario logueado</li>
                            <li><strong>is_eae:</strong> <code>true</code> (marcador especialespecífico)</li>
                            <li><strong>is_escalable:</strong> 'SI' (indica que puede escalarse a niveles superiores)</li>
                            <li><strong>is_open:</strong> 'SI' (permite edición inicial)</li>
                        </ul>

                        <h5 class="mt-4">Estructura de base de datos</h5>
                        <p>Los registros EAE se almacenan en:</p>
                        <ul>
                            <li><strong>stm_students_topics:</strong> Tabla principal con información del registro</li>
                            <li><strong>stm_students_topics_categories:</strong> Tabla de relación con categorías (muchos a muchos)</li>
                            <li><strong>stm_category:</strong> Catálogo de categorías disponibles</li>
                            <li><strong>students:</strong> Referencia al estudiante (con foreign key)</li>
                        </ul>

                        <h5 class="mt-4">Editor Quill</h5>
                        <p>Características técnicas del editor de texto:</p>
                        <ul>
                            <li>Versión: Quill 1.3.6 (CDN)</li>
                            <li>Tema: Snow (tema clásico con toolbar)</li>
                            <li>Altura: 200px fija</li>
                            <li>Formatos habilitados: Encabezados (1-3), negrita, cursiva, subrayado, tachado, listas, enlaces</li>
                            <li>Almacenamiento: HTML completo con tags preservados</li>
                            <li>Placeholder: "Describa detalladamente el asunto o incidencia del estudiante..."</li>
                        </ul>

                        <h5 class="mt-4">Sistema de notificaciones</h5>
                        <p>Funcionamiento técnico de las notificaciones:</p>
                        <ul>
                            <li>Función: <code>sendNotification()</code> de config.js</li>
                            <li>Método: Google Apps Script configurado como webhook</li>
                            <li>Formato: HTML enriquecido con estilos inline</li>
                            <li>Destinatarios: Se obtienen de las relaciones <code>courses → grades → sections</code></li>
                            <li>Condición: Se envía a director de sección solo si es diferente al director de curso</li>
                            <li>Manejo de errores: Los errores de notificación no impiden que se guarde el registro</li>
                        </ul>

                        <h5 class="mt-4">Protecciones implementadas</h5>
                        <p>Mecanismos de seguridad y protección:</p>
                        <ul>
                            <li><strong>Envío único:</strong> Variable <code>enviandoFormulario</code> previene múltiples envíos</li>
                            <li><strong>Timeout de seguridad:</strong> 30 segundos para prevenir bloqueos por problemas de red</li>
                            <li><strong>Deshabilitación de UI:</strong> Todos los controles se deshabilitan durante el envío</li>
                            <li><strong>Validaciones de edición:</strong> Se verifica usuario y estado antes de permitir cambios</li>
                            <li><strong>Verificación de permisos:</strong> <code>validatePageAccess()</code> al cargar la página</li>
                        </ul>

                        <h5 class="mt-4">Proceso de edición</h5>
                        <p>Flujo técnico al editar un registro:</p>
                        <ol>
                            <li>Se carga el registro con validación de usuario y estado</li>
                            <li>Se carga el contenido HTML en el editor Quill de edición</li>
                            <li>Se obtienen las categorías actuales y se marcan los checkboxes correspondientes</li>
                            <li>Al guardar:
                                <ul>
                                    <li>Se actualiza solo el campo <code>topic_description</code> en <code>stm_students_topics</code></li>
                                    <li>Se eliminan TODAS las categorías anteriores de <code>stm_students_topics_categories</code></li>
                                    <li>Se insertan las nuevas categorías seleccionadas</li>
                                </ul>
                            </li>
                            <li>Se recarga la tabla de registros editables</li>
                            <li>Se cierra automáticamente el modal después de 2 segundos</li>
                        </ol>
                    </div>
                </section>

                <!-- Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="step-card">
                        <h5>¿Cuál es la diferencia entre asuntos EAE e individuales regulares?</h5>
                        <p>
                            La diferencia principal es el marcador <code>is_eae = true</code> que se asigna 
                            automáticamente a los registros creados desde este formulario. Esto permite:
                        </p>
                        <ul>
                            <li>Identificar rápidamente registros relacionados con apoyo educativo especializado</li>
                            <li>Generar reportes específicos de seguimiento EAE</li>
                            <li>Dar visibilidad especial a equipos de orientación</li>
                            <li>Diferenciar en dashboards y estadísticas</li>
                        </ul>

                        <h5 class="mt-3">¿Cualquier estudiante puede tener registros EAE?</h5>
                        <p>
                            Técnicamente sí, el sistema no restringe por estudiante. Sin embargo, 
                            estos registros deben usarse <strong>solo</strong> para estudiantes que 
                            efectivamente requieren o reciben apoyo educativo especializado, 
                            según criterio profesional del equipo de orientación.
                        </p>

                        <h5 class="mt-3">¿Puedo crear registros EAE y regulares para el mismo estudiante?</h5>
                        <p>
                            Sí, absolutamente. Un estudiante puede tener ambos tipos de registros:
                        </p>
                        <ul>
                            <li><strong>EAE:</strong> Para seguimiento específico de su plan de apoyo, adaptaciones, etc.</li>
                            <li><strong>Regular:</strong> Para incidencias normales como cualquier otro estudiante</li>
                        </ul>

                        <h5 class="mt-3">¿Quién puede ver los registros EAE que creo?</h5>
                        <p>
                            Los registros EAE son visibles para:
                        </p>
                        <ul>
                            <li>El usuario que crea el registro</li>
                            <li>Director del curso del estudiante</li>
                            <li>Director de sección</li>
                            <li>Equipo de orientación escolar (si tienen los permisos configurados)</li>
                            <li>Super Administradores del sistema</li>
                        </ul>

                        <h5 class="mt-3">¿Por qué usar editor Quill en lugar del editor simple?</h5>
                        <p>
                            El editor Quill proporciona:
                        </p>
                        <ul>
                            <li>Capacidades de formato más profesionales (encabezados, enlaces, listas)</li>
                            <li>Mejor experiencia de usuario para textos largos</li>
                            <li>Compatibilidad con copiar/pegar desde Word u otros editores</li>
                            <li>Limpieza automática de formatos problemáticos</li>
                        </ul>

                        <h5 class="mt-3">¿Puedo cambiar las categorías de un registro después de guardarlo?</h5>
                        <p>
                            Sí, mientras el registro esté "abierto" puedes editar tanto la descripción 
                            como las categorías desde el modal "Mis registros". Una vez cerrado por un 
                            director, ya no podrás modificarlo.
                        </p>

                        <h5 class="mt-3">¿Puedo eliminar un registro EAE?</h5>
                        <p>
                            No, los registros EAE no pueden eliminarse por razones de auditoría y 
                            trazabilidad del proceso de apoyo del estudiante. Solo pueden editarse 
                            mientras estén abiertos. Si creaste un registro por error, edita la 
                            descripción para indicarlo y solicita a un administrador que lo cierre.
                        </p>

                        <h5 class="mt-3">¿Las notificaciones mencionan que es un registro EAE?</h5>
                        <p>
                            Actualmente, las notificaciones enviadas no distinguen visualmente si es 
                            un registro EAE o regular. Solo indican "Nuevo Asunto Individual Registrado". 
                            Los directores pueden identificar registros EAE cuando consultan el sistema 
                            mediante filtros específicos.
                        </p>

                        <h5 class="mt-3">¿Qué pasa si el estudiante no tiene director de curso asignado?</h5>
                        <p>
                            Si no hay director de curso configurado, el sistema:
                        </p>
                        <ul>
                            <li>Guarda el registro normalmente</li>
                            <li>Registra un warning en la consola del navegador</li>
                            <li>No envía notificación (no hay destinatario)</li>
                            <li>El registro queda accesible en el sistema para consulta manual</li>
                        </ul>

                        <h5 class="mt-3">¿Cuántos registros puedo editar simultáneamente?</h5>
                        <p>
                            Técnicamente puedes abrir y editar un registro a la vez. El modal de edición 
                            se cierra automáticamente al guardar cambios, permitiendo editar otro registro. 
                            El sistema muestra hasta 50 registros editables en el modal principal.
                        </p>

                        <h5 class="mt-3">¿Puedo exportar o imprimir un registro EAE?</h5>
                        <p>
                            Actualmente no hay función directa de exportación. Sin embargo:
                        </p>
                        <ul>
                            <li>Puedes copiar el contenido de la descripción desde el modal de edición</li>
                            <li>Los directores reciben el contenido completo por correo</li>
                            <li>Puedes usar la función de impresión del navegador en el modal</li>
                            <li>Para reportes formales, contacta al administrador del sistema</li>
                        </ul>

                        <h5 class="mt-3">¿Qué sucede si hay un error durante el guardado?</h5>
                        <p>
                            Si ocurre un error:
                        </p>
                        <ul>
                            <li>Se muestra un mensaje descriptivo del problema</li>
                            <li>El formulario permanece con tus datos (no se pierden)</li>
                            <li>El sistema se desbloquea para que puedas intentar de nuevo</li>
                            <li>Si el error es de red, el timeout de 30 segundos desbloquea automáticamente</li>
                            <li>Se recomienda copiar tu descripción antes de recargar la página</li>
                        </ul>

                        <h5 class="mt-3">¿Los registros EAE afectan el historial académico del estudiante?</h5>
                        <p>
                            Los registros EAE forman parte del seguimiento integral del estudiante y 
                            pueden ser consultados por el equipo académico y de orientación. Sin embargo, 
                            son registros de seguimiento y apoyo, no calificaciones ni sanciones disciplinarias. 
                            Su propósito es documentar el proceso de acompañamiento educativo especializado.
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¿Encontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, repórtalo aquí.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOTÓN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CRÍTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACIÓN DE LA PÁGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Seguimientos',
            modulePath: 'follow-ups',
            pageTitle: 'Registrar asuntos EAE',
            pagePath: 'eae-issues.html',
            moduleDescription: 'Sistema de registro de asuntos EAE (Estudiantes con Apoyo Educativo)'
        };

        // ==========================================
        // INICIALIZACIÓN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('📖 Iniciando página de manual...');
            
            try {
                // Verificar si existe la función de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesión si la función existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar información en la página
                updatePageInfo();
                
                console.log('✅ Página de manual lista');
                
            } catch (error) {
                console.error('❌ Error inicializando página:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la página: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACIÓN DE LA PÁGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCIÓN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove después de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
