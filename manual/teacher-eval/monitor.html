<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="page-version" content="26.02.28.20.50">
    <title>Manual - Evaluaci√≥n Docente - Monitoreo - SchoolNet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: flex; justify-content: center;
            align-items: center; z-index: 9999;
        }
        .loading-overlay.hidden { display: none; }
        .loading-content {
            background: white; padding: 2rem; border-radius: 8px; text-align: center;
        }
        .spinner {
            border: 3px solid #f3f3f3; border-top: 3px solid #007bff;
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: 0 auto 1rem;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0; margin-bottom: 2rem;
        }
        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }
        .manual-header .subtitle { color: #6c757d; font-size: 0.95rem; }

        .info-card {
            background: white; border: 1px solid #dee2e6;
            border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;
        }
        .bug-report-card {
            background: var(--system-secondary-color, #667eea);
            color: white; border-radius: 12px;
            padding: 2rem; margin-bottom: 2rem; text-align: center;
        }
        .bug-report-card h5 { color: white; }
        .floating-bug-button {
            position: fixed; bottom: 30px; right: 30px; z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #dc3545) !important;
            border-color: var(--system-primary-color, #dc3545) !important;
        }
        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4); opacity: 0.9;
        }
        .icon-large { font-size: 2.5rem; margin-bottom: 0.5rem; }

        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem; margin-top: 2rem; margin-bottom: 1rem;
        }
        .step-card {
            background: white; border: 1px solid #e9ecef;
            border-radius: 8px; padding: 1.25rem; margin-bottom: 1.25rem;
        }
        .step-number {
            display: inline-flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--system-primary-color, #1B365D);
            color: white; font-weight: 700; margin-right: 0.75rem;
        }
        .feature-list { list-style: none; padding-left: 0; }
        .feature-list li {
            padding: 0.5rem 0; border-bottom: 1px solid #f1f5f9;
        }
        .feature-list li:last-child { border-bottom: none; }
        .feature-list li::before {
            content: '‚úì'; color: #10b981; font-weight: 700; margin-right: 0.5rem;
        }
        .info-box {
            background: #e8f4fd; border-left: 4px solid #0ea5e9;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .success-box {
            background: #ecfdf5; border-left: 4px solid #10b981;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .warning-box {
            background: #fffbeb; border-left: 4px solid #f59e0b;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }

        .color-example {
            display: inline-block; width: 16px; height: 16px;
            border-radius: 3px; vertical-align: middle; margin-right: 0.4rem;
        }
        .metric-card-example {
            background: #f8f9fa; border: 1px solid #e9ecef;
            border-radius: 8px; padding: 1rem; margin-bottom: 0.75rem;
        }
    </style>
</head>

<body>
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <div class="container-fluid">

        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1><i class="bi bi-book me-2"></i>Manual: Evaluaci√≥n Docente</h1>
                        <p class="subtitle mb-0">Monitoreo ‚Äî Seguimiento en tiempo real del avance de evaluaciones</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/teacher-eval/monitor.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-8 mx-auto">

                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Evaluaci√≥n Docente</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Monitoreo</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ====== CONTENIDO DEL MANUAL ====== -->

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© es el Monitoreo de Evaluaciones?
                    </h2>

                    <div class="step-card">
                        <p class="lead">
                            La p√°gina de Monitoreo te permite ver <strong>en tiempo real</strong> cu√°ntos estudiantes han completado sus evaluaciones mientras un per√≠odo est√° abierto.
                        </p>
                        <p>
                            Es una herramienta de seguimiento que muestra el avance por cada curso, agrupado por secci√≥n acad√©mica (Preescolar, Primaria, Secundaria, etc.), con barras de progreso coloreadas que te permiten identificar r√°pidamente d√≥nde va bien la participaci√≥n y d√≥nde necesita atenci√≥n.
                        </p>
                        <p>
                            Esta p√°gina <strong>solo funciona cuando hay un per√≠odo abierto</strong>. Si no hay ninguno, ver√°s una alerta indic√°ndolo.
                        </p>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas principales
                    </h2>

                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Detecci√≥n autom√°tica:</strong> La p√°gina detecta autom√°ticamente cu√°l es el per√≠odo abierto y carga sus datos</li>
                            <li><strong>4 tarjetas de resumen:</strong> M√©tricas globales en la parte superior para una vista r√°pida</li>
                            <li><strong>Avance por curso:</strong> Cada curso muestra cu√°ntos estudiantes completaron, est√°n en progreso o no han iniciado</li>
                            <li><strong>Barras de progreso coloreadas:</strong> Rojo, amarillo o verde seg√∫n el porcentaje de avance</li>
                            <li><strong>Agrupaci√≥n por secci√≥n acad√©mica:</strong> Los cursos aparecen organizados bajo su secci√≥n (Preescolar, Primaria, etc.)</li>
                            <li><strong>B√∫squeda r√°pida:</strong> Filtra cursos por nombre para encontrar r√°pidamente el que te interesa</li>
                            <li><strong>Actualizaci√≥n manual:</strong> Bot√≥n para refrescar los datos sin recargar la p√°gina, con indicaci√≥n de cu√°ndo fue la √∫ltima actualizaci√≥n</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>

                    <div class="step-card">
                        <h5>Requisitos previos:</h5>
                        <ul>
                            <li>Tener el permiso de <strong>Monitoreo de evaluaciones</strong> asignado a tu rol</li>
                            <li>Que haya un <strong>per√≠odo abierto</strong> actualmente (la p√°gina no mostrar√° datos si todos los per√≠odos est√°n cerrados)</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                            No necesitas hacer nada especial para ver los datos. La p√°gina carga autom√°ticamente la informaci√≥n del per√≠odo abierto al ingresar.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-grid me-2"></i>
                        Las tarjetas de resumen
                    </h2>

                    <div class="step-card">
                        <p>En la parte superior de la p√°gina ver√°s cuatro tarjetas con las m√©tricas globales del per√≠odo abierto:</p>

                        <div class="metric-card-example">
                            <strong><i class="bi bi-people me-2 text-primary"></i>Estudiantes esperados</strong>
                            <p class="mb-0 small text-muted">Total de estudiantes matriculados en los cursos que tienen evaluaci√≥n. Es el universo completo de estudiantes que podr√≠an evaluar.</p>
                        </div>

                        <div class="metric-card-example">
                            <strong><i class="bi bi-check-circle me-2 text-success"></i>Sesiones completadas</strong>
                            <p class="mb-0 small text-muted">Cantidad de evaluaciones individuales que ya fueron terminadas y enviadas por los estudiantes. Un estudiante genera varias sesiones (una por cada profesor que eval√∫a).</p>
                        </div>

                        <div class="metric-card-example">
                            <strong><i class="bi bi-clock-history me-2 text-warning"></i>En progreso</strong>
                            <p class="mb-0 small text-muted">Sesiones que fueron iniciadas pero a√∫n no se completaron. Puede indicar que un estudiante dej√≥ la evaluaci√≥n a medias o que su sesi√≥n expir√≥.</p>
                        </div>

                        <div class="metric-card-example">
                            <strong><i class="bi bi-graph-up me-2 text-info"></i>Avance global</strong>
                            <p class="mb-0 small text-muted">Porcentaje general de avance calculado sobre el total de estudiantes esperados. Es el indicador principal para saber qu√© tan avanzada va la evaluaci√≥n.</p>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-bar-chart me-2"></i>
                        Entendiendo las barras de progreso
                    </h2>

                    <div class="step-card">
                        <p>Cada curso tiene una barra de progreso que se colorea seg√∫n el porcentaje de estudiantes que ya completaron la evaluaci√≥n:</p>

                        <ul>
                            <li>
                                <span class="color-example" style="background:#ef4444;"></span>
                                <strong>Rojo (menos del 40%):</strong> Baja participaci√≥n. Es necesario tomar acci√≥n para motivar a los estudiantes de este curso.
                            </li>
                            <li>
                                <span class="color-example" style="background:#f59e0b;"></span>
                                <strong>Amarillo (entre 40% y 74%):</strong> Participaci√≥n moderada. Va por buen camino pero a√∫n falta un porcentaje importante.
                            </li>
                            <li>
                                <span class="color-example" style="background:#10b981;"></span>
                                <strong>Verde (75% o m√°s):</strong> Buena participaci√≥n. La mayor√≠a de los estudiantes ya completaron su evaluaci√≥n.
                            </li>
                        </ul>

                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo:</strong>
                            Enfoca tu atenci√≥n en los cursos con barra roja. Puede ser necesario enviar recordatorios a los directores de curso o coordinar con los docentes para facilitar un espacio de evaluaci√≥n.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Gu√≠a paso a paso
                    </h2>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Acceder al monitoreo
                        </h4>
                        <p>Desde el √≠ndice del m√≥dulo de Evaluaci√≥n Docente, haz clic en la tarjeta <strong>"Monitoreo"</strong> del grupo de Seguimiento.</p>
                        <p>La p√°gina cargar√° autom√°ticamente los datos del per√≠odo abierto. Si no hay ninguno, ver√°s una alerta inform√°ndote.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Revisar las m√©tricas globales
                        </h4>
                        <p>Observa las cuatro tarjetas superiores para tener una visi√≥n general r√°pida del estado de la evaluaci√≥n.</p>
                        <p>Presta especial atenci√≥n al <strong>Avance global</strong>: si est√° por debajo del 50%, puede ser necesario impulsar la participaci√≥n.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Revisar el avance por curso
                        </h4>
                        <p>Debajo de las m√©tricas ver√°s los cursos organizados por secci√≥n acad√©mica. Para cada curso podr√°s ver:</p>
                        <ul>
                            <li>El nombre del curso</li>
                            <li>La barra de progreso con su porcentaje</li>
                            <li>Cantidad de evaluaciones completadas</li>
                            <li>Cantidad de evaluaciones en progreso</li>
                            <li>Cantidad de estudiantes que a√∫n no han iniciado</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Buscar un curso espec√≠fico
                        </h4>
                        <p>Si tienes muchos cursos, usa el <strong>campo de b√∫squeda</strong> para filtrar por nombre. Escribe parte del nombre del curso y la lista se filtrar√° autom√°ticamente.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">5</span>
                            Actualizar los datos
                        </h4>
                        <p>Para ver los datos m√°s recientes sin recargar toda la p√°gina, haz clic en el bot√≥n <strong>"Actualizar"</strong>. Debajo del bot√≥n ver√°s la hora de la √∫ltima actualizaci√≥n.</p>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                            Los datos no se actualizan autom√°ticamente cada cierto tiempo. Debes hacer clic en "Actualizar" o recargar la p√°gina para ver las cifras m√°s recientes.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Soluci√≥n de problemas comunes
                    </h2>

                    <div class="step-card">
                        <h5>Aparece una alerta de "No hay per√≠odo abierto"</h5>
                        <ul>
                            <li>La p√°gina de monitoreo solo funciona cuando hay un per√≠odo con estado "Abierto"</li>
                            <li>Ve a la p√°gina de Per√≠odos y verifica que haya uno abierto</li>
                            <li>Si todos est√°n cerrados, abre el per√≠odo correspondiente</li>
                        </ul>

                        <h5 class="mt-3">Los n√∫meros no parecen correctos</h5>
                        <ul>
                            <li>Haz clic en "Actualizar" para refrescar los datos</li>
                            <li>Los "estudiantes esperados" se calculan a partir de los estudiantes matriculados en cada curso. Si hay cambios recientes en la matr√≠cula, puede haber diferencia</li>
                            <li>Las sesiones "en progreso" incluyen estudiantes cuya sesi√≥n expir√≥ sin completar</li>
                        </ul>

                        <h5 class="mt-3">Un curso aparece con 0 estudiantes esperados</h5>
                        <ul>
                            <li>Verifica que el curso tenga estudiantes matriculados en el sistema</li>
                            <li>Si es un curso nuevo que se acaba de crear, es posible que a√∫n no tenga estudiantes asignados</li>
                        </ul>

                        <h5 class="mt-3">No encuentro un curso en la lista</h5>
                        <ul>
                            <li>Usa el campo de b√∫squeda y escribe parte del nombre</li>
                            <li>Verifica que el curso est√© asociado a una secci√≥n acad√©mica que tenga formulario en este per√≠odo</li>
                            <li>Solo aparecen cursos cuya secci√≥n acad√©mica tiene un formulario asignado al per√≠odo abierto</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas pr√°cticas
                    </h2>

                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Revisa diariamente:</strong> Durante el per√≠odo abierto, consulta el monitoreo al menos una vez al d√≠a para detectar problemas a tiempo</li>
                            <li><strong>Identifica los cursos rojos primero:</strong> Los cursos con barra roja (menos del 40%) necesitan atenci√≥n inmediata</li>
                            <li><strong>Coordina con directores de curso:</strong> Comparte el avance con los directores de cada curso para que motiven a sus estudiantes</li>
                            <li><strong>Establece metas:</strong> Define un porcentaje m√≠nimo de participaci√≥n (ej: 80%) y comun√≠calo a los coordinadores</li>
                            <li><strong>No cierres el per√≠odo prematuramente:</strong> Espera a que los cursos con barra roja mejoren antes de cerrar, siempre que sea posible dentro del calendario</li>
                            <li><strong>Registra el avance:</strong> Puedes tomar nota del porcentaje global cada d√≠a para ver la velocidad de avance y estimar cu√°ndo alcanzar√°s la meta</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="step-card">
                        <h5>¬øEl monitoreo se actualiza en tiempo real autom√°ticamente?</h5>
                        <p>No. Los datos se cargan cuando abres la p√°gina y se actualizan cuando haces clic en el bot√≥n "Actualizar". No hay actualizaci√≥n autom√°tica por intervalos.</p>

                        <h5 class="mt-3">¬øPuedo ver el monitoreo de un per√≠odo cerrado?</h5>
                        <p>No. La p√°gina de monitoreo solo muestra datos del per√≠odo abierto. Para ver datos de per√≠odos cerrados, usa la p√°gina de Resultados que permite seleccionar cualquier per√≠odo.</p>

                        <h5 class="mt-3">¬øQu√© diferencia hay entre "completadas" y "en progreso"?</h5>
                        <p>"Completadas" son evaluaciones que el estudiante termin√≥ y envi√≥ exitosamente. "En progreso" son sesiones que se iniciaron pero no se completaron, ya sea porque el estudiante abandon√≥, porque su tiempo de sesi√≥n expir√≥, o porque a√∫n est√° evaluando en ese momento.</p>

                        <h5 class="mt-3">¬øPuedo saber qu√© estudiantes espec√≠ficos no han evaluado?</h5>
                        <p>La p√°gina de monitoreo no muestra nombres de estudiantes individuales, solo conteos por curso. Para an√°lisis m√°s detallados, consulta la p√°gina de Resultados (pesta√±a Estudiantes, disponible solo para directivos).</p>

                        <h5 class="mt-3">¬øQu√© significa "sin iniciar"?</h5>
                        <p>Son estudiantes que est√°n matriculados en el curso pero que no han ingresado al sistema de evaluaci√≥n en absoluto. No tienen ninguna sesi√≥n registrada para este per√≠odo.</p>
                    </div>
                </section>

                <!-- ====== FIN CONTENIDO DEL MANUAL ====== -->

                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>
    </div>

    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>

    <script>
        let currentUser = null;

        const PAGE_CONFIG = {
            moduleName: 'Evaluaci√≥n Docente',
            modulePath: 'teacher-eval',
            pageTitle: 'Monitoreo',
            pagePath: 'monitor.html',
            moduleDescription: 'Seguimiento en tiempo real del avance de evaluaciones docentes'
        };

        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            try {
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
                console.log('‚úÖ P√°gina de manual lista');
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
            }
        });
    </script>
</body>
</html>
