<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="page-version" content="26.02.28.20.30">
    <title>Manual - Evaluaci√≥n Docente - √çndice del M√≥dulo - SchoolNet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: flex; justify-content: center;
            align-items: center; z-index: 9999;
        }
        .loading-overlay.hidden { display: none; }
        .loading-content {
            background: white; padding: 2rem; border-radius: 8px; text-align: center;
        }
        .spinner {
            border: 3px solid #f3f3f3; border-top: 3px solid #007bff;
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: 0 auto 1rem;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0; margin-bottom: 2rem;
        }
        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }
        .manual-header .subtitle { color: #6c757d; font-size: 0.95rem; }

        .info-card {
            background: white; border: 1px solid #dee2e6;
            border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;
        }
        .bug-report-card {
            background: var(--system-secondary-color, #667eea);
            color: white; border-radius: 12px;
            padding: 2rem; margin-bottom: 2rem; text-align: center;
        }
        .bug-report-card h5 { color: white; }
        .floating-bug-button {
            position: fixed; bottom: 30px; right: 30px; z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #dc3545) !important;
            border-color: var(--system-primary-color, #dc3545) !important;
        }
        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4); opacity: 0.9;
        }
        .icon-large { font-size: 2.5rem; margin-bottom: 0.5rem; }

        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem; margin-top: 2rem; margin-bottom: 1rem;
        }
        .step-card {
            background: white; border: 1px solid #e9ecef;
            border-radius: 8px; padding: 1.25rem; margin-bottom: 1.25rem;
        }
        .step-number {
            display: inline-flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--system-primary-color, #1B365D);
            color: white; font-weight: 700; margin-right: 0.75rem;
        }
        .feature-list { list-style: none; padding-left: 0; }
        .feature-list li {
            padding: 0.5rem 0; border-bottom: 1px solid #f1f5f9;
        }
        .feature-list li:last-child { border-bottom: none; }
        .feature-list li::before {
            content: '‚úì'; color: #10b981; font-weight: 700; margin-right: 0.5rem;
        }
        .info-box {
            background: #e8f4fd; border-left: 4px solid #0ea5e9;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .success-box {
            background: #ecfdf5; border-left: 4px solid #10b981;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .warning-box {
            background: #fffbeb; border-left: 4px solid #f59e0b;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }

        .function-card {
            background: white; border: 1px solid #e9ecef;
            border-radius: 8px; padding: 1rem; margin-bottom: 0.75rem;
            transition: background 0.2s;
        }
        .function-card:hover { background: #f8f9fa; }
    </style>
</head>

<body>
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <div class="container-fluid">

        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1><i class="bi bi-book me-2"></i>Manual: Evaluaci√≥n Docente</h1>
                        <p class="subtitle mb-0">√çndice del M√≥dulo ‚Äî Vista general de funciones y m√©tricas</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/teacher-eval/index.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-8 mx-auto">

                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Evaluaci√≥n Docente</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">√çndice del M√≥dulo</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ====== CONTENIDO DEL MANUAL ====== -->

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© es el M√≥dulo de Evaluaci√≥n Docente?
                    </h2>

                    <div class="step-card">
                        <p class="lead">
                            El m√≥dulo de <strong>Evaluaci√≥n Docente</strong> permite a la instituci√≥n aplicar encuestas de evaluaci√≥n a los profesores, donde los estudiantes califican a sus docentes de forma <strong>an√≥nima y segura</strong>.
                        </p>
                        <p>
                            Desde esta p√°gina de inicio puedes acceder a todas las funciones del m√≥dulo: dise√±ar los formularios de evaluaci√≥n, gestionar los per√≠odos en que se aplican, monitorear el avance en tiempo real, y consultar los resultados con gr√°ficos y evoluci√≥n hist√≥rica.
                        </p>
                        <p>
                            Tambi√©n ver√°s un resumen con las <strong>m√©tricas principales</strong> del m√≥dulo que te permiten saber de un vistazo el estado actual de la evaluaci√≥n.
                        </p>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas principales
                    </h2>

                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>M√©tricas en tiempo real:</strong> Cu√°ntos formularios existen, cu√°ntos per√≠odos hay, si hay un per√≠odo abierto y cu√°ntas respuestas se han recibido</li>
                            <li><strong>Acceso r√°pido a funciones:</strong> Desde aqu√≠ puedes ir directamente a cualquier funci√≥n del m√≥dulo</li>
                            <li><strong>Control de permisos:</strong> Solo ver√°s las funciones para las que tienes autorizaci√≥n</li>
                            <li><strong>Dos grupos de funciones:</strong> Gesti√≥n (configurar y administrar) y Seguimiento (monitorear y consultar resultados)</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>

                    <div class="step-card">
                        <h5>Requisitos previos:</h5>
                        <ul>
                            <li>Tener acceso al sistema SchoolNet con un usuario activo</li>
                            <li>Contar con al menos uno de los permisos del m√≥dulo de Evaluaci√≥n Docente asignados a tu rol</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                            Si no puedes ver el m√≥dulo de Evaluaci√≥n Docente en el Dashboard, es posible que tu rol no tenga permisos asignados para este m√≥dulo. Contacta al administrador del sistema.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-grid me-2"></i>
                        Las m√©tricas del m√≥dulo
                    </h2>

                    <div class="step-card">
                        <p>Al ingresar al m√≥dulo ver√°s cuatro tarjetas de resumen en la parte superior:</p>

                        <div class="function-card">
                            <strong><i class="bi bi-file-earmark-text me-2 text-primary"></i>Formularios</strong>
                            <p class="mb-0 small text-muted">Cantidad total de formularios de evaluaci√≥n que se han creado en el sistema.</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-calendar-check me-2 text-success"></i>Per√≠odos</strong>
                            <p class="mb-0 small text-muted">Cantidad total de per√≠odos de evaluaci√≥n creados (abiertos y cerrados).</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-unlock me-2 text-warning"></i>Per√≠odo Abierto</strong>
                            <p class="mb-0 small text-muted">Indica si actualmente hay un per√≠odo abierto donde los estudiantes pueden evaluar. Mostrar√° "S√≠" o "No".</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-chat-square-text me-2 text-info"></i>Respuestas</strong>
                            <p class="mb-0 small text-muted">Total de evaluaciones completadas por estudiantes en todos los per√≠odos.</p>
                        </div>

                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo:</strong>
                            Las m√©tricas se actualizan cada vez que abres la p√°gina. Si necesitas datos actualizados, simplemente recarga la p√°gina.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Funciones disponibles
                    </h2>

                    <div class="step-card">
                        <h5>Grupo 1: Gesti√≥n</h5>
                        <p>Funciones para configurar y administrar las evaluaciones:</p>

                        <div class="function-card">
                            <strong><i class="bi bi-file-earmark-text me-2 text-primary"></i>Formularios de Evaluaci√≥n</strong>
                            <p class="mb-0 small text-muted">Crea y edita los formularios con sus secciones y preguntas. Cada formulario se asocia a una secci√≥n acad√©mica (Preescolar, Primaria, etc.). Las preguntas pueden ser tipo escala (con opciones num√©ricas) o de texto abierto para comentarios.</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-calendar-check me-2 text-primary"></i>Per√≠odos de Evaluaci√≥n</strong>
                            <p class="mb-0 small text-muted">Crea per√≠odos de evaluaci√≥n, as√≠gnales formularios y controla cu√°ndo se abren y cierran. Solo puede haber un per√≠odo abierto a la vez. Al abrirlo, los estudiantes podr√°n comenzar a evaluar.</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-gear me-2 text-primary"></i>Configuraci√≥n</strong>
                            <p class="mb-0 small text-muted">Ajusta los par√°metros generales: modo de evaluaci√≥n (todos los profesores o un rango), textos de bienvenida e instrucciones que ver√°n los estudiantes, y tiempo m√°ximo de sesi√≥n.</p>
                        </div>
                    </div>

                    <div class="step-card">
                        <h5>Grupo 2: Seguimiento</h5>
                        <p>Funciones para monitorear y consultar resultados:</p>

                        <div class="function-card">
                            <strong><i class="bi bi-speedometer2 me-2 text-success"></i>Monitoreo</strong>
                            <p class="mb-0 small text-muted">Visualiza en tiempo real el avance de evaluaciones del per√≠odo abierto. Ve cu√°ntos estudiantes han respondido por cada curso, con barras de progreso coloreadas.</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-bar-chart-line me-2 text-success"></i>Resultados</strong>
                            <p class="mb-0 small text-muted">Reportes completos para directivos. Compara per√≠odos, ve promedios por profesor, secci√≥n del instrumento, curso, grado e incluso por estudiante. Incluye gr√°ficos de evoluci√≥n y tendencias.</p>
                        </div>

                        <div class="function-card">
                            <strong><i class="bi bi-person-lines-fill me-2 text-success"></i>Mis Resultados</strong>
                            <p class="mb-0 small text-muted">Cada profesor puede ver sus propios resultados de evaluaci√≥n. Incluye promedios, evoluci√≥n entre per√≠odos, comentarios an√≥nimos y desglose por curso. Los resultados son siempre an√≥nimos (no se identifica qu√© estudiante respondi√≥).</p>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante:</strong>
                            Solo ver√°s las funciones para las que tu rol tiene permiso asignado. Si necesitas acceso a una funci√≥n que no aparece, solic√≠talo al administrador.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Flujo de trabajo recomendado
                    </h2>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Configurar el m√≥dulo
                        </h4>
                        <p>Ve a <strong>Configuraci√≥n</strong> y define el modo de evaluaci√≥n, los textos que ver√°n los estudiantes y el tiempo m√°ximo de sesi√≥n.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Crear los formularios
                        </h4>
                        <p>Ve a <strong>Formularios de Evaluaci√≥n</strong> y crea un formulario para cada secci√≥n acad√©mica. Agrega las secciones del instrumento con sus preguntas.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Crear y abrir un per√≠odo
                        </h4>
                        <p>Ve a <strong>Per√≠odos de Evaluaci√≥n</strong>, crea un nuevo per√≠odo, as√≠gnale los formularios correspondientes y √°brelo cuando sea el momento.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Monitorear el avance
                        </h4>
                        <p>Mientras el per√≠odo est√° abierto, ve a <strong>Monitoreo</strong> para ver en tiempo real cu√°ntos estudiantes han respondido por curso.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">5</span>
                            Cerrar el per√≠odo y consultar resultados
                        </h4>
                        <p>Cuando termine la evaluaci√≥n, cierra el per√≠odo y ve a <strong>Resultados</strong> para analizar toda la informaci√≥n con gr√°ficos, comparativos y evoluci√≥n.</p>

                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo:</strong>
                            Puedes consultar resultados incluso mientras el per√≠odo sigue abierto. No es necesario cerrarlo primero.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Soluci√≥n de problemas comunes
                    </h2>

                    <div class="step-card">
                        <h5>No veo el m√≥dulo en el Dashboard</h5>
                        <ul>
                            <li>Tu rol no tiene ning√∫n permiso del m√≥dulo de Evaluaci√≥n Docente asignado</li>
                            <li>Contacta al administrador para que te asigne los permisos necesarios</li>
                        </ul>

                        <h5 class="mt-3">Las m√©tricas muestran "0" en todo</h5>
                        <ul>
                            <li>Es normal si el m√≥dulo es nuevo y a√∫n no se han creado formularios ni per√≠odos</li>
                            <li>Sigue el flujo de trabajo recomendado (paso 1 al 5) para comenzar</li>
                        </ul>

                        <h5 class="mt-3">No puedo acceder a una funci√≥n espec√≠fica</h5>
                        <ul>
                            <li>Cada funci√≥n requiere un permiso espec√≠fico</li>
                            <li>Si la tarjeta de la funci√≥n no aparece, tu rol no tiene ese permiso</li>
                            <li>Solicita al administrador que te asigne el permiso correspondiente</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="step-card">
                        <h5>¬øLos estudiantes necesitan cuenta en SchoolNet para evaluar?</h5>
                        <p>No. La evaluaci√≥n usa un sistema independiente donde el estudiante ingresa su correo institucional y recibe un c√≥digo de verificaci√≥n. No necesita usuario ni contrase√±a del sistema.</p>

                        <h5 class="mt-3">¬øLas evaluaciones son realmente an√≥nimas?</h5>
                        <p>Para los profesores, s√≠. Cuando un profesor consulta "Mis Resultados", solo ve promedios y comentarios sin identificar qui√©n respondi√≥. Los directivos con permiso de "Resultados" s√≠ pueden ver el detalle por estudiante cuando sea necesario.</p>

                        <h5 class="mt-3">¬øPuedo tener varios per√≠odos abiertos al mismo tiempo?</h5>
                        <p>No. El sistema solo permite un per√≠odo abierto a la vez. Si intentas abrir un segundo, te preguntar√° si deseas cerrar el actual primero.</p>

                        <h5 class="mt-3">¬øQu√© pasa si un estudiante no completa la evaluaci√≥n?</h5>
                        <p>Solo se guardan las evaluaciones que el estudiante termina y env√≠a. Si abandona la sesi√≥n o se agota el tiempo, no queda registro parcial.</p>

                        <h5 class="mt-3">¬øPuedo comparar resultados entre diferentes per√≠odos?</h5>
                        <p>S√≠. Tanto en "Resultados" como en "Mis Resultados" puedes seleccionar varios per√≠odos simult√°neamente para ver la evoluci√≥n, tendencias y comparativos con gr√°ficos.</p>
                    </div>
                </section>

                <!-- ====== FIN CONTENIDO DEL MANUAL ====== -->

                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>
    </div>

    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>

    <script>
        let currentUser = null;

        const PAGE_CONFIG = {
            moduleName: 'Evaluaci√≥n Docente',
            modulePath: 'teacher-eval',
            pageTitle: '√çndice del M√≥dulo',
            pagePath: 'index.html',
            moduleDescription: 'Vista general de funciones y m√©tricas del m√≥dulo de evaluaci√≥n docente'
        };

        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            try {
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
                console.log('‚úÖ P√°gina de manual lista');
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
            }
        });
    </script>
</body>
</html>
