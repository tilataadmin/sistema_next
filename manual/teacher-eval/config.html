<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="page-version" content="26.02.28.20.35">
    <title>Manual - Evaluaci√≥n Docente - Configuraci√≥n - SchoolNet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: flex; justify-content: center;
            align-items: center; z-index: 9999;
        }
        .loading-overlay.hidden { display: none; }
        .loading-content {
            background: white; padding: 2rem; border-radius: 8px; text-align: center;
        }
        .spinner {
            border: 3px solid #f3f3f3; border-top: 3px solid #007bff;
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: 0 auto 1rem;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0; margin-bottom: 2rem;
        }
        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }
        .manual-header .subtitle { color: #6c757d; font-size: 0.95rem; }

        .info-card {
            background: white; border: 1px solid #dee2e6;
            border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;
        }
        .bug-report-card {
            background: var(--system-secondary-color, #667eea);
            color: white; border-radius: 12px;
            padding: 2rem; margin-bottom: 2rem; text-align: center;
        }
        .bug-report-card h5 { color: white; }
        .floating-bug-button {
            position: fixed; bottom: 30px; right: 30px; z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #dc3545) !important;
            border-color: var(--system-primary-color, #dc3545) !important;
        }
        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4); opacity: 0.9;
        }
        .icon-large { font-size: 2.5rem; margin-bottom: 0.5rem; }

        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem; margin-top: 2rem; margin-bottom: 1rem;
        }
        .step-card {
            background: white; border: 1px solid #e9ecef;
            border-radius: 8px; padding: 1.25rem; margin-bottom: 1.25rem;
        }
        .step-number {
            display: inline-flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--system-primary-color, #1B365D);
            color: white; font-weight: 700; margin-right: 0.75rem;
        }
        .feature-list { list-style: none; padding-left: 0; }
        .feature-list li {
            padding: 0.5rem 0; border-bottom: 1px solid #f1f5f9;
        }
        .feature-list li:last-child { border-bottom: none; }
        .feature-list li::before {
            content: '‚úì'; color: #10b981; font-weight: 700; margin-right: 0.5rem;
        }
        .info-box {
            background: #e8f4fd; border-left: 4px solid #0ea5e9;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .success-box {
            background: #ecfdf5; border-left: 4px solid #10b981;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .warning-box {
            background: #fffbeb; border-left: 4px solid #f59e0b;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }
        .danger-box {
            background: #fef2f2; border-left: 4px solid #ef4444;
            padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;
        }

        .field-card {
            background: #f8f9fa; border: 1px solid #e9ecef;
            border-radius: 8px; padding: 1rem; margin-bottom: 0.75rem;
        }
    </style>
</head>

<body>
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <div class="container-fluid">

        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1><i class="bi bi-book me-2"></i>Manual: Evaluaci√≥n Docente</h1>
                        <p class="subtitle mb-0">Configuraci√≥n ‚Äî Par√°metros generales del m√≥dulo</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/teacher-eval/config.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-8 mx-auto">

                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Evaluaci√≥n Docente</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Configuraci√≥n</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ====== CONTENIDO DEL MANUAL ====== -->

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© es la Configuraci√≥n de Evaluaci√≥n Docente?
                    </h2>

                    <div class="step-card">
                        <p class="lead">
                            Esta p√°gina permite definir los <strong>par√°metros generales</strong> que rigen c√≥mo funciona la evaluaci√≥n docente en toda la instituci√≥n.
                        </p>
                        <p>
                            Aqu√≠ puedes decidir si los estudiantes eval√∫an a todos sus profesores o solo a algunos, personalizar los textos que ver√°n al momento de evaluar, y establecer el tiempo m√°ximo que tienen para completar su sesi√≥n de evaluaci√≥n.
                        </p>
                        <p>
                            Es recomendable configurar estos par√°metros <strong>antes de crear formularios y abrir per√≠odos</strong>, ya que afectan directamente la experiencia del estudiante.
                        </p>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas principales
                    </h2>

                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Configuraci√≥n centralizada:</strong> Todos los par√°metros del m√≥dulo en un solo lugar</li>
                            <li><strong>Dos modos de evaluaci√≥n:</strong> Evaluar a todos los profesores o definir un rango m√≠nimo y m√°ximo</li>
                            <li><strong>Textos personalizables:</strong> Bienvenida, instrucciones y agradecimiento que ve el estudiante</li>
                            <li><strong>Tiempo de sesi√≥n configurable:</strong> Define cu√°ntos minutos tiene el estudiante para completar su evaluaci√≥n</li>
                            <li><strong>Se guarda una sola vez:</strong> La configuraci√≥n se crea al guardar por primera vez y luego se actualiza</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>

                    <div class="step-card">
                        <h5>Requisitos previos:</h5>
                        <ul>
                            <li>Tener el permiso de <strong>Configuraci√≥n de evaluaci√≥n</strong> asignado a tu rol</li>
                            <li>Tener clara la pol√≠tica institucional sobre cu√°ntos profesores deben evaluar los estudiantes</li>
                        </ul>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante:</strong>
                            Los cambios en la configuraci√≥n aplican inmediatamente. Si hay un per√≠odo abierto, los estudiantes que ingresen despu√©s del cambio ver√°n la nueva configuraci√≥n. Los que ya estaban en sesi√≥n no se ver√°n afectados.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-sliders me-2"></i>
                        Los campos de configuraci√≥n
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Modo de evaluaci√≥n</h5>

                        <div class="field-card">
                            <strong><i class="bi bi-toggles me-2 text-primary"></i>¬øA cu√°ntos profesores eval√∫a cada estudiante?</strong>
                            <p class="mt-2 mb-0">Tienes dos opciones:</p>
                            <ul class="mt-2">
                                <li><strong>Todos los profesores:</strong> El estudiante debe evaluar a todos los profesores que le dictan clase. No puede finalizar hasta completar todas las evaluaciones.</li>
                                <li><strong>Rango m√≠nimo y m√°ximo:</strong> El estudiante puede elegir evaluar solo a algunos profesores, dentro de un rango que t√∫ defines (por ejemplo, m√≠nimo 3 y m√°ximo 8).</li>
                            </ul>
                        </div>

                        <div class="field-card">
                            <strong><i class="bi bi-arrow-down-up me-2 text-primary"></i>M√≠nimo y m√°ximo de profesores</strong>
                            <p class="mt-2 mb-0">Estos campos solo aparecen cuando seleccionas el modo "Rango m√≠nimo y m√°ximo". Definen cu√°ntos profesores como m√≠nimo y como m√°ximo debe evaluar cada estudiante.</p>

                            <div class="success-box mt-2">
                                <strong><i class="bi bi-lightbulb me-2"></i>Ejemplo:</strong>
                                Si un estudiante tiene 10 profesores y configuras m√≠nimo 4 y m√°ximo 7, el estudiante podr√° elegir evaluar entre 4 y 7 de sus 10 profesores.
                            </div>
                        </div>
                    </div>

                    <div class="step-card">
                        <h5 class="mb-3">Textos personalizables</h5>

                        <div class="field-card">
                            <strong><i class="bi bi-chat-heart me-2 text-success"></i>Texto de bienvenida</strong>
                            <p class="mt-2 mb-0">Es lo primero que ve el estudiante al entrar a la evaluaci√≥n. Usa este espacio para motivar al estudiante y explicarle brevemente el prop√≥sito de la evaluaci√≥n.</p>

                            <div class="success-box mt-2">
                                <strong><i class="bi bi-lightbulb me-2"></i>Ejemplo:</strong>
                                "Tu opini√≥n es muy importante para mejorar la calidad educativa de nuestra instituci√≥n. Tus respuestas son completamente an√≥nimas."
                            </div>
                        </div>

                        <div class="field-card">
                            <strong><i class="bi bi-journal-text me-2 text-success"></i>Texto de instrucciones</strong>
                            <p class="mt-2 mb-0">Se muestra antes de que el estudiante comience a evaluar. Aqu√≠ puedes dar indicaciones sobre c√≥mo responder las preguntas.</p>

                            <div class="success-box mt-2">
                                <strong><i class="bi bi-lightbulb me-2"></i>Ejemplo:</strong>
                                "Eval√∫a a cada profesor con sinceridad. Lee cada pregunta con calma y responde seg√∫n tu experiencia en clase. No hay respuestas correctas o incorrectas."
                            </div>
                        </div>

                        <div class="field-card">
                            <strong><i class="bi bi-emoji-smile me-2 text-success"></i>Texto de agradecimiento</strong>
                            <p class="mt-2 mb-0">Se muestra al estudiante cuando termina de evaluar a todos sus profesores. Sirve para agradecer su participaci√≥n.</p>

                            <div class="success-box mt-2">
                                <strong><i class="bi bi-lightbulb me-2"></i>Ejemplo:</strong>
                                "¬°Gracias por participar! Tus respuestas ayudar√°n a que la experiencia educativa sea cada vez mejor para todos."
                            </div>
                        </div>
                    </div>

                    <div class="step-card">
                        <h5 class="mb-3">Tiempo de sesi√≥n</h5>

                        <div class="field-card">
                            <strong><i class="bi bi-clock me-2 text-warning"></i>Tiempo m√°ximo de sesi√≥n (minutos)</strong>
                            <p class="mt-2 mb-0">Define cu√°ntos minutos tiene el estudiante para completar toda su evaluaci√≥n desde que ingresa. El valor puede ir de 10 a 180 minutos (3 horas).</p>
                            <p class="mt-2 mb-0">El estudiante ver√° un reloj con la cuenta regresiva. Si se agota el tiempo, su sesi√≥n se cierra autom√°ticamente y deber√° ingresar de nuevo.</p>

                            <div class="info-box mt-2">
                                <strong><i class="bi bi-info-circle me-2"></i>Recomendaci√≥n:</strong>
                                Un tiempo de 60 minutos suele ser suficiente para evaluar entre 5 y 10 profesores. Si los formularios son extensos o los estudiantes tienen muchos profesores, considera aumentar a 90 o 120 minutos.
                            </div>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Gu√≠a paso a paso
                    </h2>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Acceder a la configuraci√≥n
                        </h4>
                        <p>Desde el √≠ndice del m√≥dulo de Evaluaci√≥n Docente, haz clic en la tarjeta <strong>"Configuraci√≥n"</strong> del grupo de Gesti√≥n.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Seleccionar el modo de evaluaci√≥n
                        </h4>
                        <p>Elige si los estudiantes evaluar√°n a <strong>todos</strong> sus profesores o si podr√°n elegir dentro de un <strong>rango m√≠nimo y m√°ximo</strong>.</p>
                        <p>Si eliges "Rango m√≠nimo y m√°ximo", aparecer√°n dos campos adicionales donde debes indicar cu√°ntos profesores como m√≠nimo y como m√°ximo.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Personalizar los textos
                        </h4>
                        <p>Escribe los textos de <strong>bienvenida</strong>, <strong>instrucciones</strong> y <strong>agradecimiento</strong> que ver√°n los estudiantes. Si los dejas vac√≠os, el sistema usar√° textos gen√©ricos.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Definir el tiempo de sesi√≥n
                        </h4>
                        <p>Establece cu√°ntos minutos tendr√° cada estudiante para completar todas sus evaluaciones. El valor debe estar entre 10 y 180 minutos.</p>
                    </div>

                    <div class="step-card">
                        <h4>
                            <span class="step-number">5</span>
                            Guardar la configuraci√≥n
                        </h4>
                        <p>Haz clic en el bot√≥n <strong>"Guardar Configuraci√≥n"</strong>. Ver√°s un mensaje de confirmaci√≥n si todo se guard√≥ correctamente.</p>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                            La primera vez que guardas se crea la configuraci√≥n. Las veces siguientes simplemente se actualiza. No se crean registros duplicados.
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Soluci√≥n de problemas comunes
                    </h2>

                    <div class="step-card">
                        <h5>Los campos de m√≠nimo y m√°ximo no aparecen</h5>
                        <ul>
                            <li>Estos campos solo son visibles cuando seleccionas el modo "Rango m√≠nimo y m√°ximo"</li>
                            <li>Si eliges "Todos los profesores", no se necesitan y el sistema los oculta</li>
                        </ul>

                        <h5 class="mt-3">No puedo guardar la configuraci√≥n</h5>
                        <ul>
                            <li>Verifica que el tiempo de sesi√≥n est√© entre 10 y 180 minutos</li>
                            <li>Si elegiste modo con rango, verifica que el m√≠nimo sea menor o igual al m√°ximo</li>
                            <li>Aseg√∫rate de tener conexi√≥n a internet estable</li>
                        </ul>

                        <h5 class="mt-3">Cambi√© la configuraci√≥n pero los estudiantes ven lo anterior</h5>
                        <ul>
                            <li>Los estudiantes que ya ten√≠an una sesi√≥n abierta antes del cambio ver√°n la configuraci√≥n con la que iniciaron</li>
                            <li>Los nuevos estudiantes que ingresen ver√°n los cambios inmediatamente</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas pr√°cticas
                    </h2>

                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Configura antes de abrir per√≠odos:</strong> Define los textos y el modo de evaluaci√≥n antes de que los estudiantes empiecen a evaluar</li>
                            <li><strong>Textos claros y motivadores:</strong> Los estudiantes responden mejor cuando entienden el prop√≥sito y se sienten motivados</li>
                            <li><strong>Tiempo generoso:</strong> Es mejor dar m√°s tiempo del necesario que generar estr√©s por tiempo insuficiente</li>
                            <li><strong>Menciona el anonimato:</strong> En el texto de bienvenida, recuerda a los estudiantes que sus respuestas son an√≥nimas para generar confianza</li>
                            <li><strong>Revisa peri√≥dicamente:</strong> Al inicio de cada a√±o escolar, revisa que los textos sigan siendo apropiados</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="step-card">
                        <h5>¬øPuedo cambiar la configuraci√≥n mientras hay un per√≠odo abierto?</h5>
                        <p>S√≠, puedes cambiarla en cualquier momento. Los cambios aplican para los nuevos estudiantes que ingresen despu√©s de guardar.</p>

                        <h5 class="mt-3">¬øQu√© pasa si no configuro nada y abro un per√≠odo?</h5>
                        <p>El sistema usar√° valores por defecto: modo "Todos los profesores", textos gen√©ricos y un tiempo de sesi√≥n de 60 minutos.</p>

                        <h5 class="mt-3">¬øPuedo usar el modo "Rango" en un per√≠odo y "Todos" en otro?</h5>
                        <p>S√≠. La configuraci√≥n es general y puedes cambiarla entre per√≠odos. Solo recuerda hacerlo antes de abrir el nuevo per√≠odo.</p>

                        <h5 class="mt-3">¬øHay un l√≠mite de caracteres para los textos?</h5>
                        <p>No hay un l√≠mite estricto, pero se recomienda mantener los textos breves y concisos. Los estudiantes no suelen leer textos muy largos.</p>
                    </div>
                </section>

                <!-- ====== FIN CONTENIDO DEL MANUAL ====== -->

                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>
    </div>

    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>

    <script>
        let currentUser = null;

        const PAGE_CONFIG = {
            moduleName: 'Evaluaci√≥n Docente',
            modulePath: 'teacher-eval',
            pageTitle: 'Configuraci√≥n',
            pagePath: 'config.html',
            moduleDescription: 'Par√°metros generales del m√≥dulo de evaluaci√≥n docente'
        };

        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            try {
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
                console.log('‚úÖ P√°gina de manual lista');
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
            }
        });
    </script>
</body>
</html>
