<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="page-version" content="25.11.09.11.45">
    <title>Manual - Talento Humano - Gestionar Ausencias - SchoolNet</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #1e3a8a;
            --secondary-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: #1e293b;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            padding: 2rem 1rem;
        }

        .header-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-section h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header-section p {
            font-size: 1.125rem;
            opacity: 0.95;
            margin-bottom: 0;
        }

        .section-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
        }

        .section-card h2 {
            color: var(--primary-color);
            font-size: 1.75rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--secondary-color);
        }

        .section-card h3 {
            color: var(--secondary-color);
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .info-box {
            background-color: #dbeafe;
            border-left: 4px solid var(--info-color);
            padding: 1rem 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .success-box {
            background-color: #d1fae5;
            border-left: 4px solid var(--success-color);
            padding: 1rem 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .warning-box {
            background-color: #fef3c7;
            border-left: 4px solid var(--warning-color);
            padding: 1rem 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .danger-box {
            background-color: #fee2e2;
            border-left: 4px solid var(--danger-color);
            padding: 1rem 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .step-card {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
            margin: 1rem 0;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            font-weight: 600;
            margin-right: 0.75rem;
        }

        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.75rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
            font-size: 1.25rem;
        }

        .btn-return {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .bug-report-card {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border: 2px solid var(--danger-color);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            margin-top: 3rem;
        }

        .floating-bug-button {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            }
            50% {
                box-shadow: 0 6px 20px rgba(239, 68, 68, 0.6);
            }
        }

        .table-responsive {
            margin-top: 1rem;
        }

        .table {
            margin-bottom: 0;
        }

        .table th {
            background-color: var(--light-bg);
            color: var(--primary-color);
            font-weight: 600;
        }

        ol, ul {
            margin: 1rem 0;
        }

        ol li, ul li {
            margin: 0.5rem 0;
        }

        @media (max-width: 768px) {
            .header-section h1 {
                font-size: 1.75rem;
            }

            .container {
                padding: 1rem 0.5rem;
            }

            .floating-bug-button {
                bottom: 1rem;
                right: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        
        <!-- Botón Volver -->
        <a href="../../modules/hr/manage-absences.html" class="btn btn-outline-primary btn-return">
            <i class="bi bi-arrow-left"></i>
            <span>Volver al Módulo</span>
        </a>

        <!-- Encabezado -->
        <div class="header-section">
            <h1>
                <i class="bi bi-clipboard-check me-3"></i>
                Manual: Gestionar Ausencias
            </h1>
            <p>Módulo de Talento Humano - Administración Completa de Ausencias</p>
        </div>

        <!-- ¿Qué es? -->
        <div class="section-card">
            <h2>
                <i class="bi bi-info-circle me-2"></i>
                ¿Qué es esta función?
            </h2>
            <p>
                La función <strong>"Gestionar Ausencias"</strong> es la herramienta administrativa más completa 
                del módulo de Talento Humano para el manejo de ausencias. Esta función está diseñada 
                exclusivamente para el personal de Recursos Humanos y permite una gestión integral de todas 
                las solicitudes de ausencia del personal.
            </p>
            <p>
                A diferencia de las funciones de solicitar y autorizar ausencias (que están limitadas a 
                trabajadores específicos y sus autorizadores), esta función te da acceso completo a TODAS 
                las solicitudes del sistema, sin importar quién las hizo o su estado. Puedes buscar, filtrar, 
                editar, agregar documentos y crear nuevas solicitudes en nombre de cualquier trabajador.
            </p>

            <div class="danger-box">
                <strong><i class="bi bi-shield-exclamation me-2"></i>ACCESO RESTRINGIDO:</strong>
                Esta función es exclusiva para personal de Talento Humano con permisos administrativos 
                especiales. Solo personas con el acceso "Gestionar todas las ausencias" pueden usar esta herramienta.
            </div>
        </div>

        <!-- Características -->
        <div class="section-card">
            <h2>
                <i class="bi bi-star me-2"></i>
                Características Principales
            </h2>
            <ul class="feature-list">
                <li><strong>Vista completa del sistema:</strong> Acceso a todas las solicitudes de ausencia de todos los trabajadores</li>
                <li><strong>Filtros avanzados múltiples:</strong> 11 criterios de filtrado (trabajador, categoría, estado, sección, fechas, división, centro de costo, área, rol, jefe principal)</li>
                <li><strong>Crear solicitudes en nombre de trabajadores:</strong> Capacidad de registrar ausencias para cualquier empleado</li>
                <li><strong>Registro con estado inicial flexible:</strong> Puedes crear solicitudes como "Pendientes" (requieren autorización) o "Aprobadas" (pre-autorizadas)</li>
                <li><strong>Edición completa:</strong> Modifica cualquier aspecto de una solicitud existente (fechas, horarios, categoría, descripción)</li>
                <li><strong>Gestión de archivos:</strong> Agrega documentos de soporte a solicitudes existentes en cualquier momento</li>
                <li><strong>Vista detallada completa:</strong> Acceso a toda la información de cada solicitud incluyendo autorizaciones, archivos y historial de edición</li>
                <li><strong>Notificaciones automáticas:</strong> El sistema envía notificaciones apropiadas según el tipo de acción realizada</li>
                <li><strong>Advertencias de saldo:</strong> Al crear solicitudes, el sistema advierte si el trabajador no tiene saldo suficiente (pero no bloquea)</li>
                <li><strong>Tabla ordenada cronológicamente:</strong> Las solicitudes se muestran de más reciente a más antigua para fácil seguimiento</li>
            </ul>
        </div>

        <!-- Antes de Comenzar -->
        <div class="section-card">
            <h2>
                <i class="bi bi-clipboard-check me-2"></i>
                Antes de Comenzar
            </h2>

            <h3>Requisitos Previos</h3>
            <ol>
                <li><strong>Permisos administrativos:</strong> Debes tener el permiso específico "Gestionar todas las ausencias"</li>
                <li><strong>Rol en Talento Humano:</strong> Generalmente esta función es solo para el equipo de RRHH</li>
                <li><strong>Conocimiento de políticas:</strong> Es fundamental conocer a fondo las políticas institucionales sobre ausencias</li>
                <li><strong>Comprensión del sistema:</strong> Debes entender cómo funcionan las categorías, autorizaciones y saldos</li>
            </ol>

            <h3>Diferencias con Otras Funciones</h3>
            
            <div class="step-card">
                <strong><i class="bi bi-person me-2"></i>Solicitar Ausencias (Trabajadores)</strong>
                <p class="mb-0 mt-2">
                    Los trabajadores solo pueden crear solicitudes para ellos mismos, en tiempo presente/futuro, 
                    y no pueden editar una vez enviadas. No tienen acceso a solicitudes de otros.
                </p>
            </div>

            <div class="step-card">
                <strong><i class="bi bi-check-circle me-2"></i>Autorizar Ausencias (Jefes/Directivos)</strong>
                <p class="mb-0 mt-2">
                    Los autorizadores solo ven solicitudes que requieren específicamente su aprobación. 
                    No pueden editar ni crear solicitudes, solo aprobar o rechazar.
                </p>
            </div>

            <div class="step-card">
                <strong><i class="bi bi-clipboard-check me-2"></i>Gestionar Ausencias (Talento Humano)</strong>
                <p class="mb-0 mt-2">
                    Acceso administrativo completo a TODAS las solicitudes del sistema. Puede crear, editar, 
                    agregar archivos y consultar cualquier solicitud. Tiene poderes especiales como crear 
                    solicitudes pre-aprobadas.
                </p>
            </div>

            <h3>Casos de Uso Típicos</h3>
            <p>Esta función es útil cuando necesitas:</p>
            <ul>
                <li>Registrar una incapacidad médica que un trabajador entregó físicamente</li>
                <li>Corregir errores en solicitudes ya enviadas</li>
                <li>Agregar documentación de soporte que un trabajador no pudo subir</li>
                <li>Buscar y analizar patrones de ausencias en la institución</li>
                <li>Generar reportes sobre ausencias por área, sección o período</li>
                <li>Registrar ausencias retroactivas con justificación válida</li>
                <li>Crear solicitudes pre-aprobadas que no requieren autorización adicional</li>
            </ul>

            <div class="warning-box">
                <strong><i class="bi bi-exclamation-triangle me-2"></i>Responsabilidad Importante:</strong>
                Con gran poder viene gran responsabilidad. Esta función te permite hacer cambios significativos 
                en el sistema. Úsala con cuidado y siempre documenta las razones de cambios importantes. 
                Todas las ediciones quedan registradas con tu identificación de usuario.
            </div>
        </div>

        <!-- Guía Paso a Paso -->
        <div class="section-card">
            <h2>
                <i class="bi bi-list-ol me-2"></i>
                Guía Paso a Paso
            </h2>

            <div class="step-card">
                <h3>
                    <span class="step-number">1</span>
                    Accede a Gestionar Ausencias
                </h3>
                <p>
                    Desde el menú principal o dashboard de SchoolNet:
                </p>
                <ol>
                    <li>Ve al módulo <strong>Talento Humano</strong></li>
                    <li>Haz clic en <strong>Gestionar Ausencias</strong></li>
                    <li>El sistema verificará que tienes los permisos necesarios</li>
                    <li>La página cargará mostrando todas las solicitudes del sistema</li>
                </ol>
                <div class="info-box">
                    <strong><i class="bi bi-info-circle me-2"></i>Primera carga:</strong>
                    La primera vez que accedes, la página puede tardar unos segundos en cargar todas las 
                    solicitudes, especialmente si hay muchos registros en el sistema.
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">2</span>
                    Comprende la Interfaz Principal
                </h3>
                <p>
                    La pantalla se divide en estas secciones clave:
                </p>

                <h4><i class="bi bi-funnel me-2"></i>Panel de Filtros (superior expandible)</h4>
                <p>Contiene 11 criterios de búsqueda:</p>
                <ul>
                    <li><strong>Trabajador:</strong> Busca por nombre (escribe cualquier parte del nombre)</li>
                    <li><strong>Categoría:</strong> Filtra por tipo de ausencia</li>
                    <li><strong>Estado:</strong> Pendiente, Aprobada, Rechazada o Cancelada</li>
                    <li><strong>Sección:</strong> Área académica (Preescolar, Primaria, etc.)</li>
                    <li><strong>Fecha desde/hasta:</strong> Rango de fechas de la ausencia</li>
                    <li><strong>División:</strong> División organizacional del trabajador</li>
                    <li><strong>Centro de Costo:</strong> Centro de costo asignado</li>
                    <li><strong>Área:</strong> Área organizacional</li>
                    <li><strong>Rol:</strong> Rol laboral del trabajador</li>
                    <li><strong>Jefe Principal:</strong> Filtra por supervisor directo</li>
                </ul>

                <h4><i class="bi bi-table me-2"></i>Tabla de Solicitudes</h4>
                <p>Muestra todas las solicitudes con columnas:</p>
                <ul>
                    <li><strong>ID:</strong> Primeros 8 caracteres del identificador único</li>
                    <li><strong>Trabajador:</strong> Nombre del solicitante</li>
                    <li><strong>Categoría:</strong> Tipo de ausencia</li>
                    <li><strong>Fechas:</strong> Período de la ausencia</li>
                    <li><strong>Días y Horas:</strong> Totales calculados</li>
                    <li><strong>Estado:</strong> Badge de color según estado</li>
                    <li><strong>Fecha Solicitud:</strong> Cuándo se creó</li>
                    <li><strong>Acciones:</strong> Botones para ver, editar y agregar archivos</li>
                </ul>

                <h4><i class="bi bi-plus-circle me-2"></i>Botones de Acción</h4>
                <ul>
                    <li><strong>Actualizar:</strong> Recarga todas las solicitudes desde el servidor</li>
                    <li><strong>Nueva Solicitud:</strong> Abre el formulario para crear una solicitud</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">3</span>
                    Usa los Filtros para Buscar
                </h3>
                <p>
                    Los filtros te ayudan a encontrar rápidamente solicitudes específicas:
                </p>

                <h4>Para buscar por nombre:</h4>
                <ol>
                    <li>En el campo "Trabajador", escribe el nombre o apellido</li>
                    <li>No necesitas el nombre completo</li>
                    <li>El filtro es instantáneo mientras escribes</li>
                </ol>

                <h4>Para buscar por múltiples criterios:</h4>
                <ol>
                    <li>Selecciona o completa todos los filtros que necesites</li>
                    <li>Los filtros se combinan (deben cumplirse TODOS los seleccionados)</li>
                    <li>Haz clic en <strong>"Aplicar Filtros"</strong></li>
                    <li>Verás un mensaje con cuántas solicitudes se encontraron</li>
                </ol>

                <h4>Para limpiar filtros:</h4>
                <ul>
                    <li>Haz clic en <strong>"Limpiar Filtros"</strong></li>
                    <li>Esto restaura la vista completa de todas las solicitudes</li>
                </ul>

                <div class="success-box">
                    <strong><i class="bi bi-lightbulb me-2"></i>Ejemplo de uso:</strong>
                    Si quieres ver todas las incapacidades médicas de la sección Primaria en noviembre, 
                    selecciona: Categoría = "Incapacidad Médica", Sección = "Primaria", Fecha desde = "01/11/2024", 
                    Fecha hasta = "30/11/2024", y haz clic en "Aplicar Filtros".
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">4</span>
                    Ver Detalle Completo de una Solicitud
                </h3>
                <p>
                    Para revisar toda la información de una solicitud:
                </p>
                <ol>
                    <li>En la tabla, identifica la solicitud que quieres revisar</li>
                    <li>Haz clic en el botón azul con el icono del ojo <i class="bi bi-eye"></i></li>
                    <li>Se abrirá una ventana emergente con el detalle completo</li>
                </ol>

                <h4>Información que verás:</h4>
                <ul>
                    <li><strong>Datos del trabajador:</strong> Nombre completo, email</li>
                    <li><strong>Detalles de la ausencia:</strong> Categoría, tipo (día completo o parcial), estado</li>
                    <li><strong>Fechas y horarios:</strong> Período completo de la ausencia</li>
                    <li><strong>Totales:</strong> Días y horas calculados</li>
                    <li><strong>Reemplazo:</strong> Si aplica, quién cubre al trabajador</li>
                    <li><strong>Descripción:</strong> Motivo proporcionado por el solicitante</li>
                    <li><strong>Timeline de autorizaciones:</strong> Lista de todos los autorizadores, sus decisiones y comentarios</li>
                    <li><strong>Archivos adjuntos:</strong> Lista de documentos con opciones para ver o descargar</li>
                    <li><strong>Historial de edición:</strong> Si fue editada, quién y cuándo</li>
                </ul>

                <div class="info-box">
                    <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                    Esta vista es de solo lectura. Para hacer cambios, usa los botones de "Editar" o 
                    "Agregar archivos" en la tabla principal.
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">5</span>
                    Editar una Solicitud Existente
                </h3>
                <p>
                    Cuando necesites corregir o modificar una solicitud:
                </p>
                <ol>
                    <li>En la tabla, encuentra la solicitud a editar</li>
                    <li>Haz clic en el botón amarillo con el icono de lápiz <i class="bi bi-pencil"></i></li>
                    <li>Se abrirá el formulario de edición con los datos actuales precargados</li>
                    <li>Modifica los campos que necesites:
                        <ul>
                            <li>Trabajador (puedes cambiar a quién pertenece la solicitud)</li>
                            <li>Categoría (cambiar el tipo de ausencia)</li>
                            <li>Fechas y horarios</li>
                            <li>Descripción</li>
                            <li>Trabajador de reemplazo (si aplica)</li>
                        </ul>
                    </li>
                    <li>El sistema recalcula automáticamente días y horas al cambiar fechas</li>
                    <li>Haz clic en <strong>"Guardar Cambios"</strong></li>
                    <li>Confirma la acción en el mensaje de confirmación</li>
                </ol>

                <div class="warning-box">
                    <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante al editar:</strong>
                    <ul class="mt-2 mb-0">
                        <li>Editar NO modifica el estado de la solicitud ni las autorizaciones existentes</li>
                        <li>Si una solicitud ya fue aprobada, seguirá aprobada después de editarla</li>
                        <li>La edición queda registrada con tu usuario y la fecha</li>
                        <li>Si cambias aspectos importantes, considera notificar manualmente a las partes involucradas</li>
                    </ul>
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">6</span>
                    Agregar Archivos a una Solicitud
                </h3>
                <p>
                    Si necesitas añadir documentación de soporte después de crear la solicitud:
                </p>
                <ol>
                    <li>En la tabla, encuentra la solicitud</li>
                    <li>Haz clic en el botón verde con el icono de clip <i class="bi bi-paperclip"></i></li>
                    <li>Se abrirá una ventana para subir archivos</li>
                    <li>Haz clic en <strong>"Seleccionar Archivos"</strong></li>
                    <li>Elige uno o varios archivos desde tu computador</li>
                    <li>Verás una vista previa de los archivos seleccionados</li>
                    <li>Haz clic en <strong>"Subir Archivos"</strong></li>
                    <li>Espera a que termine la carga (verás un mensaje de éxito)</li>
                </ol>

                <h4>Formatos y restricciones:</h4>
                <ul>
                    <li><strong>Formatos permitidos:</strong> PDF, imágenes (JPG, PNG), Word (DOC, DOCX)</li>
                    <li><strong>Tamaño máximo:</strong> 10 MB por archivo</li>
                    <li><strong>Cantidad:</strong> Puedes subir múltiples archivos sin límite de cantidad</li>
                </ul>

                <div class="success-box">
                    <strong><i class="bi bi-lightbulb me-2"></i>Caso de uso común:</strong>
                    Un trabajador entregó una incapacidad médica física pero no la subió al sistema. 
                    Puedes escanear el documento y agregarlo usando esta función.
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">7</span>
                    Crear una Nueva Solicitud
                </h3>
                <p>
                    Para registrar una ausencia en nombre de un trabajador:
                </p>
                <ol>
                    <li>Haz clic en el botón <strong>"Nueva Solicitud"</strong> (parte superior derecha)</li>
                    <li>Se abrirá un formulario completo</li>
                    <li>Completa todos los campos obligatorios (marcados con *):
                        <ul>
                            <li><strong>Trabajador:</strong> Selecciona de la lista (ordenada alfabéticamente por apellido)</li>
                            <li><strong>Categoría:</strong> Tipo de ausencia</li>
                            <li><strong>Fechas/Horarios:</strong> Según el tipo de categoría (día completo o parcial)</li>
                            <li><strong>Estado Inicial:</strong> Pendiente o Aprobada (ver detalles abajo)</li>
                        </ul>
                    </li>
                    <li>Campos opcionales:
                        <ul>
                            <li>Descripción/Motivo</li>
                            <li>Archivos adjuntos</li>
                            <li>Trabajador de reemplazo (si la categoría lo requiere)</li>
                        </ul>
                    </li>
                    <li>El sistema calcula automáticamente días y horas</li>
                    <li>Si el trabajador no tiene saldo suficiente, verás una advertencia (pero no te bloquea)</li>
                    <li>Revisa toda la información</li>
                    <li>Haz clic en <strong>"Crear Solicitud"</strong></li>
                </ol>

                <h4>Entendiendo "Estado Inicial":</h4>
                
                <div class="step-card">
                    <strong>Opción 1: Pendiente (flujo normal)</strong>
                    <p class="mb-0 mt-2">
                        La solicitud entrará al flujo de autorizaciones normal. Se crearán automáticamente 
                        las autorizaciones necesarias según el tipo y duración, y se notificará a los 
                        autorizadores correspondientes.
                    </p>
                </div>

                <div class="step-card">
                    <strong>Opción 2: Aprobada (registro pre-autorizado)</strong>
                    <p class="mb-0 mt-2">
                        La solicitud se registra directamente como aprobada, sin requerir autorizaciones 
                        adicionales. Útil para ausencias retroactivas o situaciones especiales donde 
                        Talento Humano tiene la autoridad de aprobar directamente.
                    </p>
                </div>

                <div class="warning-box">
                    <strong><i class="bi bi-exclamation-triangle me-2"></i>Cuándo usar cada opción:</strong>
                    <ul class="mt-2 mb-0">
                        <li><strong>Usa "Pendiente":</strong> Para solicitudes futuras o actuales que deben seguir el proceso normal</li>
                        <li><strong>Usa "Aprobada":</strong> Para registrar ausencias ya ocurridas y aprobadas verbalmente, o situaciones de emergencia</li>
                        <li>Documenta siempre en la descripción por qué estás creando la solicitud pre-aprobada</li>
                    </ul>
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">8</span>
                    Manejo de Advertencias de Saldo
                </h3>
                <p>
                    Al crear una solicitud, si el trabajador no tiene saldo suficiente:
                </p>
                <ol>
                    <li>Verás una advertencia en amarillo mostrando:
                        <ul>
                            <li>Cuánto saldo tiene disponible el trabajador</li>
                            <li>Cuánto estás solicitando</li>
                            <li>La diferencia</li>
                        </ul>
                    </li>
                    <li>Como administrador, PUEDES crear la solicitud de todas formas</li>
                    <li>El sistema no te bloqueará</li>
                    <li>La advertencia es informativa para que tomes una decisión consciente</li>
                </ol>

                <h4>Opciones cuando hay déficit de saldo:</h4>
                <ul>
                    <li><strong>Opción A:</strong> Crear la solicitud de todos modos (si hay justificación válida)</li>
                    <li><strong>Opción B:</strong> Primero ajustar el saldo del trabajador (usando la función de Gestionar Saldos) y luego crear la solicitud</li>
                    <li><strong>Opción C:</strong> Reducir las fechas/horas de la solicitud para que se ajuste al saldo</li>
                </ul>

                <div class="info-box">
                    <strong><i class="bi bi-info-circle me-2"></i>Nota importante:</strong>
                    Si creas una solicitud que excede el saldo, el trabajador quedará con saldo negativo. 
                    Esto debe manejarse posteriormente ajustando el saldo o descontando de períodos futuros 
                    según las políticas institucionales.
                </div>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">9</span>
                    Actualizar la Lista de Solicitudes
                </h3>
                <p>
                    Para asegurarte de ver la información más reciente:
                </p>
                <ul>
                    <li>Haz clic en el botón <strong>"Actualizar"</strong> (icono de flecha circular)</li>
                    <li>El sistema recargará todas las solicitudes desde el servidor</li>
                    <li>Los filtros aplicados se mantendrán activos</li>
                    <li>Útil si sospechas que se crearon nuevas solicitudes o hubo cambios</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>
                    <span class="step-number">10</span>
                    Expandir/Colapsar el Panel de Filtros
                </h3>
                <p>
                    Para tener más espacio en pantalla:
                </p>
                <ul>
                    <li>Haz clic en el icono de flecha <i class="bi bi-chevron-down"></i> en el encabezado del panel de filtros</li>
                    <li>Esto ocultará todos los campos de filtro</li>
                    <li>Los filtros aplicados seguirán activos aunque no los veas</li>
                    <li>Vuelve a hacer clic para expandir nuevamente</li>
                </ul>
            </div>

        </div>

        <!-- Solución de Problemas -->
        <div class="section-card">
            <h2>
                <i class="bi bi-question-circle me-2"></i>
                Solución de Problemas Comunes
            </h2>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 1: "No tienes permisos para acceder"</h3>
                <p><strong>Causa:</strong> Tu usuario no tiene el permiso "Gestionar todas las ausencias".</p>
                <p><strong>Solución:</strong></p>
                <ol>
                    <li>Contacta al administrador del sistema</li>
                    <li>Solicita que te asignen el permiso correspondiente</li>
                    <li>Este permiso generalmente solo se otorga al personal de Talento Humano</li>
                </ol>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 2: La página carga muy lentamente</h3>
                <p><strong>Causa:</strong> Hay muchas solicitudes en el sistema.</p>
                <p><strong>Solución:</strong></p>
                <ol>
                    <li>Ten paciencia en la carga inicial (puede tomar 10-15 segundos)</li>
                    <li>Una vez cargada, usa filtros para reducir la cantidad de datos mostrados</li>
                    <li>Filtra por fechas recientes si solo necesitas solicitudes actuales</li>
                    <li>Considera limpiar filtros antes de aplicar nuevos</li>
                </ol>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 3: No puedo encontrar una solicitud específica</h3>
                <p><strong>Solución:</strong></p>
                <ol>
                    <li>Verifica que no tengas filtros activos que la oculten</li>
                    <li>Haz clic en "Limpiar Filtros" para ver todas las solicitudes</li>
                    <li>Usa el filtro de "Trabajador" con parte del nombre</li>
                    <li>Si conoces las fechas aproximadas, usa los filtros de fecha</li>
                </ol>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 4: Error al crear solicitud</h3>
                <p><strong>Posibles causas y soluciones:</strong></p>
                <ul>
                    <li><strong>Campos obligatorios vacíos:</strong> Revisa que todos los campos marcados con * estén completos</li>
                    <li><strong>Fechas inválidas:</strong> Verifica que la fecha final sea mayor o igual a la inicial</li>
                    <li><strong>Horarios incorrectos:</strong> Asegúrate de que la hora final sea posterior a la inicial</li>
                    <li><strong>Problema de conexión:</strong> Verifica tu conexión a internet y vuelve a intentar</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 5: No puedo subir archivos</h3>
                <p><strong>Causas comunes:</strong></p>
                <ul>
                    <li><strong>Archivo muy grande:</strong> Verifica que no exceda 10 MB</li>
                    <li><strong>Formato no permitido:</strong> Solo PDF, imágenes y Word</li>
                    <li><strong>Problema de navegador:</strong> Intenta con otro navegador (Chrome, Firefox)</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 6: Los filtros no funcionan correctamente</h3>
                <p><strong>Solución:</strong></p>
                <ol>
                    <li>Haz clic en "Limpiar Filtros"</li>
                    <li>Aplica los filtros uno por uno para identificar cuál falla</li>
                    <li>Recarga la página completa (F5)</li>
                    <li>Si persiste, reporta el problema a soporte técnico</li>
                </ol>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 7: Error al editar una solicitud</h3>
                <p><strong>Solución:</strong></p>
                <ol>
                    <li>Cierra el formulario de edición</li>
                    <li>Haz clic en "Actualizar" para recargar las solicitudes</li>
                    <li>Vuelve a intentar editar</li>
                    <li>Si el error persiste, anota el mensaje de error exacto y contacta a soporte</li>
                </ol>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 8: La lista no muestra todos los trabajadores</h3>
                <p><strong>Causa:</strong> Solo se muestran trabajadores activos.</p>
                <p><strong>Solución:</strong></p>
                <ul>
                    <li>Si buscas un trabajador que ya no está activo, no aparecerá en la lista</li>
                    <li>Las solicitudes existentes de trabajadores inactivos SÍ se muestran en la tabla</li>
                    <li>Solo no podrás crear nuevas solicitudes para trabajadores inactivos</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 9: No puedo ver los archivos adjuntos</h3>
                <p><strong>Solución:</strong></p>
                <ol>
                    <li>Verifica que tu navegador permite pop-ups para este sitio</li>
                    <li>Si "Ver" no funciona, usa el botón "Descargar"</li>
                    <li>Algunos archivos muy grandes pueden tardar en cargar</li>
                    <li>Verifica tu conexión a internet</li>
                </ol>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-x-circle me-2 text-danger"></i>Problema 10: El cálculo de días/horas parece incorrecto</h3>
                <p><strong>Solución:</strong></p>
                <ul>
                    <li>El sistema calcula días laborales, no días calendario</li>
                    <li>Las horas se calculan restando 1 hora de almuerzo por día</li>
                    <li>Si crees que hay un error en la configuración, consulta con el administrador</li>
                    <li>Puedes editar la solicitud y ajustar manualmente si es necesario</li>
                </ul>
            </div>

        </div>

        <!-- Buenas Prácticas -->
        <div class="section-card">
            <h2>
                <i class="bi bi-award me-2"></i>
                Buenas Prácticas y Recomendaciones
            </h2>

            <div class="step-card">
                <h3><i class="bi bi-shield-check me-2"></i>Documenta tus acciones</h3>
                <ul>
                    <li>Siempre incluye una descripción detallada al crear solicitudes</li>
                    <li>Si editas una solicitud importante, registra por qué (en un sistema externo si es necesario)</li>
                    <li>Mantén comunicación con los trabajadores cuando hagas cambios a sus solicitudes</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-search me-2"></i>Usa filtros estratégicamente</h3>
                <ul>
                    <li>Para análisis mensuales, filtra por rango de fechas del mes</li>
                    <li>Para revisar ausencias por área, combina filtros de sección y categoría</li>
                    <li>Guarda mentalmente las combinaciones de filtros que usas frecuentemente</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-clock-history me-2"></i>Revisa regularmente</h3>
                <ul>
                    <li>Entra al menos una vez al día para verificar nuevas solicitudes</li>
                    <li>Monitorea solicitudes pendientes que llevan mucho tiempo sin autorizar</li>
                    <li>Identifica patrones o problemas recurrentes</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-file-earmark-check me-2"></i>Gestiona documentación proactivamente</h3>
                <ul>
                    <li>Cuando recibas documentos físicos, súbelos inmediatamente al sistema</li>
                    <li>Verifica que los archivos adjuntos sean legibles antes de aprobar</li>
                    <li>Pide a los trabajadores que suban sus propios documentos cuando sea posible</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-people me-2"></i>Comunica claramente</h3>
                <ul>
                    <li>Informa a los trabajadores cuando crees solicitudes en su nombre</li>
                    <li>Explica por qué hiciste cambios a sus solicitudes si es significativo</li>
                    <li>Mantén a los autorizadores informados de situaciones especiales</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-graph-up me-2"></i>Usa la función para análisis</h3>
                <ul>
                    <li>Genera reportes periódicos sobre ausencias por área</li>
                    <li>Identifica trabajadores con ausencias frecuentes</li>
                    <li>Analiza tendencias estacionales</li>
                    <li>Presenta datos a la dirección para toma de decisiones</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-exclamation-triangle me-2"></i>Maneja saldos con cuidado</h3>
                <ul>
                    <li>No crees solicitudes que excedan saldos sin justificación sólida</li>
                    <li>Si autorizas un déficit, documenta la razón y el plan de recuperación</li>
                    <li>Mantén actualizada la función de Gestión de Saldos</li>
                </ul>
            </div>

            <div class="step-card">
                <h3><i class="bi bi-calendar-check me-2"></i>Planifica y anticipa</h3>
                <ul>
                    <li>Identifica períodos críticos donde las ausencias pueden ser problemáticas</li>
                    <li>Coordina con áreas para asegurar cobertura adecuada</li>
                    <li>Mantén informadas a las directivas sobre ausencias significativas</li>
                </ul>
            </div>

        </div>

        <!-- Preguntas Frecuentes -->
        <div class="section-card">
            <h2>
                <i class="bi bi-chat-dots me-2"></i>
                Preguntas Frecuentes
            </h2>

            <div class="step-card">
                <h3>1. ¿Puedo ver solicitudes de trabajadores que ya no están activos?</h3>
                <p>
                    <strong>Sí.</strong> Todas las solicitudes históricas se mantienen en el sistema, incluso 
                    si el trabajador ya no está activo. Sin embargo, no podrás crear nuevas solicitudes para 
                    trabajadores inactivos (no aparecerán en la lista desplegable).
                </p>
            </div>

            <div class="step-card">
                <h3>2. ¿Qué pasa si edito una solicitud que ya fue aprobada?</h3>
                <p>
                    La solicitud MANTIENE su estado de aprobada. La edición no afecta el estado ni las 
                    autorizaciones existentes. Sin embargo, si haces cambios significativos (como cambiar 
                    las fechas), considera notificar manualmente a las partes involucradas.
                </p>
            </div>

            <div class="step-card">
                <h3>3. ¿Cuál es la diferencia entre crear con estado "Pendiente" vs "Aprobada"?</h3>
                <p>
                    <strong>Pendiente:</strong> La solicitud sigue el flujo normal de autorizaciones. Se notifica 
                    a los autorizadores y debe pasar por el proceso completo de aprobación.
                </p>
                <p>
                    <strong>Aprobada:</strong> Se registra como pre-autorizada. No requiere aprobaciones adicionales 
                    y el trabajador recibe notificación de aprobación inmediata. Usar solo para casos especiales.
                </p>
            </div>

            <div class="step-card">
                <h3>4. ¿Puedo crear solicitudes retroactivas (fechas pasadas)?</h3>
                <p>
                    <strong>Sí, técnicamente puedes.</strong> El sistema no te bloquea de seleccionar fechas pasadas. 
                    Sin embargo, solo hazlo cuando hay justificación válida (por ejemplo, registrar una incapacidad 
                    que se entregó tarde). Documenta siempre en la descripción por qué es retroactiva.
                </p>
            </div>

            <div class="step-card">
                <h3>5. ¿Los filtros aplicados afectan las nuevas solicitudes que se crean?</h3>
                <p>
                    <strong>No.</strong> Los filtros solo afectan qué solicitudes ves en la tabla. No tienen 
                    ningún efecto sobre qué puedes crear o editar. Después de crear una solicitud, es posible 
                    que no la veas inmediatamente si tus filtros activos la excluyen.
                </p>
            </div>

            <div class="step-card">
                <h3>6. ¿Puedo eliminar una solicitud?</h3>
                <p>
                    <strong>No directamente desde esta función.</strong> El sistema no incluye un botón de 
                    "eliminar" para prevenir borrados accidentales. Si necesitas eliminar una solicitud, 
                    contacta al administrador técnico del sistema o usa la función "Cancelar" si existe 
                    (cambiar estado a cancelada).
                </p>
            </div>

            <div class="step-card">
                <h3>7. ¿Cómo sé quién editó una solicitud?</h3>
                <p>
                    En el detalle de la solicitud, si fue editada, verás un cuadro azul que indica quién 
                    hizo la última edición y cuándo. El sistema guarda el worker_id del editor.
                </p>
            </div>

            <div class="step-card">
                <h3>8. ¿Los trabajadores reciben notificación cuando creo una solicitud para ellos?</h3>
                <p>
                    Depende del estado inicial:
                </p>
                <ul>
                    <li><strong>Si creas como "Pendiente":</strong> No reciben notificación inicial (solo los autorizadores)</li>
                    <li><strong>Si creas como "Aprobada":</strong> Sí, reciben email de confirmación de aprobación</li>
                    <li>En ambos casos, pueden ver su solicitud en su propio historial en "Solicitar Ausencias"</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>9. ¿Puedo exportar o imprimir la lista de solicitudes?</h3>
                <p>
                    <strong>No directamente desde la función actual.</strong> Sin embargo, puedes:
                </p>
                <ul>
                    <li>Aplicar filtros para la información que necesitas</li>
                    <li>Tomar capturas de pantalla de la tabla</li>
                    <li>Copiar manualmente la información a Excel</li>
                    <li>Solicitar al equipo técnico que agregue una función de exportación si es necesaria</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>10. ¿Qué formato tiene el "ID" de la solicitud?</h3>
                <p>
                    El ID es un identificador único (UUID) de 36 caracteres. En la tabla solo se muestran 
                    los primeros 8 caracteres para ahorrar espacio. Si necesitas el ID completo para 
                    referencia técnica, ábrelo en el detalle o consulta directamente la base de datos.
                </p>
            </div>

            <div class="step-card">
                <h3>11. ¿Puedo cambiar el estado de una solicitud (pendiente a aprobada, etc.)?</h3>
                <p>
                    <strong>No desde esta función.</strong> El cambio de estado lo manejan:
                </p>
                <ul>
                    <li>Los autorizadores cuando aprueban o rechazan (función "Autorizar Ausencias")</li>
                    <li>El sistema automáticamente cuando todas las autorizaciones se completan</li>
                    <li>Un administrador técnico directamente en la base de datos si es absolutamente necesario</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>12. ¿Las notificaciones se envían automáticamente al crear solicitudes?</h3>
                <p>
                    <strong>Sí.</strong> El sistema maneja automáticamente:
                </p>
                <ul>
                    <li>Notificaciones a autorizadores (si creas como "Pendiente")</li>
                    <li>Notificación al trabajador (si creas como "Aprobada")</li>
                    <li>Notificaciones adicionales según configuración de la categoría (TH, jefes, secciones)</li>
                    <li>No necesitas enviar emails manualmente</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>13. ¿Cómo manejo ausencias de personal administrativo vs académico?</h3>
                <p>
                    El sistema los diferencia automáticamente por sección:
                </p>
                <ul>
                    <li><strong>Personal académico:</strong> Tiene sección asignada (Preescolar, Primaria, etc.)</li>
                    <li><strong>Personal administrativo:</strong> No tiene sección (NULL en el campo)</li>
                    <li>Usa el filtro "Sección" para diferenciarlos</li>
                    <li>Las notificaciones se enrutan apropiadamente según esta configuración</li>
                </ul>
            </div>

            <div class="step-card">
                <h3>14. ¿Puedo usar esta función desde mi celular?</h3>
                <p>
                    <strong>Sí, pero con limitaciones.</strong> La interfaz es responsive y funciona en móviles, 
                    pero por la cantidad de información y filtros, la experiencia es mejor en computador de 
                    escritorio o tablet. Para consultas rápidas el móvil está bien, pero para trabajo 
                    administrativo extenso se recomienda usar un computador.
                </p>
            </div>

            <div class="step-card">
                <h3>15. ¿Qué hago si encuentro solicitudes duplicadas?</h3>
                <p>
                    Si identificas solicitudes duplicadas:
                </p>
                <ol>
                    <li>Verifica cuál es la solicitud correcta</li>
                    <li>Contacta al administrador técnico para eliminar el duplicado</li>
                    <li>Mientras tanto, puedes agregar una nota en la descripción indicando que es duplicada</li>
                    <li>NO intentes "arreglar" el duplicado cambiando sus datos, mejor eliminarlo</li>
                </ol>
            </div>

        </div>

        <!-- Tarjeta de Reporte de Bugs -->
        <div class="bug-report-card">
            <i class="bi bi-bug-fill" style="font-size: 3rem; color: #dc3545;"></i>
            <h3 class="mt-3 mb-3">¿Encontraste un problema o bug?</h3>
            <p class="mb-4">
                Si algo no funciona correctamente o tienes algún inconveniente con esta función, 
                puedes reportarlo a través de nuestro sistema de reporte de errores.
            </p>
            <a href="../report-bug.html" class="btn btn-light btn-lg">
                <i class="bi bi-exclamation-triangle me-2"></i>
                Reportar Bug o Problema
            </a>
        </div>

        <!-- Botón Flotante -->
        <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" 
           title="Reportar un problema">
            <i class="bi bi-bug-fill me-2"></i>
            Reportar Bug
        </a>

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Configuración de la página para futuras funcionalidades
        const PAGE_CONFIG = {
            moduleName: 'Talento Humano',
            modulePath: 'hr',
            pageTitle: 'Gestionar Ausencias',
            pagePath: 'manage-absences.html',
            moduleDescription: 'Administración completa de solicitudes de ausencias'
        };

        // Log de carga de la página
        console.log('📖 Manual cargado:', PAGE_CONFIG.pageTitle);
        console.log('📂 Módulo:', PAGE_CONFIG.moduleName);
    </script>
</body>
</html>
