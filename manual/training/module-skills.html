<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="26.01.26.09.25">
    
    <title>Manual - Asociar Habilidades a Unidades - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e9ecef;
        }

        /* Tarjetas de pasos */
        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 1rem;
        }

        /* Cajas de informaci√≥n */
        .info-box {
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1rem;
        }

        .info-box.warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }

        .info-box.tip {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
        }

        .info-box.important {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }

        .info-box.success {
            background: #d1e7dd;
            border-left: 4px solid #198754;
        }

        /* Listas personalizadas */
        .custom-list {
            list-style: none;
            padding-left: 0;
        }

        .custom-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .custom-list li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--system-primary-color, #1B365D);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Tarjeta para reportar bugs - USANDO COLOR PRIMARIO PARA MEJOR CONTRASTE */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 3rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Bot√≥n flotante para reportar bugs */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Tabla de ejemplo */
        .example-table {
            font-size: 0.9rem;
        }

        .example-table th {
            background: #f8f9fa;
        }

        /* Simulaci√≥n de dos columnas */
        .columns-demo {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .column-demo {
            flex: 1;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 1rem;
        }

        .column-demo h6 {
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Asociar Habilidades a Unidades
                        </h1>
                        <p class="subtitle mb-0">Formaci√≥n - Asociar Habilidades a Unidades Formativas</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/training/module-skills.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-9 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Formaci√≥n</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Asociar Habilidades a Unidades</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ========================================== -->

                <!-- SECCI√ìN 1: ¬øQU√â ES? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© significa Asociar Habilidades a Unidades?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead mb-3">
                            <strong>Asociar habilidades a unidades formativas</strong> significa vincular cada capacitaci√≥n con las habilidades espec√≠ficas que desarrolla o fortalece en los participantes. Esta asociaci√≥n permite identificar qu√© competencias adquiere un trabajador al completar cada formaci√≥n.
                        </p>
                        
                        <p>
                            Por ejemplo, una unidad formativa "Evaluaci√≥n Formativa en el Aula" puede desarrollar habilidades como "Pensamiento Cr√≠tico", "Comunicaci√≥n Efectiva" y "Innovaci√≥n Pedag√≥gica". Al asociar estas habilidades, el sistema puede rastrear el desarrollo de competencias de cada trabajador.
                        </p>

                        <div class="info-box tip mt-3">
                            <strong><i class="bi bi-lightbulb me-2"></i>¬øPara qu√© sirve?</strong>
                            <p class="mb-0 mt-2">
                                Permite generar perfiles de competencias de trabajadores, identificar brechas de habilidades, planificar desarrollo profesional personalizado y reportar el crecimiento de capacidades del equipo.
                            </p>
                        </div>
                    </div>

                    <div class="step-card">
                        <h5 class="mb-3">Ejemplo de asociaci√≥n</h5>
                        
                        <p><strong>Unidad Formativa:</strong> "Introducci√≥n a la Pedagog√≠a IB"</p>
                        
                        <p class="mb-2"><strong>Habilidades que desarrolla:</strong></p>
                        <ul>
                            <li>Pensamiento Cr√≠tico</li>
                            <li>Comunicaci√≥n Efectiva</li>
                            <li>Mentalidad Internacional</li>
                            <li>Indagaci√≥n</li>
                        </ul>

                        <p class="mt-3"><strong>Resultado:</strong> Al completar esta unidad, el sistema registra que el trabajador ha fortalecido estas 4 habilidades.</p>
                    </div>
                </section>

                <!-- SECCI√ìN 2: CARACTER√çSTICAS PRINCIPALES -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas principales
                    </h2>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="step-card">
                                <h5><i class="bi bi-columns-gap text-primary me-2"></i>Interfaz de dos columnas</h5>
                                <p class="mb-0">Vista lado a lado: habilidades asociadas (izquierda) y disponibles (derecha) para f√°cil gesti√≥n.</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="step-card">
                                <h5><i class="bi bi-arrow-left-right text-success me-2"></i>Agregar/quitar f√°cilmente</h5>
                                <p class="mb-0">Botones "Agregar" y eliminar permiten mover habilidades entre listas con un solo clic.</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="step-card">
                                <h5><i class="bi bi-123 text-info me-2"></i>Contadores autom√°ticos</h5>
                                <p class="mb-0">Badges muestran cu√°ntas habilidades est√°n asociadas y cu√°ntas disponibles en tiempo real.</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="step-card">
                                <h5><i class="bi bi-search text-warning me-2"></i>Selector de unidad</h5>
                                <p class="mb-0">Dropdown permite cambiar r√°pidamente entre diferentes unidades formativas para gestionar sus habilidades.</p>
                            </div>
                        </div>
                    </div>

                    <div class="step-card mt-4">
                        <h5 class="mb-3">Estructura de la p√°gina</h5>
                        
                        <p class="mb-3">La p√°gina se organiza en 3 secciones principales:</p>
                        
                        <ol>
                            <li class="mb-2"><strong>Selector Superior:</strong> Dropdown grande para seleccionar la unidad formativa a gestionar</li>
                            <li class="mb-2"><strong>Columna Izquierda - Habilidades Asociadas:</strong> Lista de habilidades ya vinculadas con bot√≥n para eliminar</li>
                            <li class="mb-2"><strong>Columna Derecha - Habilidades Disponibles:</strong> Lista de habilidades no asociadas con bot√≥n "Agregar"</li>
                        </ol>

                        <div class="columns-demo">
                            <div class="column-demo">
                                <h6><i class="bi bi-check-circle me-1"></i>Asociadas (Izquierda)</h6>
                                <p class="small mb-2">‚Ä¢ Pensamiento Cr√≠tico <span class="badge bg-danger">üóëÔ∏è</span></p>
                                <p class="small mb-2">‚Ä¢ Comunicaci√≥n Efectiva <span class="badge bg-danger">üóëÔ∏è</span></p>
                                <p class="small text-muted">Con bot√≥n para eliminar</p>
                            </div>
                            <div class="column-demo">
                                <h6><i class="bi bi-plus-circle me-1"></i>Disponibles (Derecha)</h6>
                                <p class="small mb-2">‚Ä¢ Trabajo en Equipo <span class="badge bg-primary">+ Agregar</span></p>
                                <p class="small mb-2">‚Ä¢ Liderazgo <span class="badge bg-primary">+ Agregar</span></p>
                                <p class="small text-muted">Con bot√≥n para agregar</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 3: ANTES DE COMENZAR -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Requisitos previos</h5>
                        
                        <ul class="custom-list">
                            <li><strong>Permiso necesario:</strong> Debes tener el permiso "Asociar habilidades a unidades" asignado.</li>
                            <li><strong>Unidades formativas:</strong> Debe haber al menos una unidad formativa activa creada.</li>
                            <li><strong>Habilidades:</strong> Debe haber al menos una habilidad activa creada en el cat√°logo.</li>
                            <li><strong>Claridad conceptual:</strong> Conoce qu√© habilidades desarrolla realmente cada capacitaci√≥n.</li>
                        </ul>

                        <div class="info-box warning mt-3">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante</strong>
                            <p class="mb-0">
                                Solo aparecen unidades formativas y habilidades en estado "Activo". Si no ves una unidad o habilidad, verifica su estado en sus respectivas p√°ginas de gesti√≥n.
                            </p>
                        </div>
                    </div>

                    <div class="step-card">
                        <h5 class="mb-3">¬øCu√°ntas habilidades asociar?</h5>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-success"><i class="bi bi-check-circle me-2"></i>Recomendado:</h6>
                                <ul>
                                    <li>Entre 2 y 5 habilidades por unidad</li>
                                    <li>Enfocarse en las habilidades principales</li>
                                    <li>Seleccionar las que realmente se desarrollan</li>
                                    <li>Priorizar calidad sobre cantidad</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-danger"><i class="bi bi-x-circle me-2"></i>Evitar:</h6>
                                <ul>
                                    <li>Asociar una sola habilidad (muy limitado)</li>
                                    <li>Asociar 10+ habilidades (poco realista)</li>
                                    <li>Incluir habilidades no relacionadas</li>
                                    <li>Asociar "por si acaso"</li>
                                </ul>
                            </div>
                        </div>

                        <div class="info-box tip mt-3">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo</strong>
                            <p class="mb-0">
                                Preg√∫ntate: "Si un trabajador completa esta capacitaci√≥n, ¬øqu√© habilidades habr√° desarrollado o fortalecido de manera significativa?" Solo asocia esas.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 4: GU√çA PASO A PASO -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Gu√≠a paso a paso
                    </h2>

                    <!-- SELECCIONAR UNIDAD -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">1</span>
                            Seleccionar una unidad formativa
                        </h5>
                        
                        <p class="mt-3 mb-2"><strong>Para comenzar a gestionar habilidades:</strong></p>
                        <ol>
                            <li class="mb-2">En la parte superior de la p√°gina, encontrar√°s un dropdown grande con el texto "Selecciona una unidad formativa"</li>
                            <li class="mb-2">Haz clic en el dropdown</li>
                            <li class="mb-2">Se desplegar√° la lista de todas las unidades formativas activas, ordenadas alfab√©ticamente</li>
                            <li class="mb-2">Selecciona la unidad formativa que deseas gestionar</li>
                            <li>Aparecer√°n las dos columnas con las habilidades asociadas y disponibles</li>
                        </ol>

                        <div class="info-box success mt-3">
                            <strong><i class="bi bi-check-circle me-2"></i>Resultado</strong>
                            <p class="mb-0">
                                Al seleccionar una unidad, se cargan autom√°ticamente las habilidades que ya tiene asociadas y las que est√°n disponibles para agregar.
                            </p>
                        </div>
                    </div>

                    <!-- AGREGAR HABILIDAD -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">2</span>
                            Agregar una habilidad a la unidad
                        </h5>
                        
                        <p class="mt-3 mb-2"><strong>Para asociar una nueva habilidad:</strong></p>
                        <ol>
                            <li class="mb-2">Mira la columna derecha "Habilidades Disponibles"</li>
                            <li class="mb-2">Busca visualmente la habilidad que deseas agregar (est√°n ordenadas alfab√©ticamente)</li>
                            <li class="mb-2">Haz clic en el bot√≥n azul <strong>"Agregar"</strong> al lado derecho de la habilidad</li>
                            <li class="mb-2">Ver√°s un mensaje de confirmaci√≥n verde: "Habilidad asociada exitosamente"</li>
                            <li class="mb-2">La habilidad desaparecer√° de la lista "Disponibles"</li>
                            <li>La habilidad aparecer√° en la lista "Asociadas" (columna izquierda)</li>
                        </ol>

                        <div class="info-box tip mt-3">
                            <strong><i class="bi bi-lightbulb me-2"></i>Actualizaci√≥n autom√°tica</strong>
                            <p class="mb-0">
                                Los contadores en los badges se actualizan autom√°ticamente. Ver√°s c√≥mo aumenta el n√∫mero de "Asociadas" y disminuye el de "Disponibles".
                            </p>
                        </div>
                    </div>

                    <!-- ELIMINAR HABILIDAD -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">3</span>
                            Eliminar una habilidad de la unidad
                        </h5>
                        
                        <p class="mt-3 mb-2"><strong>Para quitar una habilidad asociada:</strong></p>
                        <ol>
                            <li class="mb-2">Mira la columna izquierda "Habilidades Asociadas"</li>
                            <li class="mb-2">Ubica la habilidad que deseas eliminar</li>
                            <li class="mb-2">Haz clic en el bot√≥n rojo con icono de basurero <i class="bi bi-trash"></i> al lado derecho de la habilidad</li>
                            <li class="mb-2">Aparecer√° un mensaje de confirmaci√≥n: "¬øEst√° seguro de eliminar la asociaci√≥n con [nombre de la habilidad]?"</li>
                            <li class="mb-2">Confirma la acci√≥n</li>
                            <li class="mb-2">Ver√°s un mensaje verde: "Asociaci√≥n eliminada exitosamente"</li>
                            <li class="mb-2">La habilidad desaparecer√° de la lista "Asociadas"</li>
                            <li>La habilidad reaparecer√° en la lista "Disponibles" (columna derecha)</li>
                        </ol>

                        <div class="info-box warning mt-3">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Confirmaci√≥n requerida</strong>
                            <p class="mb-0">
                                El sistema siempre pide confirmaci√≥n antes de eliminar una asociaci√≥n para evitar eliminaciones accidentales.
                            </p>
                        </div>
                    </div>

                    <!-- CAMBIAR DE UNIDAD -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">4</span>
                            Cambiar a otra unidad formativa
                        </h5>
                        
                        <p class="mt-3 mb-2"><strong>Para gestionar habilidades de otra unidad:</strong></p>
                        <ol>
                            <li class="mb-2">Simplemente selecciona otra unidad del dropdown superior</li>
                            <li class="mb-2">Las columnas se actualizar√°n autom√°ticamente</li>
                            <li>Ver√°s las habilidades asociadas y disponibles de la nueva unidad seleccionada</li>
                        </ol>

                        <p class="mt-3"><strong>No necesitas guardar cambios:</strong> Cada asociaci√≥n o eliminaci√≥n se guarda inmediatamente en la base de datos.</p>
                    </div>

                    <!-- REVISAR ASOCIACIONES -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">5</span>
                            Revisar el estado de las asociaciones
                        </h5>
                        
                        <p class="mt-3 mb-2"><strong>Para verificar cu√°ntas habilidades tiene cada unidad:</strong></p>
                        
                        <ul>
                            <li class="mb-2"><strong>Badge "Habilidades Asociadas":</strong> N√∫mero en la parte superior de la columna izquierda</li>
                            <li class="mb-2"><strong>Badge "Habilidades Disponibles":</strong> N√∫mero en la parte superior de la columna derecha</li>
                            <li class="mb-2"><strong>Estado vac√≠o:</strong> Si una columna est√° vac√≠a, ver√°s un mensaje indic√°ndolo:
                                <ul class="mt-2">
                                    <li>Asociadas vac√≠o: "No hay habilidades asociadas a esta unidad"</li>
                                    <li>Disponibles vac√≠o: "Todas las habilidades est√°n asociadas"</li>
                                </ul>
                            </li>
                        </ul>

                        <div class="info-box success mt-3">
                            <strong><i class="bi bi-check-circle me-2"></i>Objetivo ideal</strong>
                            <p class="mb-0">
                                Una unidad formativa bien configurada deber√≠a tener entre 2 y 5 habilidades asociadas, reflejando las competencias principales que desarrolla.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 5: SOLUCI√ìN DE PROBLEMAS -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Soluci√≥n de problemas comunes
                    </h2>

                    <div class="step-card">
                        <h5 class="text-danger mb-3"><i class="bi bi-exclamation-triangle me-2"></i>No aparece ninguna unidad formativa en el dropdown</h5>
                        <p><strong>Causa probable:</strong></p>
                        <p>No hay unidades formativas activas en el sistema.</p>
                        <p><strong>Soluci√≥n:</strong></p>
                        <ul>
                            <li>Ve a la p√°gina "Gestionar Unidades Formativas"</li>
                            <li>Verifica que haya unidades creadas</li>
                            <li>Aseg√∫rate de que su estado sea "Activo"</li>
                            <li>Solo las unidades activas aparecen en el selector</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5 class="text-warning mb-3"><i class="bi bi-exclamation-triangle me-2"></i>La columna "Disponibles" est√° vac√≠a</h5>
                        <p><strong>Posibles causas:</strong></p>
                        <ol>
                            <li><strong>Todas las habilidades ya est√°n asociadas:</strong> Excelente, la unidad est√° completamente configurada</li>
                            <li><strong>No hay habilidades activas en el sistema:</strong> Ve a "Gestionar Habilidades" y crea/activa habilidades</li>
                        </ol>
                        <p><strong>Verificaci√≥n:</strong></p>
                        <p>Si el badge dice "0" y ves el mensaje "Todas las habilidades est√°n asociadas", significa que ya asociaste todas las habilidades disponibles a esta unidad.</p>
                    </div>

                    <div class="step-card">
                        <h5 class="text-danger mb-3"><i class="bi bi-exclamation-triangle me-2"></i>No puedo eliminar una habilidad</h5>
                        <p><strong>Causa probable:</strong></p>
                        <p>Error temporal de red o permisos.</p>
                        <p><strong>Soluci√≥n:</strong></p>
                        <ul>
                            <li>Verifica que tienes el permiso "Asociar habilidades a unidades"</li>
                            <li>Intenta nuevamente (puede ser un error temporal)</li>
                            <li>Recarga la p√°gina (F5) y vuelve a intentar</li>
                            <li>Si el problema persiste, contacta al administrador del sistema</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5 class="text-warning mb-3"><i class="bi bi-exclamation-triangle me-2"></i>Los contadores no coinciden con lo que veo</h5>
                        <p><strong>Soluci√≥n:</strong></p>
                        <ul>
                            <li>Selecciona otra unidad del dropdown y luego vuelve a la unidad original</li>
                            <li>Esto recargar√° las asociaciones actualizadas</li>
                            <li>Si el problema persiste, recarga completamente la p√°gina (F5)</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCI√ìN 6: BUENAS PR√ÅCTICAS -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas pr√°cticas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3"><i class="bi bi-check-circle text-success me-2"></i>Al asociar habilidades</h5>
                        
                        <ul class="custom-list">
                            <li>Asocia solo las habilidades que la capacitaci√≥n desarrolla directamente</li>
                            <li>Mant√©n entre 2 y 5 habilidades por unidad (rango √≥ptimo)</li>
                            <li>Piensa en el participante: ¬øqu√© competencias adquirir√° realmente?</li>
                            <li>No asocies habilidades solo porque "se tocan brevemente" en el contenido</li>
                            <li>Revisa el prop√≥sito y descripci√≥n de la unidad para guiarte</li>
                            <li>S√© coherente: unidades similares deben tener habilidades similares</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5 class="mb-3"><i class="bi bi-lightbulb text-info me-2"></i>Criterios de selecci√≥n</h5>
                        
                        <p class="mb-2"><strong>Asocia una habilidad SI:</strong></p>
                        <ul>
                            <li>Es uno de los objetivos principales de la capacitaci√≥n</li>
                            <li>Se practica o desarrolla activamente durante la formaci√≥n</li>
                            <li>Los participantes recibir√°n retroalimentaci√≥n sobre esta habilidad</li>
                            <li>Se eval√∫a de alguna forma en la capacitaci√≥n</li>
                        </ul>

                        <p class="mb-2 mt-3"><strong>NO asocies una habilidad SI:</strong></p>
                        <ul>
                            <li>Solo se menciona de pasada en el contenido</li>
                            <li>No hay ejercicios pr√°cticos relacionados</li>
                            <li>Es una habilidad muy general que "todo desarrolla"</li>
                            <li>No hay evidencia de que se trabaje espec√≠ficamente</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5 class="mb-3"><i class="bi bi-arrow-repeat text-warning me-2"></i>Mantenimiento peri√≥dico</h5>
                        
                        <ul class="custom-list">
                            <li>Revisa las asociaciones al menos una vez al a√±o</li>
                            <li>Actualiza cuando cambien los contenidos o metodolog√≠a de la unidad</li>
                            <li>Si agregas nuevas habilidades al cat√°logo, revisa qu√© unidades las desarrollan</li>
                            <li>Solicita feedback de facilitadores sobre qu√© habilidades realmente se trabajan</li>
                            <li>Elimina asociaciones que ya no apliquen si la unidad cambia significativamente</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCI√ìN 7: PREGUNTAS FRECUENTES -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="accordion" id="faqAccordion">
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    ¬øCu√°ntas habilidades deber√≠a asociar a cada unidad?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Se recomienda entre 2 y 5 habilidades por unidad formativa. Este rango es realista: suficientemente espec√≠fico para ser √∫til, pero no tan amplio que diluya el enfoque. Una capacitaci√≥n corta (2-4 horas) t√≠picamente desarrolla 2-3 habilidades, mientras que una formaci√≥n m√°s extensa (8+ horas) puede desarrollar 4-5 habilidades de manera significativa.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    ¬øPuedo asociar la misma habilidad a m√∫ltiples unidades?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    S√≠, absolutamente. Es normal y esperado que una habilidad como "Pensamiento Cr√≠tico" o "Comunicaci√≥n Efectiva" se desarrolle en m√∫ltiples capacitaciones diferentes. Esto permite que el sistema rastree el desarrollo progresivo de cada habilidad a trav√©s de diversas formaciones. El perfil de un trabajador mostrar√° cu√°ntas veces ha trabajado cada habilidad.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    ¬øQu√© pasa si elimino una asociaci√≥n de una unidad que ya completaron trabajadores?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    La eliminaci√≥n afecta el perfil actual de competencias, pero el sistema mantiene el registro hist√≥rico de que la habilidad fue desarrollada. Es importante ser cuidadoso al eliminar asociaciones de unidades con muchos trabajadores completados. Si la habilidad ya no se trabaja en la unidad actualizada, la eliminaci√≥n es apropiada.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    ¬øPuedo asociar habilidades a una unidad inactiva?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    No, solo aparecen unidades formativas activas en el selector. Si necesitas asociar habilidades a una unidad inactiva, primero debes activarla desde "Gestionar Unidades Formativas", realizar las asociaciones, y luego puedes desactivarla nuevamente si lo necesitas.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                    ¬øDebo asociar habilidades a todas las unidades formativas?
                                </button>
                            </h2>
                            <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Idealmente s√≠, pero no es obligatorio. Asociar habilidades a todas las unidades permite tener un perfil completo de competencias de cada trabajador. Sin embargo, puedes empezar asociando habilidades solo a las unidades m√°s importantes o estrat√©gicas, e ir completando gradualmente el resto. El sistema funciona incluso si algunas unidades no tienen habilidades asociadas.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq6">
                                    ¬øQu√© hago si ninguna habilidad del cat√°logo se ajusta a mi unidad?
                                </button>
                            </h2>
                            <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Primero, revisa bien el cat√°logo: muchas habilidades son amplias y pueden aplicar. Si realmente no hay habilidades apropiadas, ve a "Gestionar Habilidades" y crea las nuevas habilidades necesarias. Una vez creadas y activas, aparecer√°n autom√°ticamente en la lista de "Disponibles" para asociarlas a tu unidad.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq7">
                                    ¬øSe guardan los cambios autom√°ticamente?
                                </button>
                            </h2>
                            <div id="faq7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    S√≠, cada vez que agregas o eliminas una asociaci√≥n, el cambio se guarda inmediatamente en la base de datos. No hay bot√≥n "Guardar" porque no es necesario. Cada acci√≥n es definitiva y autom√°tica. Por eso siempre hay confirmaci√≥n al eliminar, para evitar eliminaciones accidentales.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq8">
                                    ¬øPuedo ver en qu√© unidades est√° asociada una habilidad espec√≠fica?
                                </button>
                            </h2>
                            <div id="faq8" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Esta p√°gina est√° dise√±ada para gestionar desde la perspectiva de la unidad formativa (qu√© habilidades tiene cada unidad). Para ver la perspectiva inversa (en qu√© unidades se trabaja cada habilidad), necesitar√≠as ir revisando unidad por unidad. Una futura mejora podr√≠a incluir reportes que muestren esta informaci√≥n.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq9">
                                    ¬øEs mejor asociar muchas habilidades generales o pocas espec√≠ficas?
                                </button>
                            </h2>
                            <div id="faq9" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Pocas espec√≠ficas es mejor. Es m√°s √∫til decir que una unidad desarrolla "Evaluaci√≥n Formativa" y "Retroalimentaci√≥n Constructiva" (2 habilidades espec√≠ficas) que asociar 8 habilidades generales como "Pensamiento", "Comunicaci√≥n", "Creatividad", etc. Las asociaciones espec√≠ficas y precisas permiten perfiles de competencias m√°s significativos.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq10">
                                    ¬øQui√©n puede asociar habilidades a unidades?
                                </button>
                            </h2>
                            <div id="faq10" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Solo los usuarios que tengan el permiso "Asociar habilidades a unidades" pueden acceder a esta p√°gina y realizar cambios. Este permiso generalmente se asigna a coordinadores de formaci√≥n, responsables de desarrollo profesional y administradores del sistema. Si necesitas asociar habilidades, contacta a estas personas.
                                </div>
                            </div>
                        </div>

                    </div>
                </section>

                <!-- ========================================== -->
                <!-- FIN DEL CONTENIDO DEL MANUAL -->
                <!-- ========================================== -->

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Formaci√≥n',
            modulePath: 'training',
            pageTitle: 'Asociar Habilidades a Unidades',
            pagePath: 'module-skills.html',
            moduleDescription: 'Gestiona las habilidades que desarrolla cada unidad'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
