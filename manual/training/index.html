<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="26.01.26.19.30">
    
    <title>Manual - Formaci√≥n - P√°gina Principal del M√≥dulo - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Tarjeta para reportar bugs - COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Bot√≥n flotante para reportar bugs - COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Cajas de informaci√≥n */
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #0d6efd;
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .success-box {
            background: #d1e7dd;
            border-left: 4px solid #198754;
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .danger-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        /* Tarjetas de pasos */
        .step-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .step-card h5 {
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 1rem;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        /* Listas con estilo */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding-left: 1.75rem;
            margin-bottom: 0.75rem;
            position: relative;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #198754;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Secciones del manual */
        .manual-section {
            margin-bottom: 3rem;
        }

        .manual-section h3 {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .manual-section h4 {
            color: #495057;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        /* FAQ */
        .faq-item {
            margin-bottom: 1.5rem;
        }

        .faq-question {
            font-weight: 600;
            color: #495057;
            margin-bottom: 0.5rem;
        }

        .faq-answer {
            color: #6c757d;
            padding-left: 1.5rem;
        }

        /* Visual examples */
        .visual-example {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .function-group-example {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .group-title-example {
            font-weight: 600;
            color: #6c757d;
            margin-bottom: 0.75rem;
        }

        .function-card-example {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .function-icon-example {
            width: 32px;
            height: 32px;
            background: #ede9fe;
            color: #8b5cf6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: M√≥dulo de Formaci√≥n (√çndice Principal)
                        </h1>
                        <p class="subtitle mb-0">M√≥dulo de Formaci√≥n</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/training/index.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Formaci√≥n</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">P√°gina Principal del M√≥dulo (√çndice)</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCI√ìN 1: ¬øQU√â ES? -->
                <div class="manual-section">
                    <h3><i class="bi bi-info-circle me-2"></i>¬øQu√© es la P√°gina Principal del M√≥dulo?</h3>
                    
                    <p>
                        La <strong>P√°gina Principal del M√≥dulo de Formaci√≥n</strong> (tambi√©n llamada "√≠ndice" 
                        o "index") es tu punto de entrada centralizado a TODO el sistema de gesti√≥n de formaci√≥n 
                        y desarrollo profesional de la organizaci√≥n.
                    </p>

                    <p>
                        Funciona como un "tablero de control" o "men√∫ principal" donde encuentras organizadas 
                        todas las herramientas disponibles para ti en el m√≥dulo.
                    </p>

                    <div class="success-box">
                        <strong><i class="bi bi-lightbulb me-2"></i>Pi√©nsalo as√≠:</strong>
                        Es como el men√∫ principal de una aplicaci√≥n m√≥vil, o el homepage de un sitio web. 
                        Desde aqu√≠ accedes a cada funci√≥n espec√≠fica sin tener que buscar por toda la plataforma. 
                        Todo est√° organizado y a un clic de distancia.
                    </div>

                    <h4>¬øQu√© NO es esta p√°gina?</h4>
                    <ul>
                        <li><strong>NO es una herramienta en s√≠ misma:</strong> No haces tareas aqu√≠. Solo navegas desde aqu√≠ hacia las herramientas.</li>
                        <li><strong>NO muestra todas las funciones a todos:</strong> Solo ver√°s las funciones para las que tienes permiso.</li>
                        <li><strong>NO es tu ruta personal:</strong> Para eso existe "Mi Ruta de Formaci√≥n" (una de las funciones del m√≥dulo).</li>
                    </ul>

                    <div class="info-box">
                        <strong><i class="bi bi-key me-2"></i>Importante sobre permisos:</strong>
                        Lo que ves en esta p√°gina depende de tus permisos. Si tienes rol administrativo, ver√°s 
                        TODAS las funciones. Si eres un trabajador regular, solo ver√°s las secciones de "Mi Formaci√≥n". 
                        Esto es normal y por dise√±o - no es un error.
                    </div>
                </div>

                <!-- SECCI√ìN 2: ESTRUCTURA DE LA P√ÅGINA -->
                <div class="manual-section">
                    <h3><i class="bi bi-layout-wtf me-2"></i>Estructura de la P√°gina</h3>

                    <p>
                        La p√°gina se divide en 3 secciones principales de arriba hacia abajo:
                    </p>

                    <h4>1. Encabezado con Informaci√≥n Contextual</h4>
                    <p>En la parte superior ver√°s:</p>
                    <ul>
                        <li><strong>T√≠tulo del m√≥dulo:</strong> "Formaci√≥n" con √≠cono de birrete üéì</li>
                        <li><strong>Descripci√≥n breve:</strong> "Gesti√≥n de rutas de formaci√≥n y desarrollo profesional"</li>
                        <li><strong>Badges contextuales:</strong> Informaci√≥n como "A√±o Activo: 2026" y "Estado: Activo"</li>
                    </ul>

                    <h4>2. Secci√≥n de M√©tricas (Opcional - Carga Manual)</h4>
                    <p>
                        Justo despu√©s del encabezado encontrar√°s un √°rea que dice "Resumen del M√≥dulo" con 
                        un bot√≥n "Cargar M√©tricas". Esta secci√≥n muestra 4 n√∫meros importantes:
                    </p>
                    <ul>
                        <li><strong>Unidades Formativas:</strong> Total de capacitaciones activas en el sistema</li>
                        <li><strong>Trabajadores con Rutas:</strong> Cu√°ntos trabajadores tienen formaci√≥n asignada</li>
                        <li><strong>Completitud Promedio:</strong> % promedio de avance organizacional</li>
                        <li><strong>Facilitadores Activos:</strong> Cu√°ntos facilitadores hay disponibles</li>
                    </ul>

                    <div class="info-box">
                        <strong><i class="bi bi-speedometer me-2"></i>Nota sobre m√©tricas:</strong>
                        Las m√©tricas NO se cargan autom√°ticamente para ahorrar tiempo de carga inicial. 
                        Si quieres verlas, haz clic en "Cargar M√©tricas". Si no las necesitas, puedes 
                        ignorar esa secci√≥n y navegar directamente a las funciones.
                    </div>

                    <h4>3. Grid de Funciones (Lo M√°s Importante)</h4>
                    <p>
                        Esta es el coraz√≥n de la p√°gina. Aqu√≠ ver√°s tarjetas organizadas en grupos tem√°ticos. 
                        Cada tarjeta representa una funci√≥n espec√≠fica del m√≥dulo. Al hacer clic en una tarjeta, 
                        entras a esa herramienta.
                    </p>
                </div>

                <!-- SECCI√ìN 3: LOS 5 GRUPOS DE FUNCIONES -->
                <div class="manual-section">
                    <h3><i class="bi bi-grid-3x3-gap me-2"></i>Entendiendo los 5 Grupos de Funciones</h3>

                    <p>
                        El m√≥dulo organiza sus 20 funciones en 5 grupos tem√°ticos. Aqu√≠ te explicamos 
                        cada grupo, qui√©n lo usa, y para qu√© sirve:
                    </p>

                    <div class="step-card">
                        <h5><span class="step-number">1</span>Cat√°logos (5 funciones)</h5>
                        <p><strong>¬øQu√© son?</strong></p>
                        <p>
                            Los "cat√°logos" son las BASES DE DATOS maestras del m√≥dulo. Son como los 
                            "diccionarios" o "listas maestras" que alimentan todo el sistema.
                        </p>
                        <p><strong>¬øQui√©n los usa?</strong></p>
                        <p>
                            Coordinadores de formaci√≥n, administradores de RRHH, y en algunos casos, super admins. 
                            Los trabajadores regulares NO ven esta secci√≥n.
                        </p>
                        <p><strong>Funciones incluidas:</strong></p>
                        <ul class="mb-0">
                            <li><strong>Ejes Formativos:</strong> Categor√≠as tem√°ticas (Tecnolog√≠a, Pedagog√≠a, Seguridad, etc.)</li>
                            <li><strong>Habilidades:</strong> Competencias que se desarrollan (Liderazgo, Excel, Ingl√©s, etc.)</li>
                            <li><strong>Modalidades:</strong> Tipos de formaci√≥n (Virtual, Presencial, Sincr√≥nica, etc.)</li>
                            <li><strong>Fuentes de Requisici√≥n:</strong> Or√≠genes de requerimientos (IB, SGSST, Habeas Data, etc.)</li>
                            <li><strong>Facilitadores:</strong> Instructores internos y externos disponibles</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5><span class="step-number">2</span>Unidades Formativas (5 funciones)</h5>
                        <p><strong>¬øQu√© son?</strong></p>
                        <p>
                            Aqu√≠ se CREAN y CONFIGURAN las capacitaciones (cursos, talleres, m√≥dulos). Es donde 
                            se arma el "cat√°logo de oferta formativa" de la organizaci√≥n.
                        </p>
                        <p><strong>¬øQui√©n las usa?</strong></p>
                        <p>
                            Coordinadores de formaci√≥n con permisos administrativos. Los trabajadores regulares 
                            NO ven esta secci√≥n.
                        </p>
                        <p><strong>Funciones incluidas:</strong></p>
                        <ul class="mb-0">
                            <li><strong>Unidades Formativas:</strong> CRUD (Crear, Leer, Actualizar, Eliminar) de capacitaciones</li>
                            <li><strong>Asociar Habilidades:</strong> Vincular qu√© habilidades desarrolla cada unidad</li>
                            <li><strong>Asociar Facilitadores:</strong> Asignar qui√©n puede dictar cada unidad</li>
                            <li><strong>Asociar a Roles:</strong> Definir qu√© roles laborales requieren qu√© unidades (obligatorias)</li>
                            <li><strong>Referencias y Recursos:</strong> Subir/vincular documentos, videos, enlaces de cada unidad</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5><span class="step-number">3</span>Gesti√≥n de Rutas (4 funciones)</h5>
                        <p><strong>¬øQu√© son?</strong></p>
                        <p>
                            Aqu√≠ se OPERAN las rutas formativas de los trabajadores. Es donde se asignan, 
                            registran completaciones, eximen, y establecen fechas.
                        </p>
                        <p><strong>¬øQui√©n las usa?</strong></p>
                        <p>
                            Coordinadores de formaci√≥n, facilitadores, y jefes con permisos espec√≠ficos. 
                            Los trabajadores regulares NO ven esta secci√≥n.
                        </p>
                        <p><strong>Funciones incluidas:</strong></p>
                        <ul class="mb-0">
                            <li><strong>Generar Rutas de Formaci√≥n:</strong> Crear rutas autom√°ticamente seg√∫n roles asignados</li>
                            <li><strong>Eximir Cumplimiento:</strong> Marcar unidades como "no necesarias" por experiencia previa</li>
                            <li><strong>Registrar Cumplimiento:</strong> Marcar oficialmente que alguien complet√≥ una unidad</li>
                            <li><strong>Gestionar Fechas:</strong> Establecer/modificar fechas l√≠mite de completaci√≥n</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5><span class="step-number">4</span>Consultas y Reportes (3 funciones)</h5>
                        <p><strong>¬øQu√© son?</strong></p>
                        <p>
                            Herramientas de AN√ÅLISIS y VISUALIZACI√ìN de datos. Aqu√≠ se consultan avances, 
                            se generan reportes, y se visualizan dashboards.
                        </p>
                        <p><strong>¬øQui√©n las usa?</strong></p>
                        <p>
                            Coordinadores, jefes de √°rea, RRHH, directivos. Los trabajadores regulares NO ven 
                            esta secci√≥n (ellos tienen su propio dashboard personal en "Mi Formaci√≥n").
                        </p>
                        <p><strong>Funciones incluidas:</strong></p>
                        <ul class="mb-0">
                            <li><strong>Dashboard Global:</strong> Vista general organizacional con gr√°ficas y KPIs</li>
                            <li><strong>Reportes:</strong> 7 tipos de reportes exportables a PDF (cumplimiento, certificaciones, vencimientos, etc.)</li>
                            <li><strong>Consultas de Rutas:</strong> B√∫squedas avanzadas con filtros m√∫ltiples</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5><span class="step-number">5</span>Mi Formaci√≥n (3 funciones) üë•</h5>
                        <p><strong>¬øQu√© son?</strong></p>
                        <p>
                            Herramientas PERSONALES para que TODOS los trabajadores vean su progreso, soliciten 
                            capacitaciones adicionales, y monitoreen sus pendientes.
                        </p>
                        <p><strong>¬øQui√©n las usa?</strong></p>
                        <p>
                            <strong>TODOS los trabajadores de la organizaci√≥n.</strong> Esta es la √∫nica secci√≥n 
                            que es universal. Si solo ves este grupo y nada m√°s, es completamente normal - 
                            significa que tienes rol de trabajador regular sin permisos administrativos.
                        </p>
                        <p><strong>Funciones incluidas:</strong></p>
                        <ul class="mb-0">
                            <li><strong>Mi Ruta de Formaci√≥n:</strong> Lista detallada de tus unidades asignadas con recursos</li>
                            <li><strong>Solicitar Unidades:</strong> Pedir capacitaciones adicionales "por inter√©s" personal</li>
                            <li><strong>Mi Dashboard:</strong> Panel personal con m√©tricas, gr√°ficas, pendientes, y certificaciones</li>
                        </ul>
                    </div>

                    <div class="warning-box">
                        <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante sobre permisos:</strong>
                        Si solo ves el grupo 5 ("Mi Formaci√≥n"), NO es un error. Significa que tienes acceso 
                        como trabajador regular. Los otros 4 grupos solo los ven personas con roles administrativos 
                        espec√≠ficos en formaci√≥n. Esto es por dise√±o para mantener el sistema organizado.
                    </div>
                </div>

                <!-- SECCI√ìN 4: C√ìMO NAVEGAR -->
                <div class="manual-section">
                    <h3><i class="bi bi-compass me-2"></i>C√≥mo Navegar por la P√°gina</h3>

                    <h4>Navegaci√≥n B√°sica</h4>

                    <div class="step-card">
                        <h5>1. Identificar tu Grupo Relevante</h5>
                        <p class="mb-0">
                            Escanea visualmente los t√≠tulos de los grupos (est√°n en gris: "Cat√°logos", 
                            "Unidades Formativas", etc.). Identifica qu√© grupo contiene lo que necesitas. 
                            Si eres trabajador regular, solo ver√°s "Mi Formaci√≥n" - ve directo ah√≠.
                        </p>
                    </div>

                    <div class="step-card">
                        <h5>2. Leer las Tarjetas de Funciones</h5>
                        <p>
                            Cada tarjeta tiene:
                        </p>
                        <ul class="mb-0">
                            <li><strong>√çcono:</strong> Representaci√≥n visual de la funci√≥n</li>
                            <li><strong>T√≠tulo:</strong> Nombre claro de la funci√≥n</li>
                            <li><strong>Descripci√≥n:</strong> Breve explicaci√≥n de qu√© hace</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h5>3. Hacer Clic en la Tarjeta Completa</h5>
                        <p class="mb-0">
                            Toda la tarjeta es clickeable - no necesitas buscar un bot√≥n espec√≠fico. 
                            Al hacer clic, se abrir√° la p√°gina de esa funci√≥n. Para volver al √≠ndice, 
                            usa el bot√≥n "Atr√°s" del navegador o los breadcrumbs (las "migas de pan" 
                            en la parte superior de cada p√°gina).
                        </p>
                    </div>

                    <h4>Trucos de Navegaci√≥n</h4>

                    <div class="success-box">
                        <strong><i class="bi bi-lightning me-2"></i>Acceso r√°pido frecuente:</strong>
                        Si usas ciertas funciones TODOS los d√≠as (ej: "Mi Ruta" o "Dashboard Global"), 
                        considera marcarlas como favoritos en tu navegador. As√≠ no tienes que pasar por 
                        el √≠ndice cada vez. Clic derecho sobre la tarjeta ‚Üí "Agregar a favoritos".
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-search me-2"></i>Uso de buscador del navegador:</strong>
                        Si no recuerdas en qu√© grupo est√° una funci√≥n, usa Ctrl+F (Windows/Linux) o Cmd+F (Mac) 
                        para buscar en la p√°gina. Por ejemplo, busca "certificaciones" y te llevar√° directamente 
                        a cualquier menci√≥n de esa palabra.
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-book me-2"></i>Acceso a manuales:</strong>
                        Cada funci√≥n tiene su propio manual detallado. Para acceder, primero entra a la 
                        funci√≥n (ej: "Mi Ruta"), y dentro de esa p√°gina busca el enlace/bot√≥n "Manual" o 
                        "Ayuda". Ah√≠ encontrar√°s instrucciones paso a paso espec√≠ficas de esa herramienta.
                    </div>
                </div>

                <!-- SECCI√ìN 5: SISTEMA DE PERMISOS -->
                <div class="manual-section">
                    <h3><i class="bi bi-shield-lock me-2"></i>Entendiendo el Sistema de Permisos</h3>

                    <p>
                        El sistema de permisos controla QU√â funciones ves en esta p√°gina. Es importante 
                        entender c√≥mo funciona para no confundirte.
                    </p>

                    <h4>Niveles de Acceso T√≠picos</h4>

                    <div class="visual-example">
                        <strong>Escenario 1: Trabajador Regular</strong>
                        <div class="mt-2">
                            <div class="function-group-example">
                                <div class="group-title-example">Mi Formaci√≥n (3 funciones visibles)</div>
                                <div class="function-card-example">
                                    <div class="function-icon-example"><i class="bi bi-map"></i></div>
                                    <span>Mi Ruta de Formaci√≥n</span>
                                </div>
                                <div class="function-card-example">
                                    <div class="function-icon-example"><i class="bi bi-plus-circle"></i></div>
                                    <span>Solicitar Unidades</span>
                                </div>
                                <div class="function-card-example">
                                    <div class="function-icon-example"><i class="bi bi-person-circle"></i></div>
                                    <span>Mi Dashboard</span>
                                </div>
                            </div>
                            <small class="text-muted">
                                ‚úÖ Solo ve grupo 5. Los otros 4 grupos ni siquiera aparecen en pantalla.
                            </small>
                        </div>
                    </div>

                    <div class="visual-example">
                        <strong>Escenario 2: Coordinador de Formaci√≥n</strong>
                        <div class="mt-2">
                            <small class="text-muted">
                                ‚úÖ Ve TODOS los 5 grupos (20 funciones total). Tiene acceso completo al m√≥dulo 
                                porque su rol requiere gestionar toda la formaci√≥n organizacional.
                            </small>
                        </div>
                    </div>

                    <div class="visual-example">
                        <strong>Escenario 3: Jefe de √Årea (sin rol admin de formaci√≥n)</strong>
                        <div class="mt-2">
                            <small class="text-muted">
                                ‚úÖ Ve grupo 5 ("Mi Formaci√≥n") completo, y ALGUNAS funciones de grupo 4 
                                ("Consultas y Reportes"). Por ejemplo, podr√≠a ver "Reportes" pero no 
                                "Dashboard Global". Depende de permisos espec√≠ficos que le hayan dado.
                            </small>
                        </div>
                    </div>

                    <h4>¬øPor qu√© no veo una funci√≥n que necesito?</h4>

                    <div class="step-card">
                        <h5>Paso 1: Verificar si existe</h5>
                        <p class="mb-0">
                            Usa Ctrl+F para buscar el nombre de la funci√≥n en la p√°gina. Si no encuentra 
                            nada, confirma que existe en el sistema pregunt√°ndole a un colega con m√°s permisos.
                        </p>
                    </div>

                    <div class="step-card">
                        <h5>Paso 2: Verificar tu rol</h5>
                        <p class="mb-0">
                            Preg√∫ntate: ¬øMi rol laboral requiere usar esa funci√≥n? Si eres maestro regular, 
                            probablemente no necesitas acceso a "Gestionar Unidades Formativas" (funci√≥n 
                            administrativa). Si crees que S√ç lo necesitas, pasa al siguiente paso.
                        </p>
                    </div>

                    <div class="step-card">
                        <h5>Paso 3: Solicitar acceso</h5>
                        <p class="mb-0">
                            Contacta a tu coordinador de formaci√≥n o a RRHH explicando POR QU√â necesitas 
                            acceso a esa funci√≥n espec√≠fica. Ellos evaluar√°n y, si es pertinente, te agregar√°n 
                            el permiso necesario. En 24-48 horas ver√°s la funci√≥n aparecer en tu √≠ndice.
                        </p>
                    </div>

                    <div class="info-box">
                        <strong><i class="bi bi-info-circle me-2"></i>Nota de seguridad:</strong>
                        El sistema de permisos NO es arbitrario. Existe para proteger datos sensibles 
                        (ej: informaci√≥n de desempe√±o de otros trabajadores) y para evitar ediciones 
                        accidentales de configuraciones cr√≠ticas. No te sientas mal si no ves todo - 
                        es por dise√±o organizacional.
                    </div>
                </div>

                <!-- SECCI√ìN 6: LAS M√âTRICAS -->
                <div class="manual-section">
                    <h3><i class="bi bi-bar-chart me-2"></i>Entendiendo las 4 M√©tricas del Resumen</h3>

                    <p>
                        Las m√©tricas te dan un "vistazo r√°pido" del estado general del m√≥dulo. Son opcionales 
                        (no se cargan autom√°ticamente) pero √∫tiles si quieres contexto antes de trabajar.
                    </p>

                    <h4>¬øQu√© significa cada m√©trica?</h4>

                    <div class="step-card">
                        <h5>1. Unidades Formativas (√çcono: üìö)</h5>
                        <p><strong>Qu√© es:</strong></p>
                        <p>Total de capacitaciones activas disponibles en el sistema.</p>
                        <p><strong>Para qu√© sirve:</strong></p>
                        <p class="mb-0">
                            Te da idea del tama√±o del "cat√°logo formativo" de la organizaci√≥n. Si dice "150", 
                            significa que hay 150 capacitaciones diferentes que se pueden asignar a trabajadores.
                        </p>
                    </div>

                    <div class="step-card">
                        <h5>2. Trabajadores con Rutas (√çcono: üë•)</h5>
                        <p><strong>Qu√© es:</strong></p>
                        <p>Cu√°ntos trabajadores tienen AL MENOS una unidad formativa asignada.</p>
                        <p><strong>Para qu√© sirve:</strong></p>
                        <p class="mb-0">
                            Indica la "cobertura" del sistema. Si tu organizaci√≥n tiene 500 trabajadores y 
                            este n√∫mero dice "350", significa que 70% del personal tiene ruta de formaci√≥n activa.
                        </p>
                    </div>

                    <div class="step-card">
                        <h5>3. Completitud Promedio (√çcono: ‚úÖ)</h5>
                        <p><strong>Qu√© es:</strong></p>
                        <p>Porcentaje promedio de avance formativo organizacional.</p>
                        <p><strong>C√≥mo se calcula:</strong></p>
                        <p>
                            (Total de unidades completadas √∑ Total de unidades asignadas) √ó 100
                        </p>
                        <p><strong>Para qu√© sirve:</strong></p>
                        <p class="mb-0">
                            Es el "term√≥metro de salud formativa" de la organizaci√≥n. 75%+ es excelente, 
                            50-74% es aceptable, <50% requiere atenci√≥n. Los coordinadores usan esto para 
                            detectar si la formaci√≥n est√° avanzando o estancada.
                        </p>
                    </div>

                    <div class="step-card">
                        <h5>4. Facilitadores Activos (√çcono: üé§)</h5>
                        <p><strong>Qu√© es:</strong></p>
                        <p>Cu√°ntos facilitadores (instructores) est√°n disponibles actualmente.</p>
                        <p><strong>Para qu√© sirve:</strong></p>
                        <p class="mb-0">
                            √ötil para coordinadores que planean nuevas capacitaciones. Si tienes 20 facilitadores 
                            activos pero necesitas dictar 50 unidades diferentes, sabes que algunos facilitadores 
                            tendr√°n que cubrir m√∫ltiples temas.
                        </p>
                    </div>

                    <h4>¬øDebo cargar las m√©tricas siempre?</h4>

                    <p><strong>Cu√°ndo S√ç cargarlas:</strong></p>
                    <ul>
                        <li>Si eres coordinador y necesitas contexto r√°pido antes de tomar decisiones</li>
                        <li>Si est√°s presentando el m√≥dulo a alguien (ej: nuevo empleado, jefe)</li>
                        <li>Si quieres monitorear tendencias (comparar n√∫meros de hoy vs. semana pasada)</li>
                    </ul>

                    <p><strong>Cu√°ndo NO cargarlas:</strong></p>
                    <ul>
                        <li>Si solo necesitas acceder a una funci√≥n espec√≠fica r√°pidamente</li>
                        <li>Si ya las cargaste hoy y no ha pasado suficiente tiempo para cambios significativos</li>
                        <li>Si est√°s en conexi√≥n lenta (cargar m√©tricas requiere m√∫ltiples consultas a base de datos)</li>
                    </ul>
                </div>

                <!-- SECCI√ìN 7: PREGUNTAS FRECUENTES -->
                <div class="manual-section">
                    <h3><i class="bi bi-question-circle me-2"></i>Preguntas Frecuentes</h3>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øPor qu√© solo veo 3 funciones en "Mi Formaci√≥n" y nada m√°s?
                        </div>
                        <div class="faq-answer">
                            Porque tienes rol de trabajador regular sin permisos administrativos en formaci√≥n. 
                            Esto es completamente normal. Las otras funciones son para coordinadores, RRHH, 
                            y administradores. Si necesitas acceso a m√°s funciones, solic√≠talo a tu jefe 
                            explicando por qu√© tu rol lo requiere.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            Antes ve√≠a m√°s funciones, ahora veo menos. ¬øQu√© pas√≥?
                        </div>
                        <div class="faq-answer">
                            Posibles causas: (1) Te cambiaron de rol y perdiste permisos, (2) Hubo una 
                            reorganizaci√≥n de permisos organizacional, (3) Tus permisos temporales expiraron 
                            (algunos se otorgan por tiempo limitado). Contacta a RRHH o tu coordinador de 
                            formaci√≥n para aclarar la situaci√≥n.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øPuedo personalizar qu√© funciones veo u ocultar las que no uso?
                        </div>
                        <div class="faq-answer">
                            No. La visibilidad de funciones est√° controlada por permisos del sistema, no por 
                            preferencias personales. Si hay funciones que nunca usas pero ves, simplemente 
                            ign√≥ralas - no afectan tu trabajo. La organizaci√≥n decidi√≥ darte acceso por alguna 
                            raz√≥n (quiz√° las uses ocasionalmente).
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øLas m√©tricas son en tiempo real?
                        </div>
                        <div class="faq-answer">
                            S√≠. Cada vez que haces clic en "Cargar M√©tricas", se calculan en ese momento con 
                            los datos m√°s recientes. Si algo cambi√≥ hace 5 minutos (ej: alguien complet√≥ una 
                            unidad), se reflejar√° en las m√©tricas.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øHay un l√≠mite de veces que puedo cargar las m√©tricas?
                        </div>
                        <div class="faq-answer">
                            No hay l√≠mite t√©cnico, pero evita abusar. Cargar m√©tricas consume recursos del 
                            servidor. Si las actualizas cada 10 segundos por curiosidad, est√°s generando 
                            carga innecesaria. Una vez por sesi√≥n de trabajo es suficiente (o cuando realmente 
                            necesites datos actualizados).
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øPuedo marcar esta p√°gina como inicio cuando abra SchoolNet?
                        </div>
                        <div class="faq-answer">
                            T√©cnicamente s√≠ (config√∫ralo en tu navegador), pero NO es recomendable. La p√°gina 
                            principal de SchoolNet (dashboard.html) es el punto de entrada dise√±ado que te da 
                            acceso a TODOS los m√≥dulos, no solo Formaci√≥n. Usa dashboard.html como inicio y 
                            desde ah√≠ navega a Formaci√≥n cuando lo necesites.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øQu√© hago si una funci√≥n que necesito est√° en mantenimiento o no funciona?
                        </div>
                        <div class="faq-answer">
                            Si al hacer clic en una tarjeta ves un mensaje de error o la p√°gina no carga, 
                            rep√≥rtalo usando el bot√≥n "Reportar Bug" en la parte inferior. Incluye qu√© funci√≥n 
                            intentabas usar y qu√© error viste. El equipo t√©cnico lo atender√° lo antes posible.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-chevron-right me-2"></i>
                            ¬øEsta p√°gina tiene versi√≥n m√≥vil?
                        </div>
                        <div class="faq-answer">
                            S√≠. La p√°gina es responsive - se adapta autom√°ticamente a tel√©fonos y tablets. 
                            En m√≥vil ver√°s las tarjetas apiladas verticalmente (una debajo de otra) en lugar 
                            de en columnas. La funcionalidad es exactamente la misma.
                        </div>
                    </div>

                </div>

                <!-- SECCI√ìN 8: MEJORES PR√ÅCTICAS -->
                <div class="manual-section">
                    <h3><i class="bi bi-award me-2"></i>Mejores Pr√°cticas de Uso</h3>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Familiar√≠zate con la estructura</strong>
                        <p class="mb-0 mt-2">
                            Dedica 5 minutos la primera vez a LEER todas las tarjetas de funciones que ves. 
                            Entiende qu√© hace cada una. Esto te ahorrar√° tiempo despu√©s - sabr√°s exactamente 
                            d√≥nde ir cuando necesites algo espec√≠fico.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Usa breadcrumbs para volver</strong>
                        <p class="mb-0 mt-2">
                            Cuando est√©s dentro de una funci√≥n, usa los "breadcrumbs" (las migas de pan en la 
                            parte superior: "Dashboard > Formaci√≥n > Funci√≥n X") para volver. No uses el bot√≥n 
                            "Atr√°s" del navegador - los breadcrumbs te llevan exactamente donde necesitas.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Carga m√©tricas solo cuando las necesites</strong>
                        <p class="mb-0 mt-2">
                            No hagas de cargar m√©tricas un "h√°bito autom√°tico". Solo c√°rgalas cuando realmente 
                            necesites esos n√∫meros para tomar una decisi√≥n o para presentar informaci√≥n. 
                            Ahorras tiempo y recursos del servidor.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Explora todas las funciones una vez</strong>
                        <p class="mb-0 mt-2">
                            Si tienes acceso a funciones administrativas, explora cada una al menos una vez 
                            (aunque sea superficialmente). Entender√°s mejor el m√≥dulo completo y descubrir√°s 
                            herramientas que no sab√≠as que exist√≠an.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Lee los manuales espec√≠ficos</strong>
                        <p class="mb-0 mt-2">
                            Este manual te da una visi√≥n general del √≠ndice, pero cada funci√≥n tiene su propio 
                            manual detallado. Cuando vayas a usar una funci√≥n por primera vez, SIEMPRE consulta 
                            su manual espec√≠fico. Est√° dise√±ado para ense√±arte paso a paso.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Marca favoritos estrat√©gicamente</strong>
                        <p class="mb-0 mt-2">
                            Si usas 2-3 funciones el 80% del tiempo, m√°rcalas como favoritos en tu navegador. 
                            Accede directamente a ellas sin pasar por el √≠ndice. Esto es especialmente √∫til 
                            para funciones como "Mi Ruta" o "Dashboard Global" que revisas diariamente.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Si encuentras un bug, rep√≥rtalo inmediatamente</strong>
                        <p class="mb-0 mt-2">
                            Si una tarjeta no funciona, muestra error, o te lleva a lugar equivocado, usa el 
                            bot√≥n "Reportar Bug" EN ESE MOMENTO. No lo dejes para despu√©s - lo olvidar√°s. 
                            Un reporte oportuno ayuda a que se corrija r√°pido y beneficia a todos.
                        </p>
                    </div>

                    <div class="success-box">
                        <strong><i class="bi bi-check-circle me-2"></i>Comparte conocimiento con colegas</strong>
                        <p class="mb-0 mt-2">
                            Si descubres un atajo, una funci√≥n √∫til, o una forma eficiente de usar el m√≥dulo, 
                            comp√°rtelo con tus compa√±eros de equipo. El conocimiento colectivo mejora la 
                            productividad de todos.
                        </p>
                    </div>
                </div>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Formaci√≥n',
            modulePath: 'training',
            pageTitle: 'P√°gina Principal del M√≥dulo (√çndice)',
            pagePath: 'index.html',
            moduleDescription: 'Punto de entrada centralizado a todas las funciones del m√≥dulo de formaci√≥n'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
