<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="25.01.21.16.00">
    
    <title>Manual - Consulta de la comunidad - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Tarjeta para reportar bugs - USANDO COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5,
        .bug-report-card h4 {
            color: white;
        }

        /* Bot√≥n flotante para reportar bugs - USANDO COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Estilos para secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.35rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e9ecef;
        }

        .step-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 50%;
            font-weight: 600;
            font-size: 0.9rem;
            margin-right: 0.75rem;
        }

        .tip-box {
            background: #e7f3ff;
            border-left: 4px solid #0d6efd;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .feature-icon {
            color: var(--system-primary-color, #1B365D);
            margin-right: 0.75rem;
            font-size: 1.1rem;
        }

        .tab-example {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .tab-example-title {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .tab-example-title i {
            margin-right: 0.5rem;
        }

        .faq-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.5rem;
        }

        .table-of-contents {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .table-of-contents h5 {
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 1rem;
        }

        .table-of-contents ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 0;
        }

        .table-of-contents li {
            padding: 0.35rem 0;
        }

        .table-of-contents a {
            color: #495057;
            text-decoration: none;
        }

        .table-of-contents a:hover {
            color: var(--system-primary-color, #1B365D);
            text-decoration: underline;
        }

        .filter-example {
            background: #e9ecef;
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            margin: 0.25rem;
            display: inline-block;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Consulta de la comunidad
                        </h1>
                        <p class="subtitle mb-0">Busca y consulta informaci√≥n de estudiantes, familias y trabajadores</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/general-tools/community-query.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-8 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Herramientas Generales</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Consulta de la comunidad</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- TABLA DE CONTENIDOS -->
                <div class="table-of-contents">
                    <h5><i class="bi bi-list-ul me-2"></i>Contenido del Manual</h5>
                    <ul>
                        <li><a href="#que-es"><i class="bi bi-chevron-right me-1"></i>¬øQu√© es Consulta de la comunidad?</a></li>
                        <li><a href="#caracteristicas"><i class="bi bi-chevron-right me-1"></i>Caracter√≠sticas principales</a></li>
                        <li><a href="#antes-comenzar"><i class="bi bi-chevron-right me-1"></i>Antes de comenzar</a></li>
                        <li><a href="#pestanas"><i class="bi bi-chevron-right me-1"></i>Las tres pesta√±as</a></li>
                        <li><a href="#estudiantes"><i class="bi bi-chevron-right me-1"></i>Pesta√±a Estudiantes</a></li>
                        <li><a href="#familias"><i class="bi bi-chevron-right me-1"></i>Pesta√±a Familias</a></li>
                        <li><a href="#trabajadores"><i class="bi bi-chevron-right me-1"></i>Pesta√±a Trabajadores</a></li>
                        <li><a href="#busqueda-filtros"><i class="bi bi-chevron-right me-1"></i>B√∫squeda y filtros</a></li>
                        <li><a href="#paginacion"><i class="bi bi-chevron-right me-1"></i>Navegaci√≥n y paginaci√≥n</a></li>
                        <li><a href="#buenas-practicas"><i class="bi bi-chevron-right me-1"></i>Buenas pr√°cticas</a></li>
                        <li><a href="#faq"><i class="bi bi-chevron-right me-1"></i>Preguntas frecuentes</a></li>
                    </ul>
                </div>

                <!-- ========================================== -->
                <!-- SECCI√ìN: ¬øQU√â ES? -->
                <!-- ========================================== -->
                <section id="que-es">
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© es Consulta de la comunidad?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            <strong>Consulta de la comunidad</strong> es una herramienta que permite buscar y 
                            visualizar informaci√≥n de todos los miembros de la instituci√≥n educativa.
                        </p>
                        <p>
                            Esta funci√≥n centraliza la informaci√≥n de:
                        </p>
                        <ul>
                            <li><strong>Estudiantes:</strong> Datos personales, curso, edad y fotograf√≠a</li>
                            <li><strong>Familias:</strong> Agrupaci√≥n de hijos con sus respectivos datos</li>
                            <li><strong>Trabajadores:</strong> Personal docente y administrativo con sus cargos</li>
                        </ul>
                        <p class="mb-0">
                            Es especialmente √∫til para coordinadores, docentes y personal administrativo que 
                            necesita acceder r√°pidamente a informaci√≥n de contacto o identificaci√≥n de personas.
                        </p>
                    </div>

                    <div class="info-box">
                        <strong><i class="bi bi-shield-check me-1"></i> Privacidad:</strong> 
                        Esta herramienta est√° disponible para todos los usuarios autenticados del sistema. 
                        La informaci√≥n mostrada es la registrada oficialmente en SchoolNet.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: CARACTER√çSTICAS -->
                <!-- ========================================== -->
                <section id="caracteristicas">
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas principales
                    </h2>

                    <div class="feature-item">
                        <i class="bi bi-search feature-icon"></i>
                        <div>
                            <strong>B√∫squeda r√°pida</strong><br>
                            <span class="text-muted">Encuentra personas escribiendo su nombre o apellido</span>
                        </div>
                    </div>

                    <div class="feature-item">
                        <i class="bi bi-funnel feature-icon"></i>
                        <div>
                            <strong>Filtros avanzados</strong><br>
                            <span class="text-muted">Filtra por estado, curso, g√©nero, divisi√≥n, cargo y m√°s</span>
                        </div>
                    </div>

                    <div class="feature-item">
                        <i class="bi bi-person-square feature-icon"></i>
                        <div>
                            <strong>Fotograf√≠as</strong><br>
                            <span class="text-muted">Visualiza la foto de cada persona para f√°cil identificaci√≥n</span>
                        </div>
                    </div>

                    <div class="feature-item">
                        <i class="bi bi-speedometer2 feature-icon"></i>
                        <div>
                            <strong>M√©tricas en tiempo real</strong><br>
                            <span class="text-muted">Contadores actualizados seg√∫n los filtros aplicados</span>
                        </div>
                    </div>

                    <div class="feature-item">
                        <i class="bi bi-house-heart feature-icon"></i>
                        <div>
                            <strong>Vista de familias</strong><br>
                            <span class="text-muted">Agrupa hermanos para ver la composici√≥n familiar completa</span>
                        </div>
                    </div>

                    <div class="feature-item">
                        <i class="bi bi-calculator feature-icon"></i>
                        <div>
                            <strong>C√°lculo de edad</strong><br>
                            <span class="text-muted">Muestra la edad exacta en a√±os, meses y d√≠as</span>
                        </div>
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: ANTES DE COMENZAR -->
                <!-- ========================================== -->
                <section id="antes-comenzar">
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>

                    <div class="step-card">
                        <h6><strong>Requisitos previos:</strong></h6>
                        <ul class="mb-0">
                            <li>Tener una cuenta activa en SchoolNet</li>
                            <li>Haber iniciado sesi√≥n en el sistema</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <strong><i class="bi bi-lightbulb me-1"></i> Nota:</strong> 
                        Esta herramienta est√° disponible para <strong>todos los usuarios autenticados</strong>. 
                        No requiere permisos especiales.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: LAS TRES PESTA√ëAS -->
                <!-- ========================================== -->
                <section id="pestanas">
                    <h2 class="section-title">
                        <i class="bi bi-layout-text-sidebar me-2"></i>
                        Las tres pesta√±as
                    </h2>

                    <p>La p√°gina est√° organizada en <strong>3 pesta√±as</strong> que puedes cambiar haciendo clic en cada una:</p>

                    <div class="tab-example">
                        <div class="tab-example-title">
                            <i class="bi bi-mortarboard text-primary"></i>
                            Estudiantes
                        </div>
                        <p class="mb-0 small">
                            Lista todos los estudiantes de la instituci√≥n. Es la pesta√±a que se muestra 
                            por defecto al abrir la p√°gina.
                        </p>
                    </div>

                    <div class="tab-example">
                        <div class="tab-example-title">
                            <i class="bi bi-house-heart text-danger"></i>
                            Familias
                        </div>
                        <p class="mb-0 small">
                            Agrupa a los estudiantes por familia, mostrando todos los hermanos 
                            que estudian en la instituci√≥n.
                        </p>
                    </div>

                    <div class="tab-example">
                        <div class="tab-example-title">
                            <i class="bi bi-person-badge text-success"></i>
                            Trabajadores
                        </div>
                        <p class="mb-0 small">
                            Lista el personal docente y administrativo con sus cargos, 
                            √°reas y datos de contacto.
                        </p>
                    </div>

                    <div class="info-box">
                        <strong><i class="bi bi-info-circle me-1"></i> Importante:</strong> 
                        Los datos de cada pesta√±a se cargan <strong>solo cuando la seleccionas por primera vez</strong>. 
                        Esto hace que la p√°gina sea m√°s r√°pida al inicio.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: PESTA√ëA ESTUDIANTES -->
                <!-- ========================================== -->
                <section id="estudiantes">
                    <h2 class="section-title">
                        <i class="bi bi-mortarboard me-2"></i>
                        Pesta√±a Estudiantes
                    </h2>

                    <div class="step-card">
                        <h6><strong>M√©tricas disponibles:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Total estudiantes:</strong> Cantidad seg√∫n filtros aplicados</li>
                            <li><strong>Masculino:</strong> Estudiantes de g√©nero masculino</li>
                            <li><strong>Femenino:</strong> Estudiantes de g√©nero femenino</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h6><strong>Filtros disponibles:</strong></h6>
                        <div>
                            <span class="filter-example"><i class="bi bi-toggle-on me-1"></i>Estado (Activos/Inactivos)</span>
                            <span class="filter-example"><i class="bi bi-book me-1"></i>Curso</span>
                            <span class="filter-example"><i class="bi bi-search me-1"></i>B√∫squeda por nombre</span>
                        </div>
                    </div>

                    <div class="step-card">
                        <h6><strong>Informaci√≥n en cada tarjeta:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Fotograf√≠a:</strong> Imagen del estudiante (si est√° disponible)</li>
                            <li><strong>Nombre completo:</strong> Nombres y apellidos</li>
                            <li><strong>Curso:</strong> Secci√≥n, grado y grupo actual</li>
                            <li><strong>Fecha de nacimiento:</strong> En formato d√≠a/mes/a√±o</li>
                            <li><strong>Edad:</strong> Calculada en a√±os, meses y d√≠as</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <strong><i class="bi bi-lightbulb me-1"></i> Tip:</strong> 
                        Por defecto se muestran solo estudiantes <strong>activos</strong>. 
                        Cambia el filtro de estado para ver estudiantes retirados o inactivos.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: PESTA√ëA FAMILIAS -->
                <!-- ========================================== -->
                <section id="familias">
                    <h2 class="section-title">
                        <i class="bi bi-house-heart me-2"></i>
                        Pesta√±a Familias
                    </h2>

                    <div class="step-card">
                        <h6><strong>M√©tricas disponibles:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Total familias:</strong> Familias con al menos un hijo activo</li>
                            <li><strong>Con 1 hijo:</strong> Familias con un solo estudiante</li>
                            <li><strong>Con 2 hijos:</strong> Familias con dos hermanos estudiando</li>
                            <li><strong>Con m√°s de 2 hijos:</strong> Familias con tres o m√°s hermanos</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h6><strong>Filtros disponibles:</strong></h6>
                        <div>
                            <span class="filter-example"><i class="bi bi-people me-1"></i>Cantidad de hijos</span>
                            <span class="filter-example"><i class="bi bi-book me-1"></i>Curso (de alg√∫n hijo)</span>
                            <span class="filter-example"><i class="bi bi-search me-1"></i>B√∫squeda por apellido familiar</span>
                        </div>
                    </div>

                    <div class="step-card">
                        <h6><strong>Informaci√≥n en cada tarjeta:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Nombre de familia:</strong> Apellido(s) de la familia</li>
                            <li><strong>Cantidad de hijos:</strong> N√∫mero de estudiantes activos</li>
                            <li><strong>Por cada hijo:</strong> Foto, nombre, curso y edad</li>
                        </ul>
                    </div>

                    <div class="info-box">
                        <strong><i class="bi bi-info-circle me-1"></i> Nota:</strong> 
                        Solo se muestran familias que tienen <strong>al menos un hijo activo</strong> en la instituci√≥n. 
                        Los hijos inactivos o retirados no aparecen en esta vista.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: PESTA√ëA TRABAJADORES -->
                <!-- ========================================== -->
                <section id="trabajadores">
                    <h2 class="section-title">
                        <i class="bi bi-person-badge me-2"></i>
                        Pesta√±a Trabajadores
                    </h2>

                    <div class="step-card">
                        <h6><strong>M√©tricas disponibles:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Total trabajadores activos:</strong> Personal actualmente vinculado</li>
                            <li><strong>Masculino:</strong> Trabajadores de g√©nero masculino</li>
                            <li><strong>Femenino:</strong> Trabajadores de g√©nero femenino</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h6><strong>Filtros disponibles:</strong></h6>
                        <div>
                            <span class="filter-example"><i class="bi bi-toggle-on me-1"></i>Estado</span>
                            <span class="filter-example"><i class="bi bi-gender-ambiguous me-1"></i>G√©nero</span>
                            <span class="filter-example"><i class="bi bi-diagram-3 me-1"></i>Divisi√≥n</span>
                            <span class="filter-example"><i class="bi bi-building me-1"></i>Centro de costo</span>
                            <span class="filter-example"><i class="bi bi-briefcase me-1"></i>Rol/Cargo</span>
                            <span class="filter-example"><i class="bi bi-search me-1"></i>B√∫squeda por nombre</span>
                        </div>
                    </div>

                    <div class="step-card">
                        <h6><strong>Informaci√≥n en cada tarjeta:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Fotograf√≠a:</strong> Imagen del trabajador (si est√° disponible)</li>
                            <li><strong>Nombre completo:</strong> Nombres y apellidos</li>
                            <li><strong>Correo electr√≥nico:</strong> Email institucional</li>
                            <li><strong>Cargo(s):</strong> Rol o roles asignados</li>
                            <li><strong>√Årea:</strong> Sub√°rea, √°rea o secci√≥n donde trabaja</li>
                            <li><strong>Fecha de ingreso:</strong> Cu√°ndo entr√≥ a la instituci√≥n</li>
                            <li><strong>Cumplea√±os:</strong> D√≠a y mes de nacimiento</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <strong><i class="bi bi-lightbulb me-1"></i> Tip:</strong> 
                        El campo de cumplea√±os es √∫til para organizar celebraciones o enviar felicitaciones. 
                        Solo muestra el d√≠a y mes, no el a√±o.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: B√öSQUEDA Y FILTROS -->
                <!-- ========================================== -->
                <section id="busqueda-filtros">
                    <h2 class="section-title">
                        <i class="bi bi-search me-2"></i>
                        B√∫squeda y filtros
                    </h2>

                    <div class="step-card">
                        <p><span class="step-number">1</span><strong>B√∫squeda por nombre</strong></p>
                        <p class="mb-0 ms-4">
                            Escribe en el campo de b√∫squeda para filtrar por nombre o apellido. 
                            La b√∫squeda es <strong>instant√°nea</strong> mientras escribes.
                        </p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">2</span><strong>Filtros de selecci√≥n</strong></p>
                        <p class="mb-0 ms-4">
                            Usa los men√∫s desplegables para filtrar por caracter√≠sticas espec√≠ficas. 
                            Los filtros se aplican <strong>inmediatamente</strong> al cambiar la selecci√≥n.
                        </p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">3</span><strong>Combinaci√≥n de filtros</strong></p>
                        <p class="mb-0 ms-4">
                            Puedes combinar varios filtros a la vez. Por ejemplo: buscar trabajadores 
                            de g√©nero femenino, en una divisi√≥n espec√≠fica, con un cargo determinado.
                        </p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">4</span><strong>Limpiar filtros</strong></p>
                        <p class="mb-0 ms-4">
                            Para quitar un filtro, selecciona la opci√≥n "Todos" o "Todas" en el men√∫ desplegable. 
                            Para limpiar la b√∫squeda, borra el texto del campo.
                        </p>
                    </div>

                    <div class="warning-box">
                        <strong><i class="bi bi-exclamation-triangle me-1"></i> Nota:</strong> 
                        Las m√©tricas (contadores) se actualizan autom√°ticamente seg√∫n los filtros aplicados, 
                        no muestran el total general sino el total filtrado.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: PAGINACI√ìN -->
                <!-- ========================================== -->
                <section id="paginacion">
                    <h2 class="section-title">
                        <i class="bi bi-arrow-left-right me-2"></i>
                        Navegaci√≥n y paginaci√≥n
                    </h2>

                    <div class="step-card">
                        <p>
                            Los resultados se muestran en p√°ginas de <strong>27 elementos</strong> cada una. 
                            En la parte inferior encontrar√°s:
                        </p>
                        <ul class="mb-0">
                            <li><strong>Informaci√≥n de paginaci√≥n:</strong> "Mostrando X-Y de Z" elementos</li>
                            <li><strong>Controles de p√°gina:</strong> Botones para navegar entre p√°ginas</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h6><strong>Controles disponibles:</strong></h6>
                        <ul class="mb-0">
                            <li><strong>Anterior/Siguiente:</strong> Avanza o retrocede una p√°gina</li>
                            <li><strong>N√∫meros de p√°gina:</strong> Salta directamente a una p√°gina espec√≠fica</li>
                            <li><strong>Primera/√öltima:</strong> Si hay muchas p√°ginas, aparecen atajos</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <strong><i class="bi bi-lightbulb me-1"></i> Tip:</strong> 
                        Si necesitas encontrar a alguien espec√≠fico, usa la b√∫squeda por nombre 
                        en lugar de navegar p√°gina por p√°gina. Es mucho m√°s r√°pido.
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: BUENAS PR√ÅCTICAS -->
                <!-- ========================================== -->
                <section id="buenas-practicas">
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas pr√°cticas
                    </h2>

                    <div class="step-card">
                        <p><span class="step-number">1</span><strong>Usa la b√∫squeda primero</strong></p>
                        <p class="mb-0 ms-4">Si conoces el nombre de la persona, escr√≠belo directamente en el buscador.</p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">2</span><strong>Combina filtros para resultados precisos</strong></p>
                        <p class="mb-0 ms-4">Si buscas personas con caracter√≠sticas espec√≠ficas, usa m√∫ltiples filtros.</p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">3</span><strong>Verifica el estado seleccionado</strong></p>
                        <p class="mb-0 ms-4">Si no encuentras a alguien, revisa si el filtro de estado est√° en "Activos" o "Inactivos".</p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">4</span><strong>Usa Familias para ver hermanos</strong></p>
                        <p class="mb-0 ms-4">Si necesitas saber si un estudiante tiene hermanos, la pesta√±a Familias es m√°s √∫til.</p>
                    </div>

                    <div class="step-card">
                        <p><span class="step-number">5</span><strong>Respeta la privacidad</strong></p>
                        <p class="mb-0 ms-4">La informaci√≥n mostrada es para uso institucional. Maneja los datos con responsabilidad.</p>
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- SECCI√ìN: FAQ -->
                <!-- ========================================== -->
                <section id="faq">
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <p class="faq-question">¬øPor qu√© no aparece la foto de una persona?</p>
                        <p class="mb-0">
                            Las fotos se cargan desde un servidor externo. Si no aparece, puede ser que:
                            no se ha subido una foto para esa persona, o hay un problema temporal de conexi√≥n.
                            En su lugar ver√°s un √≠cono de persona.
                        </p>
                    </div>

                    <div class="faq-item">
                        <p class="faq-question">¬øPuedo ver estudiantes retirados?</p>
                        <p class="mb-0">
                            S√≠. En la pesta√±a de Estudiantes, cambia el filtro de <strong>Estado</strong> 
                            de "Activos" a "Inactivos" para ver estudiantes que ya no est√°n en la instituci√≥n.
                        </p>
                    </div>

                    <div class="faq-item">
                        <p class="faq-question">¬øPor qu√© una familia no aparece en la lista?</p>
                        <p class="mb-0">
                            La pesta√±a de Familias solo muestra familias con <strong>al menos un hijo activo</strong>. 
                            Si todos los hijos de una familia est√°n inactivos, la familia no aparecer√°.
                        </p>
                    </div>

                    <div class="faq-item">
                        <p class="faq-question">¬øC√≥mo s√© la edad exacta de un estudiante?</p>
                        <p class="mb-0">
                            En la tarjeta de cada estudiante se muestra la edad calculada autom√°ticamente 
                            en formato "X a√±os, Y meses, Z d√≠as" basada en su fecha de nacimiento.
                        </p>
                    </div>

                    <div class="faq-item">
                        <p class="faq-question">¬øPor qu√© un trabajador aparece sin cargo?</p>
                        <p class="mb-0">
                            Algunos trabajadores pueden no tener un cargo asignado en el sistema. 
                            En ese caso ver√°s "Sin cargo" en su tarjeta. Contacta a Recursos Humanos 
                            si crees que deber√≠a tener un cargo asignado.
                        </p>
                    </div>

                    <div class="faq-item">
                        <p class="faq-question">¬øPuedo exportar esta informaci√≥n?</p>
                        <p class="mb-0">
                            Esta herramienta es solo de consulta visual. Para exportar listados de 
                            estudiantes, familias o trabajadores, consulta con el administrador del sistema 
                            sobre las herramientas de reportes disponibles.
                        </p>
                    </div>

                    <div class="faq-item">
                        <p class="faq-question">¬øCada cu√°nto se actualizan los datos?</p>
                        <p class="mb-0">
                            Los datos se cargan en tiempo real desde la base de datos cada vez que 
                            abres una pesta√±a o aplicas un filtro. Siempre ver√°s la informaci√≥n m√°s actualizada.
                        </p>
                    </div>
                </section>

                <!-- ========================================== -->
                <!-- TARJETA PARA REPORTAR BUGS -->
                <!-- ========================================== -->
                <div class="bug-report-card mt-5">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS - COLOR PRIMARIO -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Herramientas Generales',
            modulePath: 'general-tools',
            pageTitle: 'Consulta de la comunidad',
            pagePath: 'community-query.html',
            moduleDescription: 'Busca y consulta informaci√≥n de estudiantes, familias y trabajadores'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
