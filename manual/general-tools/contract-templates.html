<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSIÓN DE LA PÁGINA -->
    <meta name="page-version" content="25.11.09.16.45">
    
    <title>Manual - Herramientas Generales - Plantillas de Contratos - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSIÓN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .bug-report-card {
            background: var(--system-secondary-color, #667eea);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #dc3545) !important;
            border-color: var(--system-primary-color, #dc3545) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 1rem;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .success-box {
            background: #d1e7dd;
            border-left: 4px solid #198754;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .danger-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #198754;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .example-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .variable-example {
            font-family: monospace;
            background: #e7f3ff;
            color: #0066cc;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.9rem;
        }

        .workflow-divider {
            border-top: 3px solid #e9ecef;
            margin: 3rem 0 2rem 0;
            position: relative;
        }

        .workflow-divider::after {
            content: "▼";
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 0 1rem;
            color: #6c757d;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Herramientas Generales
                        </h1>
                        <p class="subtitle mb-0">Plantillas y Mis Contratos</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/general-tools/contract-templates.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al Módulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACIÓN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong>Herramientas Generales</strong></h5>
                            <p class="text-muted mb-0 small">Plantillas y Mis Contratos</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras algún problema,<br>
                                puedes reportarlo usando el botón de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- CONTENIDO DEL MANUAL -->

                <!-- Descripción General -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¿Qué es Plantillas y Mis Contratos?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            Esta herramienta te permite <strong>crear plantillas de documentos reutilizables</strong> 
                            con campos variables (como nombres, fechas, montos) y luego <strong>generar contratos 
                            personalizados en PDF</strong> rellenando esos campos según cada caso específico.
                        </p>
                        
                        <p>
                            Funciona en dos etapas: primero creas una plantilla con el formato y texto base del 
                            contrato, marcando las partes que variarán con un formato especial. Luego, cada vez 
                            que necesites un contrato nuevo, simplemente llenas los datos específicos y el sistema 
                            genera automáticamente un PDF profesional listo para usar.
                        </p>

                        <div class="info-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Casos de uso comunes:</strong>
                            <ul class="mb-0 mt-2">
                                <li><strong>Recursos Humanos:</strong> Contratos laborales, prestación de servicios, confidencialidad</li>
                                <li><strong>Administrativos:</strong> Contratos con proveedores, arrendamientos, convenios</li>
                                <li><strong>Académicos:</strong> Acuerdos de matrícula, compromisos disciplinarios</li>
                                <li><strong>Legales:</strong> Cualquier documento repetitivo con campos personalizables</li>
                            </ul>
                        </div>

                        <div class="success-box">
                            <strong><i class="bi bi-check-circle me-2"></i>Ventajas principales:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Elimina la necesidad de editar manualmente cada contrato</li>
                                <li>Garantiza consistencia en el formato y redacción</li>
                                <li>Reduce errores humanos al copiar y pegar información</li>
                                <li>Genera PDFs profesionales automáticamente</li>
                                <li>Permite que múltiples usuarios usen las mismas plantillas</li>
                                <li>Mantiene historial de todos los contratos generados</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Características principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Características principales
                    </h2>
                    
                    <div class="step-card">
                        <h5>La herramienta se divide en dos secciones:</h5>

                        <div class="mb-4">
                            <h6><i class="bi bi-file-earmark-text me-2 text-primary"></i>Sección 1: Plantillas de Contratos</h6>
                            <ul>
                                <li><strong>Crear plantillas:</strong> Define el contenido base con variables reemplazables</li>
                                <li><strong>Editor de texto enriquecido:</strong> Formato básico (negritas, cursivas, listas)</li>
                                <li><strong>Sistema de variables:</strong> Marca campos con formato <span class="variable-example">$$nombreVariable$$</span></li>
                                <li><strong>Detección automática:</strong> El sistema identifica qué variables contiene cada plantilla</li>
                                <li><strong>Edición colaborativa:</strong> Todos ven todas las plantillas, pero solo puedes editar las tuyas</li>
                                <li><strong>Búsqueda y filtros:</strong> Encuentra rápidamente plantillas por nombre</li>
                            </ul>
                        </div>

                        <div class="mb-4">
                            <h6><i class="bi bi-file-pdf me-2 text-danger"></i>Sección 2: Mis Contratos Generados</h6>
                            <ul>
                                <li><strong>Historial personal:</strong> Solo ves los contratos que TÚ generaste</li>
                                <li><strong>Categorización:</strong> Organiza contratos por tipo o categoría</li>
                                <li><strong>Fecha de vencimiento:</strong> Registra cuándo finaliza cada contrato</li>
                                <li><strong>Vista y descarga de PDFs:</strong> Accede a tus documentos cuando los necesites</li>
                                <li><strong>Notas opcionales:</strong> Agrega información adicional a cada contrato</li>
                                <li><strong>Filtros avanzados:</strong> Busca por categoría, plantilla o nombre</li>
                            </ul>
                        </div>

                        <h5 class="mt-4">Funcionalidades especiales:</h5>
                        <ul class="feature-list">
                            <li><strong>Variables inteligentes:</strong> El sistema reconoce automáticamente variables de texto largo</li>
                            <li><strong>Generación rápida de PDF:</strong> Los contratos se crean en segundos</li>
                            <li><strong>Almacenamiento en la nube:</strong> Los PDFs se guardan de forma segura</li>
                            <li><strong>Sin conflictos de nombres:</strong> El sistema previene duplicados automáticamente</li>
                            <li><strong>Métricas visuales:</strong> Dashboard con conteo de plantillas y contratos</li>
                            <li><strong>Limpieza de formato:</strong> Herramienta para eliminar formato no deseado de texto pegado</li>
                        </ul>
                    </div>
                </section>

                <!-- Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5>Requisitos previos:</h5>
                        <ul>
                            <li>Tener el permiso "Gestionar plantillas de contratos" asignado</li>
                            <li>Conocimiento básico de procesamiento de texto (negritas, listas, etc.)</li>
                            <li>Tener claro qué tipo de contratos necesitas crear frecuentemente</li>
                            <li>Contar con el texto base del contrato que quieres convertir en plantilla</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Conceptos clave que debes entender:</strong>
                            
                            <p class="mt-2 mb-2"><strong>1. Plantilla:</strong></p>
                            <p class="ms-3 mb-2">
                                Es el "molde" base del contrato. Contiene todo el texto fijo y marca con variables 
                                las partes que cambiarán en cada caso.
                            </p>

                            <p class="mt-2 mb-2"><strong>2. Variable:</strong></p>
                            <p class="ms-3 mb-2">
                                Es un campo que se reemplazará con información específica al generar cada contrato. 
                                Se escribe así: <span class="variable-example">$$nombreVariable$$</span>
                            </p>

                            <p class="mt-2 mb-2"><strong>3. Contrato Generado:</strong></p>
                            <p class="ms-3 mb-0">
                                Es el PDF final con todas las variables ya reemplazadas por los datos reales.
                            </p>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante sobre las variables:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Las variables DEBEN escribirse con el formato exacto: <span class="variable-example">$$nombreVariable$$</span></li>
                                <li>No funcionarán si usas otro formato como $nombre$, $$nombre$ o [nombre]</li>
                                <li>Los nombres de variables NO deben tener espacios (usa guion bajo: <span class="variable-example">$$nombre_completo$$</span>)</li>
                                <li>Las variables son sensibles a mayúsculas/minúsculas</li>
                            </ul>
                        </div>

                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Tip importante sobre texto largo:</strong>
                            <p class="mb-0 mt-2">
                                Si una variable terminará siendo un texto extenso (como descripción de obligaciones, 
                                objeto del contrato, etc.), nómbrala con terminaciones como <span class="variable-example">_large</span>, 
                                <span class="variable-example">_texto</span>, o usando palabras como "condicion", "descripcion", 
                                "detalle". El sistema automáticamente mostrará un campo de texto amplio al generar el contrato.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- PARTE 1: CREAR Y GESTIONAR PLANTILLAS -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        PARTE 1: Crear y gestionar plantillas
                    </h2>

                    <!-- Paso 1 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Preparar el texto base de tu contrato
                        </h4>
                        
                        <p>
                            Antes de entrar al sistema, ten listo el texto completo de tu contrato. Identifica 
                            qué partes cambiarán en cada caso (nombres, fechas, montos, etc.).
                        </p>

                        <div class="example-box">
                            <strong>Ejemplo de texto base:</strong>
                            <div class="mt-2 p-3" style="background: white; border: 1px solid #dee2e6; border-radius: 4px;">
                                <p class="mb-2"><strong>CONTRATO DE PRESTACIÓN DE SERVICIOS</strong></p>
                                <p class="mb-2">
                                    Entre <strong>[AQUÍ IRA LA VARIABLE]</strong>, en adelante EL CONTRATANTE, 
                                    y <strong>[AQUÍ IRA LA VARIABLE]</strong>, en adelante EL CONTRATISTA, 
                                    se celebra el presente contrato...
                                </p>
                                <p class="mb-2">
                                    <strong>OBJETO:</strong> El contratista se compromete a <strong>[AQUÍ IRA LA VARIABLE]</strong>
                                </p>
                                <p class="mb-0">
                                    <strong>VALOR:</strong> <strong>[AQUÍ IRA LA VARIABLE]</strong> pesos colombianos.
                                </p>
                            </div>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Recomendaciones:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Ten el texto en un documento de Word o Google Docs</li>
                                <li>Marca con color o resaltado las partes que serán variables</li>
                                <li>Define nombres descriptivos para cada variable</li>
                                <li>Agrupa variables similares (ej: todas las de fechas juntas)</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Paso 2 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Crear una nueva plantilla
                        </h4>
                        
                        <p><strong>Para crear una plantilla:</strong></p>
                        <ol>
                            <li>En la sección "Plantillas de Contratos", haz clic en el botón "Nueva Plantilla"</li>
                            <li>Se abrirá un formulario grande con editor de texto</li>
                        </ol>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                            El formulario tiene un cuadro azul con información sobre variables. Léelo antes de comenzar.
                        </div>
                    </div>

                    <!-- Paso 3 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Escribir el nombre de la plantilla
                        </h4>
                        
                        <p>
                            En el primer campo, escribe un nombre descriptivo para tu plantilla. Este nombre 
                            ayudará a identificarla después.
                        </p>

                        <div class="example-box">
                            <strong>Ejemplos de buenos nombres:</strong>
                            <ul class="mb-0 mt-2">
                                <li>"Contrato de trabajo indefinido"</li>
                                <li>"Prestación de servicios profesionales"</li>
                                <li>"Acuerdo de confidencialidad estándar"</li>
                                <li>"Contrato de arrendamiento oficina"</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante:</strong>
                            No puedes usar el mismo nombre dos veces. El sistema te avisará si intentas crear 
                            una plantilla con un nombre ya existente.
                        </div>
                    </div>

                    <!-- Paso 4 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Escribir o pegar el contenido
                        </h4>
                        
                        <p>
                            En el editor de texto (el cuadro blanco grande), escribe o pega el contenido de tu contrato.
                        </p>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>MUY IMPORTANTE al pegar desde Word o Google Docs:</strong>
                            <p class="mt-2 mb-2">
                                Si copias texto desde Word o Google Docs, usa <strong>Pegar sin formato</strong> 
                                para evitar problemas:
                            </p>
                            <ul class="mb-0">
                                <li><strong>Windows/Linux:</strong> <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>V</kbd></li>
                                <li><strong>Mac:</strong> <kbd>⌘</kbd>+<kbd>Shift</kbd>+<kbd>V</kbd></li>
                            </ul>
                            <p class="mt-2 mb-0">
                                Si ya pegaste con formato y ves problemas, usa el botón "Limpiar Todo el Formato" 
                                (explicado más adelante).
                            </p>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Formato disponible:</strong>
                            <p class="mb-0 mt-2">
                                El editor tiene una barra de herramientas arriba con opciones básicas: negritas, 
                                cursivas, subrayado, alineación, listas numeradas y listas con viñetas.
                            </p>
                        </div>
                    </div>

                    <!-- Paso 5 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">5</span>
                            Insertar variables
                        </h4>
                        
                        <p>Ahora viene la parte clave: marcar qué partes del texto cambiarán en cada contrato.</p>

                        <p><strong>Tienes dos formas de insertar variables:</strong></p>

                        <h6 class="mt-3">Opción A: Escribir manualmente</h6>
                        <ol>
                            <li>Coloca el cursor donde quieres insertar la variable</li>
                            <li>Escribe exactamente: <span class="variable-example">$$nombreVariable$$</span></li>
                            <li>Reemplaza "nombreVariable" por el nombre que quieras dar</li>
                        </ol>

                        <h6 class="mt-3">Opción B: Usar el botón "Insertar Variable"</h6>
                        <ol>
                            <li>Coloca el cursor donde quieres insertar la variable</li>
                            <li>Haz clic en el botón "Insertar Variable" (arriba del editor)</li>
                            <li>Aparecerá una ventana pequeña</li>
                            <li>Escribe el nombre de la variable (sin los símbolos $$)</li>
                            <li>Haz clic en "Insertar"</li>
                            <li>El sistema agregará automáticamente <span class="variable-example">$$nombreVariable$$</span></li>
                        </ol>

                        <div class="example-box">
                            <strong>Ejemplos de variables comunes:</strong>
                            <ul class="mb-0 mt-2">
                                <li><span class="variable-example">$$contratante$$</span> - Nombre de quien contrata</li>
                                <li><span class="variable-example">$$contratista$$</span> - Nombre de quien presta el servicio</li>
                                <li><span class="variable-example">$$identificacion$$</span> - Número de documento</li>
                                <li><span class="variable-example">$$salario$$</span> - Monto a pagar</li>
                                <li><span class="variable-example">$$cargo$$</span> - Puesto de trabajo</li>
                                <li><span class="variable-example">$$fecha_inicio$$</span> - Fecha de inicio del contrato</li>
                                <li><span class="variable-example">$$objeto_large$$</span> - Descripción extensa del objeto contractual</li>
                                <li><span class="variable-example">$$condiciones_texto$$</span> - Condiciones detalladas</li>
                            </ul>
                        </div>

                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Variables de texto largo:</strong>
                            <p class="mb-2 mt-2">
                                Para campos que contendrán mucho texto (más de una línea), usa estas terminaciones 
                                o palabras clave en el nombre:
                            </p>
                            <ul class="mb-0">
                                <li><strong>Terminaciones:</strong> <span class="variable-example">_large</span>, 
                                <span class="variable-example">_largo</span>, <span class="variable-example">_texto</span></li>
                                <li><strong>Palabras clave:</strong> "condicion", "obligacion", "descripcion", "detalle", 
                                "alcance", "objeto"</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                <strong>Ejemplo:</strong> <span class="variable-example">$$obligaciones_empleado_large$$</span> 
                                se mostrará como un cuadro de texto amplio al generar el contrato.
                            </p>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-eye me-2"></i>Detección automática:</strong>
                            <p class="mb-0 mt-2">
                                Mientras escribes, el sistema detecta automáticamente las variables y las muestra 
                                en un cuadro gris debajo del editor. Así puedes verificar que están bien escritas.
                            </p>
                        </div>
                    </div>

                    <!-- Paso 6 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">6</span>
                            Limpiar formato si es necesario
                        </h4>
                        
                        <p>
                            Si pegaste texto desde Word o Google Docs y ves formato extraño o el texto se ve mal, 
                            puedes limpiarlo.
                        </p>

                        <p><strong>Para limpiar el formato:</strong></p>
                        <ol>
                            <li>Haz clic en el botón "Limpiar Todo el Formato" (arriba del editor)</li>
                            <li>Aparecerá una confirmación preguntando si estás seguro</li>
                            <li>Confirma y el sistema eliminará TODO el formato</li>
                            <li>Se conservará solo el texto plano y las variables</li>
                            <li>Tendrás que aplicar nuevamente negritas, listas, etc. si las necesitas</li>
                        </ol>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Precaución:</strong>
                            Esta acción NO se puede deshacer. Úsala solo si realmente tienes problemas de formato.
                        </div>
                    </div>

                    <!-- Paso 7 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">7</span>
                            Guardar la plantilla
                        </h4>
                        
                        <p><strong>Para guardar:</strong></p>
                        <ol>
                            <li>Verifica que el nombre de la plantilla esté correcto</li>
                            <li>Revisa que el contenido esté completo</li>
                            <li>Confirma que todas las variables estén bien escritas (revisa el cuadro gris de detección)</li>
                            <li>Haz clic en el botón "Guardar Plantilla" (abajo a la derecha)</li>
                            <li>El sistema validará y guardará la plantilla</li>
                            <li>Verás un mensaje de éxito</li>
                            <li>La plantilla aparecerá en la lista principal</li>
                        </ol>

                        <div class="success-box">
                            <strong><i class="bi bi-check-circle me-2"></i>¡Listo!</strong>
                            Tu plantilla está creada y lista para usar. Ahora cualquier usuario con acceso podrá 
                            usarla para generar contratos.
                        </div>
                    </div>

                    <!-- Paso 8 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">8</span>
                            Editar una plantilla existente
                        </h4>
                        
                        <p>
                            Solo puedes editar plantillas que TÚ creaste. Las plantillas de otros usuarios son 
                            de solo lectura para ti.
                        </p>

                        <p><strong>Para editar:</strong></p>
                        <ol>
                            <li>En la tabla de plantillas, busca la que quieres modificar</li>
                            <li>En la columna "Creado por", verás una marca "✓ Yo" si la creaste tú</li>
                            <li>Haz clic en el botón de editar (ícono de lápiz)</li>
                            <li>Se abrirá el mismo formulario pero con los datos cargados</li>
                            <li>Realiza los cambios necesarios</li>
                            <li>Haz clic en "Guardar Plantilla"</li>
                        </ol>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante al editar:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Los contratos YA generados con esta plantilla NO se modificarán</li>
                                <li>Solo los contratos NUEVOS usarán la versión actualizada</li>
                                <li>Ten cuidado al cambiar nombres de variables si ya existen contratos generados</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Paso 9 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">9</span>
                            Eliminar una plantilla
                        </h4>
                        
                        <p>
                            Solo puedes eliminar plantillas que TÚ creaste y que NO tengan contratos generados.
                        </p>

                        <p><strong>Para eliminar:</strong></p>
                        <ol>
                            <li>En la tabla de plantillas, ubica la que quieres eliminar</li>
                            <li>Haz clic en el botón de eliminar (ícono de papelera)</li>
                            <li>Aparecerá una confirmación preguntando si estás seguro</li>
                            <li>Si la plantilla tiene contratos generados, el sistema te avisará y NO permitirá eliminarla</li>
                            <li>Si no tiene contratos, confirma y la plantilla se eliminará</li>
                        </ol>

                        <div class="danger-box">
                            <strong><i class="bi bi-exclamation-octagon me-2"></i>No se puede deshacer:</strong>
                            La eliminación es permanente. Si eliminas una plantilla por error, tendrás que crearla de nuevo.
                        </div>
                    </div>
                </section>

                <!-- DIVISOR DE FLUJO -->
                <div class="workflow-divider"></div>

                <!-- PARTE 2: GENERAR CONTRATOS -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        PARTE 2: Generar contratos desde plantillas
                    </h2>

                    <!-- Paso 1 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Seleccionar la plantilla
                        </h4>
                        
                        <p>
                            En la tabla de "Plantillas de Contratos", busca la plantilla que necesitas usar.
                        </p>

                        <p><strong>Para encontrarla rápidamente:</strong></p>
                        <ul>
                            <li>Usa el cuadro de búsqueda en la esquina superior derecha</li>
                            <li>Escribe parte del nombre de la plantilla</li>
                            <li>La tabla se filtrará automáticamente</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Nota:</strong>
                            Verás TODAS las plantillas del sistema, tanto las que creaste tú como las de otros usuarios. 
                            Todas están disponibles para generar contratos.
                        </div>
                    </div>

                    <!-- Paso 2 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Iniciar la generación
                        </h4>
                        
                        <p><strong>Para generar un contrato:</strong></p>
                        <ol>
                            <li>En la fila de la plantilla que necesitas, haz clic en el botón verde "Generar"</li>
                            <li>Se abrirá un formulario con todos los campos que debes completar</li>
                        </ol>
                    </div>

                    <!-- Paso 3 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Completar información general del contrato
                        </h4>
                        
                        <p>En la parte superior del formulario verás tres campos obligatorios:</p>

                        <h6 class="mt-3">1. Categoría</h6>
                        <p>
                            Selecciona la categoría que corresponda al tipo de contrato. Esto ayuda a organizar 
                            tus contratos después.
                        </p>
                        <div class="example-box">
                            <strong>Ejemplos de categorías típicas:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Contratos laborales</li>
                                <li>Prestación de servicios</li>
                                <li>Confidencialidad</li>
                                <li>Arrendamientos</li>
                                <li>Convenios institucionales</li>
                            </ul>
                        </div>

                        <h6 class="mt-3">2. Nombre del Contrato</h6>
                        <p>
                            Escribe un nombre descriptivo que te permita identificar este contrato específico después.
                        </p>
                        <div class="example-box">
                            <strong>Ejemplos de buenos nombres:</strong>
                            <ul class="mb-0 mt-2">
                                <li>"Contrato Juan Pérez - Docente Matemáticas - 2025"</li>
                                <li>"Servicios de mantenimiento - Empresa XYZ - Enero"</li>
                                <li>"Confidencialidad - Proveedor ABC"</li>
                            </ul>
                        </div>

                        <h6 class="mt-3">3. Fecha de Finalización del Contrato</h6>
                        <p>
                            Indica cuándo termina la vigencia de este contrato. El sistema te alertará visualmente 
                            si un contrato está vencido.
                        </p>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante:</strong>
                            Todos estos campos son obligatorios. No podrás generar el contrato si dejas alguno vacío.
                        </div>
                    </div>

                    <!-- Paso 4 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Llenar los datos de las variables
                        </h4>
                        
                        <p>
                            Después de los campos generales, verás una sección "Datos de la Plantilla" con un 
                            campo por cada variable que tenga la plantilla.
                        </p>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Tipos de campos que verás:</strong>
                            
                            <p class="mt-2 mb-2"><strong>Campos de texto corto (una línea):</strong></p>
                            <p class="ms-3 mb-2">
                                Para variables normales como nombres, montos, fechas cortas, etc.
                            </p>

                            <p class="mt-2 mb-2"><strong>Campos de texto largo (textarea):</strong></p>
                            <p class="ms-3 mb-0">
                                Para variables que terminan en <span class="variable-example">_large</span>, 
                                <span class="variable-example">_texto</span>, o contienen palabras como 
                                "condicion", "descripcion", "detalle", "objeto".
                            </p>
                        </div>

                        <p class="mt-3"><strong>Para completar los campos:</strong></p>
                        <ol>
                            <li>Lee cada etiqueta cuidadosamente (el sistema convierte el nombre de la variable en un título legible)</li>
                            <li>Escribe la información correspondiente en cada campo</li>
                            <li>Para campos de texto largo, puedes escribir párrafos completos</li>
                            <li>Todos los campos marcados con asterisco rojo son obligatorios</li>
                        </ol>

                        <div class="example-box">
                            <strong>Ejemplo de transformación de variables:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Variable <span class="variable-example">$$contratante$$</span> → Campo "Contratante"</li>
                                <li>Variable <span class="variable-example">$$fecha_inicio$$</span> → Campo "Fecha Inicio"</li>
                                <li>Variable <span class="variable-example">$$objeto_large$$</span> → Campo "Objeto" (con cuadro de texto grande)</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Validación:</strong>
                            El sistema NO te permitirá generar el PDF si dejas campos obligatorios vacíos. 
                            Verás un mensaje indicando qué falta completar.
                        </div>
                    </div>

                    <!-- Paso 5 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">5</span>
                            Agregar notas opcionales
                        </h4>
                        
                        <p>
                            Al final del formulario hay un campo de "Notas" donde puedes agregar información 
                            adicional que quieras recordar sobre este contrato.
                        </p>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Sobre las notas:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Este campo es completamente opcional</li>
                                <li>Las notas NO aparecen en el PDF generado</li>
                                <li>Solo sirven como recordatorio personal</li>
                                <li>Se muestran en la tabla de "Mis Contratos Generados"</li>
                            </ul>
                        </div>

                        <div class="example-box">
                            <strong>Ejemplos de notas útiles:</strong>
                            <ul class="mb-0 mt-2">
                                <li>"Renovación pendiente en diciembre"</li>
                                <li>"Coordinar firma con Recursos Humanos"</li>
                                <li>"Contrato temporal mientras se define cargo definitivo"</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Paso 6 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">6</span>
                            Generar el PDF
                        </h4>
                        
                        <p><strong>Para generar el PDF:</strong></p>
                        <ol>
                            <li>Revisa que todos los campos obligatorios estén completos</li>
                            <li>Verifica que la información sea correcta (no podrás editarla después)</li>
                            <li>Haz clic en el botón verde "Generar PDF" (abajo a la derecha)</li>
                            <li>Verás una pantalla de carga que dice "Generando PDF..."</li>
                            <li>El proceso puede tardar unos segundos</li>
                            <li>Cuando termine, verás un mensaje de éxito</li>
                            <li>El contrato aparecerá automáticamente en tu sección "Mis Contratos Generados"</li>
                        </ol>

                        <div class="success-box">
                            <strong><i class="bi bi-check-circle me-2"></i>¿Qué sucede al generar?</strong>
                            <ul class="mb-0 mt-2">
                                <li>El sistema reemplaza todas las variables con los datos que ingresaste</li>
                                <li>Crea un PDF profesional con el contenido completo</li>
                                <li>Guarda el PDF en la nube de forma segura</li>
                                <li>Registra la información del contrato en la base de datos</li>
                                <li>Todo esto sucede automáticamente en segundos</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Sobre el PDF generado:</strong>
                            <ul class="mb-0 mt-2">
                                <li>El PDF se guarda con un nombre único para evitar conflictos</li>
                                <li>El formato es A4 estándar</li>
                                <li>Mantiene el formato básico de la plantilla (negritas, listas, etc.)</li>
                                <li>Puedes descargarlo, verlo o compartirlo cuando necesites</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- PARTE 3: GESTIONAR CONTRATOS GENERADOS -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        PARTE 3: Gestionar tus contratos generados
                    </h2>

                    <!-- Paso 1 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">1</span>
                            Ver tus contratos generados
                        </h4>
                        
                        <p>
                            En la sección "Mis Contratos Generados" (abajo en la página) verás una tabla con 
                            todos los contratos que TÚ has creado.
                        </p>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Privacidad:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Solo ves los contratos que TÚ generaste</li>
                                <li>No verás contratos creados por otros usuarios</li>
                                <li>Cada usuario tiene su propio historial personal</li>
                            </ul>
                        </div>

                        <p class="mt-3"><strong>Información mostrada en la tabla:</strong></p>
                        <ul>
                            <li><strong>Categoría:</strong> Tipo de contrato (aparece como etiqueta de color)</li>
                            <li><strong>Plantilla:</strong> Qué plantilla se usó para generarlo</li>
                            <li><strong>Nombre del Contrato:</strong> El nombre que le diste al generarlo</li>
                            <li><strong>Fecha Fin:</strong> Cuándo vence el contrato</li>
                            <li><strong>Acciones:</strong> Botones para ver, descargar o eliminar</li>
                        </ul>

                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Contratos vencidos:</strong>
                            Si un contrato ya pasó su fecha de finalización, verás una etiqueta roja que dice "Vencido". 
                            Esto es solo informativo, el PDF seguirá disponible.
                        </div>
                    </div>

                    <!-- Paso 2 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">2</span>
                            Usar los filtros
                        </h4>
                        
                        <p>
                            Si tienes muchos contratos, usa los filtros para encontrar lo que necesitas rápidamente.
                        </p>

                        <p><strong>Filtros disponibles:</strong></p>
                        
                        <h6 class="mt-3">1. Filtro por Categoría</h6>
                        <p>Selecciona una categoría para ver solo contratos de ese tipo.</p>

                        <h6 class="mt-3">2. Filtro por Plantilla</h6>
                        <p>Selecciona una plantilla para ver solo contratos generados con ella.</p>

                        <h6 class="mt-3">3. Búsqueda por nombre</h6>
                        <p>Escribe parte del nombre del contrato para buscarlo.</p>

                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Los filtros se combinan:</strong>
                            <p class="mb-0 mt-2">
                                Puedes usar múltiples filtros a la vez. Por ejemplo, seleccionar la categoría 
                                "Contratos laborales" Y la plantilla "Trabajo indefinido" Y buscar "Juan" te 
                                mostrará solo los contratos que cumplan las tres condiciones.
                            </p>
                        </div>
                    </div>

                    <!-- Paso 3 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">3</span>
                            Ver el PDF de un contrato
                        </h4>
                        
                        <p><strong>Para ver el PDF en pantalla:</strong></p>
                        <ol>
                            <li>En la tabla de contratos, busca el que quieres ver</li>
                            <li>Haz clic en el botón de ojo (icono de vista)</li>
                            <li>Se abrirá una ventana grande mostrando el PDF</li>
                            <li>Puedes hacer scroll para ver todo el documento</li>
                            <li>Para cerrar, haz clic en "Cerrar" o fuera de la ventana</li>
                        </ol>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Vista previa:</strong>
                            El PDF se muestra directamente en el navegador sin necesidad de descargarlo. 
                            Útil para verificar rápidamente el contenido.
                        </div>
                    </div>

                    <!-- Paso 4 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">4</span>
                            Descargar el PDF
                        </h4>
                        
                        <p><strong>Para descargar el PDF a tu computador:</strong></p>
                        <ol>
                            <li>En la tabla de contratos, busca el que necesitas</li>
                            <li>Haz clic en el botón de descarga (icono de flecha hacia abajo)</li>
                            <li>El navegador descargará el PDF automáticamente</li>
                            <li>Lo encontrarás en tu carpeta de descargas</li>
                        </ol>

                        <div class="success-box">
                            <strong><i class="bi bi-check-circle me-2"></i>Nombre del archivo:</strong>
                            El PDF se descarga con el nombre que le diste al contrato, lo que facilita organizarlo 
                            en tu computador.
                        </div>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>También puedes descargar desde la vista previa:</strong>
                            Cuando abres el PDF para verlo, también aparece un botón "Descargar PDF" en la parte inferior.
                        </div>
                    </div>

                    <!-- Paso 5 -->
                    <div class="step-card">
                        <h4>
                            <span class="step-number">5</span>
                            Eliminar un contrato
                        </h4>
                        
                        <p>
                            Si ya no necesitas un contrato registrado en el sistema, puedes eliminarlo.
                        </p>

                        <p><strong>Para eliminar:</strong></p>
                        <ol>
                            <li>En la tabla de contratos, busca el que quieres eliminar</li>
                            <li>Haz clic en el botón de papelera (icono rojo)</li>
                            <li>Aparecerá una confirmación advirtiendo que se eliminará el PDF también</li>
                            <li>Si estás seguro, confirma</li>
                            <li>El contrato y su PDF se eliminarán permanentemente</li>
                        </ol>

                        <div class="danger-box">
                            <strong><i class="bi bi-exclamation-octagon me-2"></i>ADVERTENCIA CRÍTICA:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Esta acción NO se puede deshacer</li>
                                <li>Se eliminará TANTO el registro como el archivo PDF</li>
                                <li>Si necesitas el contrato después, tendrás que generarlo de nuevo</li>
                                <li>Si solo quieres "archivarlo", mejor descárgalo y guárdalo fuera del sistema</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Solución de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Solución de problemas comunes
                    </h2>

                    <div class="step-card">
                        <h5>Las variables no se detectan en la plantilla</h5>
                        <ul>
                            <li>Verifica que estén escritas EXACTAMENTE así: <span class="variable-example">$$nombreVariable$$</span></li>
                            <li>No debe haber espacios entre los símbolos $$ y el nombre</li>
                            <li>Deben ser dos símbolos de dólar ($) al inicio Y al final</li>
                            <li>El nombre de la variable NO debe tener espacios (usa guion bajo si necesitas separar palabras)</li>
                        </ul>

                        <h5 class="mt-3">El texto pegado desde Word se ve extraño</h5>
                        <ul>
                            <li>Usa "Pegar sin formato": <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>V</kbd> (Windows) o <kbd>⌘</kbd>+<kbd>Shift</kbd>+<kbd>V</kbd> (Mac)</li>
                            <li>Si ya lo pegaste mal, usa el botón "Limpiar Todo el Formato"</li>
                            <li>Considera escribir directamente en el editor en lugar de pegar desde Word</li>
                        </ul>

                        <h5 class="mt-3">No puedo editar una plantilla</h5>
                        <ul>
                            <li>Solo puedes editar plantillas que TÚ creaste</li>
                            <li>Verifica en la columna "Creado por" si dice "✓ Yo"</li>
                            <li>Si la plantilla es de otro usuario, puedes usarla pero no editarla</li>
                            <li>Si necesitas una versión modificada, crea una plantilla nueva con los cambios</li>
                        </ul>

                        <h5 class="mt-3">No puedo eliminar una plantilla</h5>
                        <ul>
                            <li>Las plantillas que tienen contratos generados NO se pueden eliminar</li>
                            <li>Esto es por seguridad, para mantener la relación con contratos existentes</li>
                            <li>Si realmente necesitas eliminarla, primero elimina todos los contratos que usaron esa plantilla</li>
                        </ul>

                        <h5 class="mt-3">Al generar el contrato, una variable muestra un campo de texto corto pero debería ser largo</h5>
                        <ul>
                            <li>El sistema decide el tipo de campo según el NOMBRE de la variable</li>
                            <li>Para que sea campo largo, el nombre debe terminar en <span class="variable-example">_large</span>, <span class="variable-example">_texto</span> o <span class="variable-example">_largo</span></li>
                            <li>O debe contener palabras como: condicion, obligacion, descripcion, detalle, alcance, objeto</li>
                            <li>Tendrás que editar la plantilla y cambiar el nombre de la variable</li>
                        </ul>

                        <h5 class="mt-3">El PDF generado no tiene el formato esperado</h5>
                        <ul>
                            <li>El generador de PDF tiene limitaciones con formatos muy complejos</li>
                            <li>Funciona bien con: negritas, cursivas, subrayado, listas, párrafos</li>
                            <li>Puede tener problemas con: tablas complejas, imágenes, fuentes especiales</li>
                            <li>Si necesitas formato muy específico, considera generar el contrato como Word en lugar de PDF (futura funcionalidad)</li>
                        </ul>

                        <h5 class="mt-3">No puedo ver el PDF de un contrato</h5>
                        <ul>
                            <li>Verifica tu conexión a internet</li>
                            <li>El navegador puede estar bloqueando ventanas emergentes - revisa la configuración</li>
                            <li>Intenta descargarlo en lugar de verlo en pantalla</li>
                            <li>Si el archivo está corrupto, tendrás que generar el contrato nuevamente</li>
                        </ul>

                        <h5 class="mt-3">Dice que ya existe una plantilla con ese nombre</h5>
                        <ul>
                            <li>Los nombres de plantillas deben ser únicos</li>
                            <li>Usa un nombre ligeramente diferente</li>
                            <li>Por ejemplo: en lugar de "Contrato laboral", usa "Contrato laboral v2" o "Contrato laboral indefinido"</li>
                        </ul>

                        <h5 class="mt-3">La generación del PDF se queda cargando mucho tiempo</h5>
                        <ul>
                            <li>Espera al menos 30 segundos antes de pensar que hay un error</li>
                            <li>Contratos muy largos pueden tardar más</li>
                            <li>Si pasan más de 2 minutos, recarga la página e intenta de nuevo</li>
                            <li>Verifica tu conexión a internet</li>
                        </ul>
                    </div>
                </section>

                <!-- Buenas prácticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas prácticas
                    </h2>

                    <div class="step-card">
                        <h5>Para crear plantillas efectivas:</h5>
                        <ul class="feature-list">
                            <li>Usa nombres descriptivos tanto para la plantilla como para las variables</li>
                            <li>Mantén las plantillas simples - evita formato excesivamente complejo</li>
                            <li>Agrupa variables relacionadas juntas en el documento</li>
                            <li>Usa nombres de variables consistentes (ej: siempre "contratante" en lugar de veces "empresa" y veces "contratante")</li>
                            <li>Revisa la plantilla varias veces antes de usarla en producción</li>
                            <li>Genera un contrato de prueba para verificar que todo funciona bien</li>
                            <li>Documenta qué información va en cada variable (puedes usar las notas del contrato de prueba)</li>
                        </ul>

                        <h5 class="mt-4">Para nombrar variables:</h5>
                        <ul class="feature-list">
                            <li>Usa nombres en español y descriptivos</li>
                            <li>Para nombres compuestos, usa guion bajo: <span class="variable-example">$$fecha_inicio$$</span></li>
                            <li>Sé consistente con el formato: siempre minúsculas</li>
                            <li>Para texto largo, agrega <span class="variable-example">_large</span> al final</li>
                            <li>Evita nombres ambiguos: en lugar de <span class="variable-example">$$nombre$$</span>, usa <span class="variable-example">$$nombre_contratante$$</span></li>
                        </ul>

                        <h5 class="mt-4">Para generar contratos:</h5>
                        <ul class="feature-list">
                            <li>Usa nombres únicos y descriptivos para cada contrato</li>
                            <li>Incluye datos identificativos en el nombre (persona, fecha, tipo)</li>
                            <li>Verifica TODA la información antes de generar el PDF</li>
                            <li>Una vez generado, revisa el PDF inmediatamente</li>
                            <li>Si encuentras un error, elimina el contrato y genera uno nuevo correcto</li>
                            <li>Descarga los PDFs importantes como respaldo</li>
                            <li>Usa las notas para recordar información relevante del contrato</li>
                        </ul>

                        <h5 class="mt-4">Para organización:</h5>
                        <ul class="feature-list">
                            <li>Define categorías claras desde el inicio</li>
                            <li>Usa categorías consistentes para facilitar filtrado</li>
                            <li>Revisa periódicamente contratos vencidos y archívalos o elimínalos</li>
                            <li>Mantén actualizada la fecha de finalización de los contratos</li>
                            <li>Si una plantilla ya no se usa, considera eliminarla (si no tiene contratos asociados)</li>
                        </ul>

                        <div class="success-box mt-4">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo profesional:</strong>
                            <p class="mb-0 mt-2">
                                Crea un "contrato de prueba" con cada nueva plantilla usando datos ficticios. 
                                Revisa el PDF generado cuidadosamente para asegurarte de que todo se ve como esperas 
                                antes de usarla en contratos reales.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="step-card">
                        <h5>¿Puedo editar un contrato ya generado?</h5>
                        <p>
                            No. Una vez generado el PDF, no se puede editar. Si necesitas hacer cambios, 
                            debes eliminar el contrato y generar uno nuevo con la información correcta.
                        </p>

                        <h5 class="mt-3">¿Otros usuarios pueden ver mis contratos generados?</h5>
                        <p>
                            No. La sección "Mis Contratos Generados" es completamente privada. Cada usuario 
                            solo ve los contratos que él mismo generó. Sin embargo, las plantillas sí son 
                            compartidas - todos los usuarios pueden usar cualquier plantilla.
                        </p>

                        <h5 class="mt-3">¿Puedo copiar una plantilla de otro usuario para editarla?</h5>
                        <p>
                            No directamente. Si quieres una versión modificada de la plantilla de otro usuario, 
                            tendrás que crear una nueva plantilla desde cero. Puedes copiar el contenido de la 
                            plantilla original (viéndola en el sistema), pegarlo en tu nueva plantilla y hacer 
                            los cambios necesarios.
                        </p>

                        <h5 class="mt-3">¿Cuántas plantillas puedo crear?</h5>
                        <p>
                            No hay límite establecido en el número de plantillas. Sin embargo, se recomienda 
                            crear solo las necesarias y mantenerlas organizadas para facilitar el uso.
                        </p>

                        <h5 class="mt-3">¿Cuánto espacio ocupan los PDFs generados?</h5>
                        <p>
                            Los PDFs generados son relativamente livianos (típicamente 50-200 KB cada uno). 
                            No deberías preocuparte por el espacio a menos que generes miles de contratos.
                        </p>

                        <h5 class="mt-3">¿Los contratos se eliminan automáticamente después de la fecha de vencimiento?</h5>
                        <p>
                            No. Los contratos permanecen en el sistema indefinidamente, incluso después de su 
                            fecha de vencimiento. Solo se marcan visualmente como "Vencidos" pero siguen 
                            disponibles. Debes eliminarlos manualmente si ya no los necesitas.
                        </p>

                        <h5 class="mt-3">¿Puedo usar imágenes o logos en las plantillas?</h5>
                        <p>
                            Actualmente el editor no soporta imágenes de forma nativa. Si necesitas un logo 
                            institucional en el contrato, considera agregarlo manualmente al PDF después de 
                            descargarlo, o solicitar esta funcionalidad al equipo de desarrollo.
                        </p>

                        <h5 class="mt-3">¿Qué formato de fecha debo usar en los campos de fecha?</h5>
                        <p>
                            Para el campo "Fecha de Finalización" usa el selector de fecha del navegador. 
                            Para fechas dentro del contenido del contrato (como variables), escríbelas en 
                            texto normal (ej: "15 de noviembre de 2025").
                        </p>

                        <h5 class="mt-3">¿Puedo generar múltiples contratos a la vez?</h5>
                        <p>
                            No. Cada contrato debe generarse individualmente. Si necesitas generar muchos 
                            contratos similares, tendrás que repetir el proceso para cada uno.
                        </p>

                        <h5 class="mt-3">¿Se puede recuperar un contrato eliminado?</h5>
                        <p>
                            No. La eliminación es permanente tanto del registro en la base de datos como del 
                            archivo PDF. Por eso el sistema siempre pide confirmación antes de eliminar.
                        </p>

                        <h5 class="mt-3">¿Las plantillas tienen control de versiones?</h5>
                        <p>
                            No. Cuando editas una plantilla, se sobrescribe la versión anterior. Los contratos 
                            ya generados NO se ven afectados por cambios en la plantilla, pero no hay historial 
                            de versiones anteriores de la plantilla en sí.
                        </p>

                        <h5 class="mt-3">¿Puedo exportar todas mis plantillas o contratos a la vez?</h5>
                        <p>
                            Actualmente no hay función de exportación masiva. Debes descargar cada contrato 
                            individualmente. Para las plantillas, no hay opción de exportación (pero puedes 
                            copiar el contenido manualmente si lo necesitas).
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¿Encontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, repórtalo aquí.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOTÓN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        let currentUser = null;

        const PAGE_CONFIG = {
            moduleName: 'Herramientas Generales',
            modulePath: 'general-tools',
            pageTitle: 'Plantillas y Mis Contratos',
            pagePath: 'contract-templates.html',
            moduleDescription: 'Creación de plantillas y generación de contratos PDF'
        };

        document.addEventListener('DOMContentLoaded', async function() {
            console.log('📖 Iniciando página de manual...');
            
            try {
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
                
                console.log('✅ Página de manual lista');
                
            } catch (error) {
                console.error('❌ Error inicializando página:', error);
            }
        });
    </script>
</body>
</html>
