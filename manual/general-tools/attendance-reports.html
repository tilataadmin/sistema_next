<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="26.01.26.06.58">
    
    <title>Manual - Herramientas Generales - Reportes de Asistencia - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Tarjeta para reportar bugs - MEJORADA CON COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        .bug-report-card .btn-light {
            background: white;
            color: var(--system-primary-color, #1B365D);
            border: none;
            font-weight: 600;
        }

        .bug-report-card .btn-light:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Bot√≥n flotante para reportar bugs - CON COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #dc3545) !important;
            border-color: var(--system-primary-color, #dc3545) !important;
            color: white !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Estilos para el contenido del manual */
        .manual-section {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .manual-section h3 {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
        }

        .manual-section h4 {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid var(--system-secondary-color, #667eea);
            padding: 1rem 1.25rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .info-box.warning {
            background: #fff3cd;
            border-left-color: var(--system-tertiary-color, #ffc107);
        }

        .info-box.success {
            background: #d1e7dd;
            border-left-color: #28a745;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--system-primary-color, #1B365D);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .tab-description {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .use-case {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1rem;
            margin: 0.5rem 0;
        }

        .use-case strong {
            color: var(--system-primary-color, #1B365D);
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            color: var(--system-primary-color, #1B365D);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }

        .faq-answer {
            color: #495057;
            line-height: 1.6;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Reportes de Asistencia
                        </h1>
                        <p class="subtitle mb-0">Herramientas Generales - Consultas y an√°lisis de registros de asistencia</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/general-tools/attendance-reports.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Herramientas Generales</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Reportes de Asistencia</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- SECCI√ìN 1: ¬øQU√â ES? -->
                <!-- ============================================ -->
                <div class="manual-section">
                    <h3><i class="bi bi-info-circle me-2"></i>¬øQu√© es Reportes de Asistencia?</h3>
                    
                    <p>
                        <strong>Reportes de Asistencia</strong> es una herramienta de an√°lisis dise√±ada para que directivos puedan 
                        consultar, visualizar y tomar decisiones basadas en los datos de asistencia de estudiantes y trabajadores.
                    </p>

                    <div class="info-box">
                        <strong><i class="bi bi-lightbulb me-2"></i>Para Directivos:</strong>
                        Esta herramienta le permite monitorear la asistencia institucional en tiempo real, identificar 
                        patrones de ausentismo, analizar puntualidad por √°reas, y generar reportes estrat√©gicos para 
                        la toma de decisiones.
                    </div>

                    <h4>Caracter√≠sticas principales:</h4>
                    <ul class="feature-list">
                        <li><strong>Estad√≠sticas en tiempo real:</strong> Visualice qui√©n est√° presente ahora mismo</li>
                        <li><strong>An√°lisis hist√≥rico:</strong> Consulte registros de cualquier per√≠odo</li>
                        <li><strong>Reportes por curso y √°rea:</strong> Compare asistencia entre grupos</li>
                        <li><strong>An√°lisis de puntualidad:</strong> Identifique patrones de tardanzas</li>
                        <li><strong>Detecci√≥n de alertas:</strong> Identifique comportamientos irregulares</li>
                        <li><strong>Modalidad remota:</strong> Seguimiento de trabajo virtual</li>
                    </ul>
                </div>

                <!-- ============================================ -->
                <!-- SECCI√ìN 2: PESTA√ëAS PRINCIPALES -->
                <!-- ============================================ -->
                <div class="manual-section">
                    <h3><i class="bi bi-layout-text-window me-2"></i>Pesta√±as del Sistema</h3>
                    
                    <p>
                        El sistema est√° organizado en <strong>7 pesta√±as especializadas</strong>, cada una dise√±ada 
                        para un tipo espec√≠fico de consulta o an√°lisis:
                    </p>

                    <!-- PESTA√ëA 1: PRESENCIA ACTUAL -->
                    <div class="tab-description">
                        <h4><i class="bi bi-people me-2"></i>1. Presencia Actual</h4>
                        <p><strong>Prop√≥sito:</strong> Ver en tiempo real qui√©n est√° f√≠sicamente en la instituci√≥n.</p>
                        
                        <p><strong>Qu√© muestra:</strong></p>
                        <ul>
                            <li>Lista de estudiantes presentes con hora de entrada</li>
                            <li>Lista de trabajadores presentes con hora de entrada</li>
                            <li>Filtros por curso (para estudiantes)</li>
                            <li>Contadores totales de personas presentes</li>
                        </ul>

                        <div class="info-box success">
                            <strong><i class="bi bi-clock me-2"></i>Actualizaci√≥n:</strong>
                            Los datos se cargan al abrir la pesta√±a. Para ver cambios recientes, actualice la p√°gina.
                        </div>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para verificar asistencia general en cualquier momento</li>
                            <li>En caso de emergencia, para saber qui√©n est√° en el edificio</li>
                            <li>Para confirmar la presencia de una persona espec√≠fica</li>
                            <li>Para verificar la asistencia de un curso completo</li>
                        </ul>
                    </div>

                    <!-- PESTA√ëA 2: AUSENTES -->
                    <div class="tab-description">
                        <h4><i class="bi bi-person-x me-2"></i>2. Ausentes</h4>
                        <p><strong>Prop√≥sito:</strong> Identificar qui√©nes NO han registrado asistencia hoy.</p>
                        
                        <p><strong>Qu√© muestra:</strong></p>
                        <ul>
                            <li>Estudiantes sin registro de asistencia del d√≠a</li>
                            <li>Trabajadores sin registro de asistencia</li>
                            <li>Trabajadores en modalidad de trabajo remoto aprobado</li>
                            <li>Filtros por curso (estudiantes) y divisi√≥n (trabajadores)</li>
                        </ul>

                        <div class="info-box warning">
                            <strong><i class="bi bi-house-door me-2"></i>D√≠as Virtuales:</strong>
                            Si ve un banner "D√≠a Virtual Activo", significa que todo el personal trabaja de forma remota ese d√≠a. 
                            No habr√° personal f√≠sicamente en el edificio.
                        </div>

                        <p><strong>Diferencia importante:</strong></p>
                        <ul>
                            <li><strong>Ausente:</strong> No tiene registro de asistencia y no tiene justificaci√≥n de trabajo remoto</li>
                            <li><strong>Trabajo Remoto:</strong> Tiene aprobaci√≥n formal para trabajar desde casa (solo trabajadores)</li>
                        </ul>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para hacer seguimiento a estudiantes con ausentismo recurrente</li>
                            <li>Para verificar cumplimiento de personal</li>
                            <li>Para identificar patrones de ausencia por curso o √°rea</li>
                        </ul>
                    </div>

                    <!-- PESTA√ëA 3: HISTORIAL -->
                    <div class="tab-description">
                        <h4><i class="bi bi-clock-history me-2"></i>3. Historial de Persona</h4>
                        <p><strong>Prop√≥sito:</strong> Consultar el historial completo de asistencia de una persona espec√≠fica.</p>
                        
                        <p><strong>C√≥mo usarlo:</strong></p>
                        <ol>
                            <li><span class="step-number">1</span>Escriba el nombre o documento de la persona (m√≠nimo 3 caracteres)</li>
                            <li><span class="step-number">2</span>Seleccione la persona de los resultados de b√∫squeda</li>
                            <li><span class="step-number">3</span>Elija el rango de fechas a consultar</li>
                            <li><span class="step-number">4</span>Vea el historial detallado con resumen estad√≠stico</li>
                        </ol>

                        <p><strong>Informaci√≥n que proporciona:</strong></p>
                        <ul>
                            <li><strong>Resumen estad√≠stico:</strong> D√≠as asistidos, d√≠as con tardanza, d√≠as de ausencia</li>
                            <li><strong>Tabla detallada:</strong> Fecha, hora de entrada, hora de salida, tiempo de permanencia</li>
                            <li><strong>Indicadores visuales:</strong> Badges de colores para identificar tardanzas</li>
                            <li><strong>M√©todo de registro:</strong> Si fue con carnet o registro manual</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-calendar-range me-2"></i>C√°lculo de ausencias:</strong>
                            El sistema calcula las ausencias bas√°ndose en d√≠as h√°biles (lunes a viernes) dentro del rango seleccionado.
                        </div>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para reuniones de seguimiento con padres o trabajadores</li>
                            <li>Para analizar patrones de comportamiento individual</li>
                            <li>Para generar reportes de cumplimiento</li>
                            <li>Para verificar justificaciones de ausencias</li>
                        </ul>
                    </div>

                    <!-- PESTA√ëA 4: ALERTAS -->
                    <div class="tab-description">
                        <h4><i class="bi bi-exclamation-triangle me-2"></i>4. Alertas</h4>
                        <p><strong>Prop√≥sito:</strong> Detectar comportamientos irregulares en los registros de asistencia.</p>
                        
                        <p><strong>Qu√© identifica como irregular:</strong></p>
                        <ul>
                            <li>Personas con m√°s de 2 pares de entrada/salida en el mismo d√≠a (m√°s de 4 registros totales)</li>
                            <li>Esto puede indicar problemas con el sistema de registro o comportamientos inusuales</li>
                        </ul>

                        <div class="info-box warning">
                            <strong><i class="bi bi-shield-exclamation me-2"></i>Nota importante:</strong>
                            Los registros irregulares requieren verificaci√≥n manual. Puede deberse a m√∫ltiples salidas por emergencias, 
                            actividades externas, o problemas t√©cnicos con lectores de carnet.
                        </div>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para detectar anomal√≠as en el sistema de registro</li>
                            <li>Para identificar situaciones que requieren investigaci√≥n</li>
                            <li>Para verificar el correcto funcionamiento de los lectores de carnet</li>
                        </ul>
                    </div>

                    <!-- PESTA√ëA 5: POR CURSO -->
                    <div class="tab-description">
                        <h4><i class="bi bi-mortarboard me-2"></i>5. Asistencia por Curso</h4>
                        <p><strong>Prop√≥sito:</strong> Analizar y comparar asistencia entre diferentes cursos.</p>
                        
                        <p><strong>Qu√© muestra:</strong></p>
                        <ul>
                            <li>Tabla comparativa con todos los cursos</li>
                            <li>Total de estudiantes por curso</li>
                            <li>Estudiantes presentes y ausentes</li>
                            <li>Porcentaje de asistencia con c√≥digo de colores</li>
                        </ul>

                        <p><strong>C√≥digo de colores del porcentaje:</strong></p>
                        <ul>
                            <li><span class="badge bg-success">Verde:</span> 80% o m√°s de asistencia (Excelente)</li>
                            <li><span class="badge bg-warning">Amarillo:</span> 60% - 79% de asistencia (Requiere atenci√≥n)</li>
                            <li><span class="badge bg-danger">Rojo:</span> Menos de 60% (Cr√≠tico)</li>
                        </ul>

                        <p><strong>C√≥mo usarlo:</strong></p>
                        <ol>
                            <li><span class="step-number">1</span>Seleccione la fecha a analizar</li>
                            <li><span class="step-number">2</span>Opcionalmente, filtre por un curso espec√≠fico</li>
                            <li><span class="step-number">3</span>Revise la tabla y los porcentajes</li>
                        </ol>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para reuniones de coordinaci√≥n acad√©mica</li>
                            <li>Para identificar cursos con problemas de asistencia</li>
                            <li>Para comparar desempe√±o entre grados</li>
                            <li>Para reportes administrativos</li>
                        </ul>
                    </div>

                    <!-- PESTA√ëA 6: POR √ÅREA -->
                    <div class="tab-description">
                        <h4><i class="bi bi-building me-2"></i>6. Asistencia por √Årea Organizacional</h4>
                        <p><strong>Prop√≥sito:</strong> Analizar asistencia de trabajadores agrupados por √°rea y divisi√≥n.</p>
                        
                        <p><strong>Qu√© muestra:</strong></p>
                        <ul>
                            <li>Tabla con todas las √°reas organizacionales</li>
                            <li>Divisi√≥n a la que pertenece cada √°rea</li>
                            <li>Total de trabajadores por √°rea</li>
                            <li>Trabajadores presentes y ausentes</li>
                            <li>Porcentaje de asistencia con c√≥digo de colores (mismo que cursos)</li>
                        </ul>

                        <p><strong>C√≥mo usarlo:</strong></p>
                        <ol>
                            <li><span class="step-number">1</span>Seleccione la fecha a analizar</li>
                            <li><span class="step-number">2</span>Opcionalmente, filtre por una divisi√≥n espec√≠fica</li>
                            <li><span class="step-number">3</span>Revise la tabla comparativa</li>
                        </ol>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para seguimiento de cumplimiento de personal administrativo</li>
                            <li>Para identificar √°reas con ausentismo recurrente</li>
                            <li>Para reuniones de jefes de divisi√≥n</li>
                            <li>Para planificaci√≥n de recursos humanos</li>
                        </ul>
                    </div>

                    <!-- PESTA√ëA 7: PUNTUALIDAD -->
                    <div class="tab-description">
                        <h4><i class="bi bi-alarm me-2"></i>7. An√°lisis de Puntualidad</h4>
                        <p><strong>Prop√≥sito:</strong> Analizar y comparar patrones de puntualidad en per√≠odos de tiempo.</p>
                        
                        <p><strong>Horas de referencia:</strong></p>
                        <ul>
                            <li><strong>Estudiantes:</strong> La hora configurada en el sistema (generalmente 8:20 AM)</li>
                            <li><strong>Trabajadores:</strong> La hora configurada en el sistema (generalmente 7:00 AM)</li>
                        </ul>

                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Importante:</strong>
                            Las horas de referencia se muestran en la parte superior de la pesta√±a y pueden ser diferentes 
                            para estudiantes y trabajadores seg√∫n la configuraci√≥n institucional.
                        </div>

                        <p><strong>C√≥mo usarlo:</strong></p>
                        <ol>
                            <li><span class="step-number">1</span>Defina el rango de fechas a analizar (fecha inicio y fin)</li>
                            <li><span class="step-number">2</span>Seleccione el tipo de persona (Todos, Estudiantes, o Trabajadores)</li>
                            <li><span class="step-number">3</span>Elija el orden: "M√°s tardanzas" o "M√°s a tiempo"</li>
                            <li><span class="step-number">4</span>Haga clic en "Buscar"</li>
                        </ol>

                        <p><strong>Informaci√≥n que proporciona:</strong></p>
                        <ul>
                            <li><strong>D√≠as registrados:</strong> Cu√°ntos d√≠as asisti√≥ la persona en el per√≠odo</li>
                            <li><strong>A tiempo:</strong> N√∫mero de d√≠as que lleg√≥ antes o a la hora de referencia</li>
                            <li><strong>Tardanzas:</strong> N√∫mero de d√≠as que lleg√≥ tarde</li>
                            <li><strong>Tiempo acumulado:</strong> Suma total de minutos de tardanza o anticipaci√≥n
                                <ul>
                                    <li>En <span style="color: red;">rojo</span> si tiene tardanzas acumuladas (+30m = 30 minutos tarde en total)</li>
                                    <li>En <span style="color: green;">verde</span> si llega temprano (-15m = 15 minutos antes en total)</li>
                                </ul>
                            </li>
                        </ul>

                        <p><strong>¬øCu√°ndo usar esta pesta√±a?</strong></p>
                        <ul>
                            <li>Para evaluaciones de desempe√±o de personal</li>
                            <li>Para identificar estudiantes con problemas recurrentes de puntualidad</li>
                            <li>Para reconocer personas con excelente puntualidad</li>
                            <li>Para planes de mejora y seguimiento</li>
                        </ul>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- SECCI√ìN 3: ESTAD√çSTICAS GENERALES -->
                <!-- ============================================ -->
                <div class="manual-section">
                    <h3><i class="bi bi-bar-chart me-2"></i>Estad√≠sticas Generales</h3>
                    
                    <p>
                        En la parte superior del sistema, encontrar√° tres tarjetas con estad√≠sticas actualizadas del d√≠a:
                    </p>

                    <div class="row mt-3 mb-3">
                        <div class="col-md-4">
                            <div class="card border-success">
                                <div class="card-body text-center">
                                    <i class="bi bi-check-circle text-success" style="font-size: 2rem;"></i>
                                    <h5 class="mt-2">Presentes Ahora</h5>
                                    <p class="text-muted mb-0">N√∫mero de personas actualmente en la instituci√≥n</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-danger">
                                <div class="card-body text-center">
                                    <i class="bi bi-x-circle text-danger" style="font-size: 2rem;"></i>
                                    <h5 class="mt-2">Ausentes Hoy</h5>
                                    <p class="text-muted mb-0">Personas sin registro de asistencia del d√≠a</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-warning">
                                <div class="card-body text-center">
                                    <i class="bi bi-exclamation-triangle text-warning" style="font-size: 2rem;"></i>
                                    <h5 class="mt-2">Alertas</h5>
                                    <p class="text-muted mb-0">Registros irregulares que requieren atenci√≥n</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <strong><i class="bi bi-arrow-clockwise me-2"></i>Actualizaci√≥n:</strong>
                        Las estad√≠sticas se cargan al abrir la p√°gina. Para ver datos actualizados, recargue la p√°gina 
                        presionando F5 o haciendo clic en el bot√≥n de actualizar del navegador.
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- SECCI√ìN 4: CASOS DE USO COMUNES -->
                <!-- ============================================ -->
                <div class="manual-section">
                    <h3><i class="bi bi-journal-check me-2"></i>Casos de Uso Comunes para Directivos</h3>
                    
                    <p>A continuaci√≥n, algunos escenarios frecuentes y c√≥mo resolverlos:</p>

                    <div class="use-case">
                        <strong>Caso 1: "Necesito verificar la asistencia general de hoy"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Revise las estad√≠sticas generales en la parte superior</li>
                            <li>Vaya a la pesta√±a "Presencia Actual" para ver qui√©n est√° presente</li>
                            <li>Vaya a la pesta√±a "Ausentes" para identificar qui√©n falta</li>
                        </ol>
                    </div>

                    <div class="use-case">
                        <strong>Caso 2: "¬øQu√© estudiantes de 5¬∞A est√°n ausentes hoy?"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Vaya a la pesta√±a "Ausentes"</li>
                            <li>En la secci√≥n de "Estudiantes Ausentes", use el filtro "Filtrar por curso"</li>
                            <li>Seleccione "5¬∞A" del men√∫ desplegable</li>
                            <li>La lista se actualizar√° mostrando solo estudiantes de ese curso</li>
                        </ol>
                    </div>

                    <div class="use-case">
                        <strong>Caso 3: "Necesito el historial de asistencia de Juan P√©rez para una reuni√≥n"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Vaya a la pesta√±a "Historial"</li>
                            <li>Escriba "Juan P√©rez" en el campo de b√∫squeda</li>
                            <li>Seleccione la persona correcta de los resultados</li>
                            <li>Ajuste el rango de fechas seg√∫n necesite (ej: √∫ltimo mes)</li>
                            <li>Revise el resumen estad√≠stico y la tabla detallada</li>
                        </ol>
                    </div>

                    <div class="use-case">
                        <strong>Caso 4: "¬øQu√© curso tiene el peor √≠ndice de asistencia esta semana?"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Vaya a la pesta√±a "Por Curso"</li>
                            <li>Seleccione cada d√≠a de la semana en el filtro de fecha</li>
                            <li>Compare los porcentajes de asistencia</li>
                            <li>Identifique cursos en rojo (menos del 60%)</li>
                            <li>Tome nota de patrones recurrentes</li>
                        </ol>
                    </div>

                    <div class="use-case">
                        <strong>Caso 5: "Necesito identificar estudiantes con problemas recurrentes de puntualidad"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Vaya a la pesta√±a "Puntualidad"</li>
                            <li>Defina un rango de fechas (ej: √∫ltimo mes)</li>
                            <li>Seleccione "Estudiantes" en el filtro de tipo</li>
                            <li>Ordene por "M√°s tardanzas"</li>
                            <li>Haga clic en "Buscar"</li>
                            <li>Revise los primeros de la lista (mayor n√∫mero de tardanzas)</li>
                        </ol>
                    </div>

                    <div class="use-case">
                        <strong>Caso 6: "¬øCu√°ntos trabajadores del √°rea administrativa est√°n ausentes?"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Vaya a la pesta√±a "Ausentes"</li>
                            <li>En la secci√≥n de "Trabajadores Ausentes", use el filtro de divisi√≥n</li>
                            <li>Seleccione la divisi√≥n correspondiente</li>
                            <li>El contador mostrar√° el total</li>
                        </ol>
                    </div>

                    <div class="use-case">
                        <strong>Caso 7: "Hay un simulacro de evacuaci√≥n, ¬øqui√©n est√° en el edificio?"</strong>
                        <p class="mb-1 mt-2">Soluci√≥n:</p>
                        <ol class="mb-0">
                            <li>Vaya inmediatamente a la pesta√±a "Presencia Actual"</li>
                            <li>Revise ambas listas: estudiantes y trabajadores</li>
                            <li>El sistema muestra en tiempo real qui√©n tiene registro de entrada sin salida</li>
                        </ol>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- SECCI√ìN 5: PREGUNTAS FRECUENTES -->
                <!-- ============================================ -->
                <div class="manual-section">
                    <h3><i class="bi bi-question-circle me-2"></i>Preguntas Frecuentes</h3>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øPor qu√© aparece un banner "D√≠a Virtual Activo"?
                        </div>
                        <div class="faq-answer">
                            Significa que ese d√≠a est√° configurado en el sistema como d√≠a de trabajo virtual. Todo el personal 
                            (estudiantes y trabajadores) trabaja de forma remota. No habr√° personas f√≠sicamente en el edificio 
                            y los registros de asistencia ser√°n m√≠nimos o nulos.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øQu√© significa "registro irregular"?
                        </div>
                        <div class="faq-answer">
                            Un registro irregular ocurre cuando una persona tiene m√°s de 2 pares de entrada/salida en un mismo d√≠a 
                            (m√°s de 4 registros totales). Esto puede deberse a m√∫ltiples salidas por actividades externas, problemas 
                            con el lector de carnet, o situaciones especiales. Cada caso debe verificarse manualmente.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øC√≥mo se calcula una tardanza?
                        </div>
                        <div class="faq-answer">
                            El sistema compara la hora del primer registro de entrada del d√≠a con la hora de referencia configurada:
                            <ul>
                                <li><strong>Estudiantes:</strong> Generalmente 8:20 AM</li>
                                <li><strong>Trabajadores:</strong> Generalmente 7:00 AM</li>
                            </ul>
                            Si la entrada es despu√©s de esta hora, se cuenta como tardanza. Las horas exactas se muestran en la 
                            pesta√±a de Puntualidad.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øCu√°l es la diferencia entre "ausente" y "trabajo remoto"?
                        </div>
                        <div class="faq-answer">
                            <ul>
                                <li><strong>Ausente:</strong> No tiene registro de asistencia del d√≠a y no tiene justificaci√≥n formal</li>
                                <li><strong>Trabajo Remoto:</strong> Tiene una aprobaci√≥n formal en el sistema para trabajar desde casa ese d√≠a (solo aplica para trabajadores)</li>
                            </ul>
                            Los estudiantes no pueden tener trabajo remoto, solo trabajadores.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øC√≥mo interpretar los porcentajes de asistencia?
                        </div>
                        <div class="faq-answer">
                            Los porcentajes usan un c√≥digo de colores para facilitar la interpretaci√≥n:
                            <ul>
                                <li><strong style="color: green;">Verde (80% o m√°s):</strong> Asistencia excelente, no requiere acci√≥n inmediata</li>
                                <li><strong style="color: orange;">Amarillo (60-79%):</strong> Asistencia moderada, requiere monitoreo y posible intervenci√≥n</li>
                                <li><strong style="color: red;">Rojo (menos de 60%):</strong> Asistencia cr√≠tica, requiere acci√≥n inmediata y seguimiento</li>
                            </ul>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øCon qu√© frecuencia se actualizan los datos?
                        </div>
                        <div class="faq-answer">
                            Los datos se cargan cuando abre una pesta√±a o cuando ingresa a la p√°gina. Los registros de asistencia 
                            se guardan inmediatamente cuando una persona pasa su carnet o se hace un registro manual. Para ver 
                            cambios muy recientes, actualice la p√°gina (F5).
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øQu√© hacer cuando hay muchas alertas de registros irregulares?
                        </div>
                        <div class="faq-answer">
                            Si hay un aumento inusual de alertas:
                            <ol>
                                <li>Verifique si hay problemas t√©cnicos con los lectores de carnet</li>
                                <li>Confirme si hubo actividades especiales ese d√≠a (salidas pedag√≥gicas, eventos)</li>
                                <li>Revise individualmente cada caso en la pesta√±a "Historial"</li>
                                <li>Si es recurrente en una persona, investigue la causa</li>
                            </ol>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øCu√°l es un nivel aceptable de puntualidad?
                        </div>
                        <div class="faq-answer">
                            Esto depende de las pol√≠ticas institucionales, pero como referencia general:
                            <ul>
                                <li><strong>Excelente:</strong> 95% o m√°s de d√≠as a tiempo (1 tardanza o menos por mes)</li>
                                <li><strong>Aceptable:</strong> 85-94% de d√≠as a tiempo (2-3 tardanzas por mes)</li>
                                <li><strong>Requiere atenci√≥n:</strong> Menos de 85% (4 o m√°s tardanzas por mes)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-question-circle-fill me-2"></i>
                            ¬øPuedo exportar estos datos a Excel?
                        </div>
                        <div class="faq-answer">
                            Actualmente, el sistema no tiene funci√≥n de exportaci√≥n directa. Sin embargo, puede:
                            <ul>
                                <li>Seleccionar la tabla con el mouse y copiar (Ctrl+C)</li>
                                <li>Pegar en Excel (Ctrl+V)</li>
                                <li>Tomar capturas de pantalla para reportes</li>
                            </ul>
                            Si necesita exportaci√≥n autom√°tica frecuentemente, rep√≥rtelo como sugerencia de mejora.
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- SECCI√ìN 6: CONSEJOS PARA DIRECTIVOS -->
                <!-- ============================================ -->
                <div class="manual-section">
                    <h3><i class="bi bi-lightbulb me-2"></i>Consejos para Directivos</h3>

                    <div class="info-box success">
                        <strong><i class="bi bi-graph-up me-2"></i>An√°lisis de Tendencias:</strong>
                        <p class="mb-2">Revise los reportes semanalmente para identificar tendencias:</p>
                        <ul class="mb-0">
                            <li>Patrones de ausentismo por curso o √°rea</li>
                            <li>D√≠as de la semana con mayor ausentismo</li>
                            <li>Variaciones estacionales (√©poca de lluvias, ex√°menes, etc.)</li>
                        </ul>
                    </div>

                    <div class="info-box">
                        <strong><i class="bi bi-calendar-check me-2"></i>Reuniones de Seguimiento:</strong>
                        <p class="mb-2">Use el historial individual para:</p>
                        <ul class="mb-0">
                            <li>Preparar datos objetivos antes de reuniones con padres</li>
                            <li>Documentar patrones de comportamiento</li>
                            <li>Establecer planes de mejora con evidencia cuantificable</li>
                        </ul>
                    </div>

                    <div class="info-box warning">
                        <strong><i class="bi bi-people me-2"></i>Gesti√≥n de Personal:</strong>
                        <p class="mb-2">Para trabajadores, combine los datos de asistencia con:</p>
                        <ul class="mb-0">
                            <li>Evaluaciones de desempe√±o</li>
                            <li>Planes de mejora</li>
                            <li>Reconocimientos por puntualidad</li>
                        </ul>
                    </div>

                    <div class="info-box success">
                        <strong><i class="bi bi-shield-check me-2"></i>Verificaci√≥n de Emergencias:</strong>
                        <p class="mb-0">
                            Tenga presente que en caso de emergencia (incendio, sismo, etc.), la pesta√±a "Presencia Actual" 
                            le indica qui√©n est√° en el edificio para protocolos de evacuaci√≥n y conteo de personas.
                        </p>
                    </div>
                </div>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Herramientas Generales',
            modulePath: 'general-tools',
            pageTitle: 'Reportes de Asistencia',
            pagePath: 'attendance-reports.html',
            moduleDescription: 'Consultas y an√°lisis de registros de asistencia'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
