<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSIÓN DE LA PÁGINA -->
    <meta name="page-version" content="26.02.08.20.30">
    
    <title>Manual - Servicios - Equipos Deportivos - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSIÓN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .step-number {
            background: var(--system-primary-color, #1B365D);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.75rem;
        }

        /* Tarjeta para reportar bugs - COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Botón flotante para reportar bugs - COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .floating-bug-button:hover,
        .floating-bug-button:focus,
        .floating-bug-button:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Lista de características */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Subsecciones */
        .subsection-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 3px solid var(--system-primary-color, #1B365D);
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Servicios
                        </h1>
                        <p class="subtitle mb-0">Equipos Deportivos</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/services/sports-teams.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al Módulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACIÓN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Servicios</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Equipos Deportivos</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras algún problema,<br>
                                puedes reportarlo usando el botón de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCIÓN 1: ¿Qué es? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¿Qué son los Equipos Deportivos?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            Los <strong>Equipos Deportivos</strong> es el módulo que centraliza la gestión completa de 
                            los equipos representativos del colegio: desde la configuración de disciplinas y categorías, 
                            hasta la creación de equipos y la gestión de sus integrantes.
                        </p>
                        
                        <p>
                            Este módulo tiene 3 niveles de organización jerárquica:
                        </p>

                        <ol>
                            <li><strong>Disciplinas Deportivas:</strong> El deporte en sí (Fútbol, Baloncesto, Voleibol, 
                                Natación, Atletismo, etc.). Son los catálogos base.</li>
                            
                            <li><strong>Categorías:</strong> Divisiones por edad o nivel (Pre-infantil, Infantil, Pre-juvenil, 
                                Juvenil, etc.). Se pueden ordenar numéricamente.</li>
                            
                            <li><strong>Equipos:</strong> Combinación de Disciplina + Categoría + Género. Por ejemplo: 
                                "Fútbol - Juvenil - Masculino" es un equipo. Cada equipo puede tener opcionalmente un 
                                entrenador externo registrado.</li>
                        </ol>

                        <p class="mt-3">
                            Además, cada equipo tiene <strong>Integrantes</strong>: los estudiantes activos que pertenecen 
                            a ese equipo. Puedes agregar, retirar y reactivar integrantes fácilmente.
                        </p>

                        <div class="info-box">
                            <i class="bi bi-lightbulb text-info me-2"></i>
                            <strong>Relación con Salidas Deportivas:</strong>
                            <p class="mb-0 mt-2">
                                Los equipos registrados aquí se pueden usar al crear salidas deportivas. Por ejemplo, si 
                                registras una salida de fútbol juvenil masculino a un torneo, el sistema puede tomar 
                                automáticamente la lista de integrantes de ese equipo.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 2: Características principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Características principales
                    </h2>
                    
                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Gestión de catálogos colapsables:</strong> Disciplinas y categorías en paneles 
                                desplegables para no saturar la pantalla.</li>
                            
                            <li><strong>Contadores en tiempo real:</strong> Cada catálogo y cada equipo muestra cuántos 
                                registros o integrantes tiene.</li>
                            
                            <li><strong>Filtros inteligentes:</strong> Filtra equipos por disciplina y/o categoría para 
                                encontrar rápidamente lo que necesitas.</li>
                            
                            <li><strong>Gestión de equipos simplificada:</strong> Crear equipo = seleccionar disciplina + 
                                categoría + género. No hay nombres largos manuales.</li>
                            
                            <li><strong>Entrenador externo opcional:</strong> Registra el nombre y contacto del entrenador 
                                si el equipo lo tiene (para deportes contratados externamente).</li>
                            
                            <li><strong>Panel de integrantes interactivo:</strong> Al hacer clic en un equipo, se despliega 
                                un panel lateral para ver y gestionar sus integrantes.</li>
                            
                            <li><strong>Búsqueda de estudiantes en tiempo real:</strong> Escribe 3 letras del nombre y el 
                                sistema busca estudiantes activos para agregar al equipo.</li>
                            
                            <li><strong>Control de estados:</strong> Desactiva equipos fuera de temporada. Retira integrantes 
                                sin eliminar su historial (los puedes reactivar después).</li>
                            
                            <li><strong>Ordenamiento automático:</strong> Las categorías se ordenan por el campo "Orden" 
                                que configuras. Los equipos se ordenan automáticamente por disciplina y luego por categoría.</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 3: Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5 class="mb-3">Requisitos previos:</h5>
                        
                        <ul>
                            <li><strong>Permiso necesario:</strong> Debes tener el permiso "Equipos deportivos" activo.</li>
                            
                            <li><strong>Configurar catálogos primero:</strong> Antes de crear equipos, debes tener al menos 
                                una disciplina y una categoría creadas y activas.</li>
                            
                            <li><strong>Estudiantes matriculados:</strong> Para agregar integrantes, debe haber estudiantes 
                                con estado "Activo" en el sistema.</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Flujo recomendado de configuración:</h5>
                        <ol>
                            <li>Crear todas las <strong>Disciplinas Deportivas</strong> del colegio</li>
                            <li>Crear todas las <strong>Categorías</strong> y asignarles orden numérico</li>
                            <li>Crear los <strong>Equipos</strong> combinando disciplinas + categorías + género</li>
                            <li>Agregar <strong>Integrantes</strong> a cada equipo</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Importante:</strong> NO puedes eliminar disciplinas o categorías que tengan equipos 
                            asociados. Si necesitas eliminar una, primero desactiva todos los equipos que la usan, o 
                            contácta al administrador.
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 4: Disciplinas Deportivas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-dribbble me-2"></i>
                        Gestionar Disciplinas Deportivas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¿Qué son las disciplinas?</h5>
                        <p>
                            Las disciplinas son los deportes que se practican en el colegio. Ejemplos: Fútbol, Baloncesto, 
                            Voleibol, Natación, Atletismo, Taekwondo, Ajedrez, etc.
                        </p>

                        <h5 class="mt-4 mb-3">Crear una disciplina:</h5>
                        <ol>
                            <li>Haz clic en el panel "<strong>Disciplinas Deportivas</strong>" para expandirlo</li>
                            <li>Haz clic en el botón <strong>"Nueva Disciplina"</strong></li>
                            <li>Escribe el <strong>Nombre</strong> del deporte (ejemplo: "Fútbol")</li>
                            <li>Asegúrate de que el switch "<strong>Activa</strong>" esté marcado (verde)</li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <h5 class="mt-4 mb-3">Editar una disciplina:</h5>
                        <ol>
                            <li>En la tabla de disciplinas, haz clic en el botón de <strong>editar</strong> (ícono de lápiz)</li>
                            <li>Modifica el nombre si es necesario</li>
                            <li>Si la disciplina ya no se usa, desmarca el switch "Activa" para desactivarla</li>
                            <li>Guarda los cambios</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Estado Activa/Inactiva:</strong> Una disciplina inactiva NO aparece en el selector al 
                            crear nuevos equipos. Los equipos existentes con esa disciplina siguen funcionando normalmente, 
                            pero no podrás crear equipos nuevos de esa disciplina hasta que la reactives.
                        </div>

                        <h5 class="mt-4 mb-3">Buenas prácticas:</h5>
                        <ul>
                            <li>Usa nombres cortos y claros: "Fútbol", no "Fútbol Soccer"</li>
                            <li>Mantén solo las disciplinas que realmente se practican en el colegio</li>
                            <li>Si una disciplina se suspende temporalmente (ej: por pandemia), desactívala en lugar de eliminarla</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 5: Categorías -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-tags me-2"></i>
                        Gestionar Categorías
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¿Qué son las categorías?</h5>
                        <p>
                            Las categorías dividen los equipos por edad o nivel. Ejemplos: Pre-infantil, Infantil, 
                            Pre-juvenil, Juvenil, Senior, etc. Cada colegio puede definir las suyas.
                        </p>

                        <h5 class="mt-4 mb-3">Crear una categoría:</h5>
                        <ol>
                            <li>Haz clic en el panel "<strong>Categorías</strong>" para expandirlo</li>
                            <li>Haz clic en el botón <strong>"Nueva Categoría"</strong></li>
                            <li>Escribe el <strong>Nombre</strong> (ejemplo: "Juvenil")</li>
                            <li>Asigna un número de <strong>Orden</strong> (opcional pero recomendado)
                                <ul>
                                    <li>Ejemplo: Pre-infantil = 1, Infantil = 2, Pre-juvenil = 3, Juvenil = 4</li>
                                    <li>Esto controla cómo se ordenan en las listas</li>
                                </ul>
                            </li>
                            <li>Asegúrate de que el switch "<strong>Activa</strong>" esté marcado</li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <h5 class="mt-4 mb-3">Editar una categoría:</h5>
                        <ol>
                            <li>En la tabla de categorías, haz clic en el botón de <strong>editar</strong></li>
                            <li>Modifica el nombre o el orden si es necesario</li>
                            <li>Para desactivar temporalmente, desmarca el switch "Activa"</li>
                            <li>Guarda los cambios</li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Sobre el campo Orden:</strong> Si no asignas un orden numérico, la categoría se ordenará 
                            alfabéticamente por nombre. Es mejor asignar orden explícito para tener control total. Por ejemplo, 
                            si tienes "Sub-14", "Sub-16", "Sub-12", sin orden numérico se ordenarían alfabéticamente (Sub-12, 
                            Sub-14, Sub-16) pero con orden (Sub-12 = 1, Sub-14 = 2, Sub-16 = 3) se ordenan correctamente.
                        </div>

                        <h5 class="mt-4 mb-3">Buenas prácticas:</h5>
                        <ul>
                            <li>Define todas las categorías de una sola vez para evitar estar creando constantemente</li>
                            <li>Usa nomenclatura consistente: todas con "Sub-" o todas con "U-" (Under), no mezcles</li>
                            <li>Asigna orden con espacios (10, 20, 30) para poder insertar categorías intermedias después</li>
                            <li>Si una categoría ya no se usa (ej: eliminaron "Senior"), desactívala en lugar de eliminarla</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 6: Equipos -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-people me-2"></i>
                        Gestionar Equipos
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¿Qué es un equipo?</h5>
                        <p>
                            Un equipo es la combinación de <strong>Disciplina + Categoría + Género</strong>. Por ejemplo:
                        </p>
                        <ul>
                            <li>Fútbol - Juvenil - Masculino</li>
                            <li>Voleibol - Infantil - Femenino</li>
                            <li>Baloncesto - Pre-juvenil - Mixto</li>
                        </ul>

                        <p>
                            Los 3 géneros posibles son: <strong>Masculino</strong>, <strong>Femenino</strong> y 
                            <strong>Mixto</strong>.
                        </p>

                        <h5 class="mt-4 mb-3">Crear un equipo:</h5>
                        <ol>
                            <li>En la sección de "Equipos", haz clic en <strong>"Nuevo Equipo"</strong></li>
                            <li>Selecciona la <strong>Disciplina</strong> (solo aparecen las activas)</li>
                            <li>Selecciona la <strong>Categoría</strong> (solo aparecen las activas)</li>
                            <li>Selecciona el <strong>Género</strong>: Masculino, Femenino o Mixto</li>
                            <li><strong>Entrenador externo (opcional):</strong>
                                <ul>
                                    <li>Si el equipo tiene un entrenador contratado externamente, escribe su nombre</li>
                                    <li>Escribe el contacto (teléfono o correo)</li>
                                    <li>Si el entrenador es un trabajador del colegio, NO lo registres aquí (se gestiona 
                                        en el módulo de Talento Humano)</li>
                                </ul>
                            </li>
                            <li>Asegúrate de que el switch "<strong>Activo</strong>" esté marcado</li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <h5 class="mt-4 mb-3">Editar un equipo:</h5>
                        <ol>
                            <li>En la tabla de equipos, haz clic en el botón de <strong>editar</strong> en la fila correspondiente</li>
                            <li>Puedes cambiar disciplina, categoría, género o entrenador</li>
                            <li>Para desactivar el equipo (fuera de temporada), desmarca el switch "Activo"</li>
                            <li>Guarda los cambios</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Equipos duplicados:</strong> El sistema NO impide crear dos equipos con la misma 
                            combinación de disciplina + categoría + género. Sin embargo, esto generalmente no tiene sentido 
                            y puede causar confusión. Si accidentalmente creaste un duplicado, desactívalo o contácta al 
                            administrador para eliminarlo.
                        </div>

                        <h5 class="mt-4 mb-3">Filtrar equipos:</h5>
                        <p>
                            Usa los selectores en la parte superior de la tabla para filtrar:
                        </p>
                        <ul>
                            <li><strong>Por disciplina:</strong> Ver solo equipos de fútbol, o solo de voleibol, etc.</li>
                            <li><strong>Por categoría:</strong> Ver solo equipos juveniles, o solo infantiles, etc.</li>
                            <li>Puedes combinar ambos filtros (ej: solo fútbol juvenil)</li>
                            <li>Para ver todos los equipos nuevamente, selecciona "Todas las disciplinas" y "Todas las categorías"</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Columna "Integrantes":</h5>
                        <p>
                            Muestra un número: cuántos estudiantes activos tiene ese equipo. Este contador se actualiza 
                            automáticamente cuando agregas o retiras integrantes.
                        </p>

                        <h5 class="mt-4 mb-3">Buenas prácticas:</h5>
                        <ul>
                            <li>Desactiva equipos al final de cada año escolar si no continuarán la siguiente temporada</li>
                            <li>Reactiva equipos al inicio del año si regresan</li>
                            <li>Si un equipo cambia de categoría (ej: de infantil a pre-juvenil), crea un equipo nuevo 
                                en lugar de editar el existente. Esto mantiene el historial limpio.</li>
                            <li>Usa el filtro de disciplina para revisar rápidamente todos los equipos de un deporte antes 
                                de una temporada</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 7: Integrantes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-person-lines-fill me-2"></i>
                        Gestionar Integrantes de un Equipo
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¿Cómo funcionan los integrantes?</h5>
                        <p>
                            Los integrantes son los estudiantes activos que pertenecen a un equipo. Un estudiante puede 
                            pertenecer a múltiples equipos (ej: está en fútbol juvenil y también en atletismo juvenil).
                        </p>

                        <h5 class="mt-4 mb-3">Ver integrantes de un equipo:</h5>
                        <ol>
                            <li>En la tabla de equipos, <strong>haz clic en la fila</strong> del equipo que quieres gestionar</li>
                            <li>La fila se resaltará en color verde</li>
                            <li>Abajo aparecerá el <strong>Panel de Integrantes</strong> con:
                                <ul>
                                    <li>Título del equipo seleccionado</li>
                                    <li>Campo de búsqueda para agregar estudiantes</li>
                                    <li>Lista de integrantes actuales</li>
                                </ul>
                            </li>
                        </ol>

                        <h5 class="mt-4 mb-3">Agregar un integrante:</h5>
                        <ol>
                            <li>Selecciona el equipo (haz clic en su fila)</li>
                            <li>En el campo "<strong>Agregar estudiante</strong>", escribe al menos <strong>3 letras</strong> 
                                del nombre o apellido del estudiante</li>
                            <li>Aparecerá una lista de resultados con:
                                <ul>
                                    <li>Nombre completo del estudiante</li>
                                    <li>Grado y curso donde está matriculado</li>
                                </ul>
                            </li>
                            <li>Haz clic en el estudiante que quieres agregar</li>
                            <li>Se agregará inmediatamente a la lista de integrantes</li>
                            <li>El contador de integrantes del equipo se actualiza automáticamente</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Búsqueda inteligente:</strong> El sistema busca por nombre, primer apellido y segundo 
                            apellido. Solo muestra estudiantes con estado "Activo" en el sistema. Los estudiantes que ya 
                            son integrantes del equipo NO aparecen en los resultados (para evitar duplicados).
                        </div>

                        <h5 class="mt-4 mb-3">Retirar un integrante:</h5>
                        <ol>
                            <li>En la lista de integrantes actuales, encuentra al estudiante</li>
                            <li>Haz clic en el botón <strong>rojo</strong> (ícono de persona con signo menos)</li>
                            <li>Confirma que quieres retirarlo</li>
                            <li>El estudiante pasa a la sección de "Retirados" (se muestra con opacidad reducida)</li>
                            <li>El contador se reduce automáticamente</li>
                        </ol>

                        <h5 class="mt-4 mb-3">Reactivar un integrante:</h5>
                        <p>
                            Si retiraste un estudiante por error, o si regresa al equipo:
                        </p>
                        <ol>
                            <li>Baja hasta la sección "<strong>Retirados</strong>" (aparece solo si hay integrantes retirados)</li>
                            <li>Haz clic en el botón <strong>verde</strong> (ícono de persona con signo más)</li>
                            <li>El estudiante regresa a la lista de integrantes activos</li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>¿Por qué no eliminar directamente?</strong> El sistema mantiene un historial de 
                            integrantes. Cuando retiras a un estudiante, su registro se marca como inactivo pero NO se 
                            elimina. Esto permite:
                            <ul class="mt-2 mb-0">
                                <li>Ver estadísticas históricas (ej: cuántos estudiantes pasaron por el equipo en el año)</li>
                                <li>Reactivar fácilmente si el estudiante regresa</li>
                                <li>Mantener trazabilidad para auditorías o reportes</li>
                            </ul>
                        </div>

                        <h5 class="mt-4 mb-3">Cerrar el panel de integrantes:</h5>
                        <p>
                            Haz clic en el botón "<strong>X</strong>" en la esquina superior derecha del panel, o 
                            simplemente haz clic en otro equipo para cambiar de contexto.
                        </p>

                        <h5 class="mt-4 mb-3">Buenas prácticas:</h5>
                        <ul>
                            <li>Actualiza la lista de integrantes al inicio de cada temporada (retira los que salieron, 
                                agrega los nuevos)</li>
                            <li>Si un estudiante se lesiona temporalmente, NO lo retires. Los integrantes activos incluyen 
                                lesionados (simplemente no viajan en esa salida específica)</li>
                            <li>Solo retira a un estudiante si definitivamente sale del equipo (renuncia, cambio de colegio, etc.)</li>
                            <li>Si un estudiante pasa de infantil a pre-juvenil, retíralo del equipo infantil y agrégalo 
                                al equipo pre-juvenil</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 8: Solución de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Solución de problemas comunes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No me deja crear un equipo, los selectores de disciplina y categoría están vacíos
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>No hay disciplinas y/o categorías activas en el sistema.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Ve a los paneles de "Disciplinas Deportivas" y "Categorías"</li>
                            <li>Crea al menos una disciplina y una categoría</li>
                            <li>Asegúrate de que ambas estén marcadas como "Activa"</li>
                            <li>Intenta crear el equipo nuevamente</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Busco un estudiante pero no aparece en los resultados
                        </div>
                        <p><strong>Causas posibles:</strong></p>
                        <ul>
                            <li>El estudiante no tiene estado "Activo" en el sistema</li>
                            <li>El nombre está mal escrito (busca por apellido en su lugar)</li>
                            <li>El estudiante ya es integrante activo del equipo (no aparece para evitar duplicados)</li>
                            <li>No has escrito al menos 3 caracteres</li>
                        </ul>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Verifica en el módulo de estudiantes que el estudiante esté activo</li>
                            <li>Intenta buscar por apellido en lugar de nombre</li>
                            <li>Verifica en la lista de integrantes si ya está agregado</li>
                            <li>Asegúrate de escribir al menos 3 letras</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            El panel de integrantes no se abre al hacer clic en un equipo
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>Probablemente hiciste clic en el botón de editar o en otra parte que no es la fila completa.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Haz clic en cualquier parte de la fila EXCEPTO el botón de editar</li>
                            <li>Por ejemplo, haz clic en el nombre de la disciplina o en la categoría</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Creé un equipo pero no aparece en la lista
                        </div>
                        <p><strong>Causa más probable:</strong></p>
                        <p>Tienes filtros activos que ocultan el equipo.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Revisa los selectores de filtro en la parte superior de la tabla</li>
                            <li>Asegúrate de que digan "Todas las disciplinas" y "Todas las categorías"</li>
                            <li>Si creaste el equipo como "Inactivo", actívalo editándolo</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Necesito eliminar una disciplina pero el sistema no me deja
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>Hay equipos asociados a esa disciplina.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Primero desactiva o elimina todos los equipos que usan esa disciplina</li>
                            <li>Si no quieres eliminarla pero tampoco usarla, simplemente desactívala (switch "Activa" 
                                desmarcado)</li>
                            <li>Si realmente necesitas eliminarla y hay muchos equipos, contacta al administrador</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            El contador de integrantes no se actualiza después de agregar un estudiante
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>Posible problema de caché del navegador.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Refresca la página (F5 o Ctrl+R / Cmd+R)</li>
                            <li>El contador se actualiza automáticamente al cargar</li>
                            <li>Si persiste el problema, reporta como bug</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 9: Buenas prácticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas prácticas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Recomendaciones para gestionar equipos deportivos eficientemente:</h5>

                        <div class="tip-box mb-3">
                            <strong>1. Configura todo al inicio del año escolar</strong>
                            <p class="mb-0">
                                Al comenzar el año, dedica tiempo a:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Verificar que todas las disciplinas y categorías estén actualizadas</li>
                                <li>Crear/reactivar los equipos de la temporada</li>
                                <li>Actualizar todos los integrantes (retirar graduados, agregar nuevos)</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                Esto evita correcciones de último minuto antes de salidas deportivas.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>2. Usa nomenclatura consistente en categorías</strong>
                            <p class="mb-0">
                                Decide una convención y mantenla. Ejemplos:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Sub-12, Sub-14, Sub-16 (por edad)</li>
                                <li>Infantil, Pre-juvenil, Juvenil (por nivel)</li>
                                <li>U-12, U-14, U-16 (Under, nomenclatura internacional)</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                NO mezcles: no tengas "Sub-12", "Pre-juvenil" y "U-16" en el mismo colegio.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>3. Mantén entrenadores externos actualizados</strong>
                            <p class="mb-0">
                                Si un entrenador cambia de contacto o sale del colegio, actualiza el equipo inmediatamente. 
                                Esta información es crítica para:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Coordinar salidas deportivas</li>
                                <li>Enviar comunicados</li>
                                <li>Gestionar pagos (si aplica)</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>4. Revisa integrantes antes de cada salida</strong>
                            <p class="mb-0">
                                Antes de crear una salida deportiva, abre el equipo y verifica que la lista de integrantes 
                                esté actualizada. Es más fácil corregir aquí que estar agregando manualmente en la salida.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>5. No elimines, desactiva</strong>
                            <p class="mb-0">
                                En lugar de eliminar equipos, disciplinas o categorías que ya no se usan, desactívalos. 
                                Esto mantiene:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Historial de salidas deportivas pasadas</li>
                                <li>Estadísticas anuales</li>
                                <li>Trazabilidad para auditorías</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>6. Usa los filtros para auditorías rápidas</strong>
                            <p class="mb-0">
                                Filtra por disciplina y revisa:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>¿Todos los equipos tienen integrantes?</li>
                                <li>¿Hay equipos duplicados accidentalmente?</li>
                                <li>¿Los entrenadores están registrados?</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>7. Documenta cambios significativos</strong>
                            <p class="mb-0">
                                Si un equipo cambia de categoría (ej: de infantil a pre-juvenil), considera:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Desactivar el equipo antiguo</li>
                                <li>Crear el equipo nuevo</li>
                                <li>Migrar los integrantes que continúan</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                Esto mantiene claridad en reportes históricos.
                            </p>
                        </div>

                        <div class="tip-box mb-0">
                            <strong>8. Asigna orden numérico a categorías estratégicamente</strong>
                            <p class="mb-0">
                                Usa números con espacios (10, 20, 30, 40) en lugar de consecutivos (1, 2, 3, 4). 
                                Si luego necesitas insertar una categoría intermedia, puedes usar 15, 25, etc. sin 
                                tener que renumerar todo.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 10: Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Un estudiante puede estar en múltiples equipos?
                        </div>
                        <p>
                            Sí. Un estudiante puede ser integrante de tantos equipos como necesites. Por ejemplo, puede 
                            estar en "Fútbol - Juvenil - Masculino" y también en "Atletismo - Juvenil - Masculino". 
                            No hay límite.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo tener equipos masculino, femenino Y mixto en la misma disciplina y categoría?
                        </div>
                        <p>
                            Sí. Puedes tener tres equipos separados: "Voleibol - Juvenil - Masculino", "Voleibol - Juvenil - 
                            Femenino" y "Voleibol - Juvenil - Mixto". Cada uno puede tener sus propios integrantes.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué pasa si edito la categoría de un equipo que ya tiene integrantes?
                        </div>
                        <p>
                            Los integrantes permanecen en el equipo. El cambio es solo en la clasificación del equipo. 
                            Sin embargo, NO es recomendable hacer esto. Es mejor desactivar el equipo antiguo y crear uno 
                            nuevo con la categoría correcta, luego migrar los integrantes manualmente.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Cómo sé cuántos equipos tengo en total?
                        </div>
                        <p>
                            Asegúrate de que los filtros estén en "Todas las disciplinas" y "Todas las categorías". 
                            El número de filas en la tabla es el total de equipos. Alternativamente, puedes exportar 
                            a Excel (si está disponible) y contar ahí.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Los integrantes retirados cuentan en el contador?
                        </div>
                        <p>
                            No. El contador solo muestra integrantes <strong>activos</strong>. Los retirados se guardan 
                            para historial pero no se cuentan.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo exportar la lista de integrantes a Excel?
                        </div>
                        <p>
                            En la versión actual, no hay botón de exportación en el panel de integrantes. Si necesitas 
                            una lista completa, puedes:
                        </p>
                        <ul>
                            <li>Tomar captura de pantalla</li>
                            <li>Copiar manualmente</li>
                            <li>Solicitar al administrador que genere un reporte desde la base de datos</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué diferencia hay entre entrenador externo y entrenador del colegio?
                        </div>
                        <p>
                            <strong>Entrenador externo:</strong> Persona contratada solo para entrenar ese equipo. 
                            Se registra aquí con nombre y contacto porque no está en el sistema de Talento Humano del colegio.
                        </p>
                        <p>
                            <strong>Entrenador del colegio:</strong> Trabajador del colegio (docente, coordinador) que 
                            entrena como parte de sus funciones. Ya está registrado en Talento Humano, NO lo registres 
                            aquí como entrenador externo.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo cambiar el orden de las categorías después de crear equipos?
                        </div>
                        <p>
                            Sí. Edita la categoría y cambia el número en el campo "Orden". Los equipos se reordenarán 
                            automáticamente la próxima vez que refresques la página.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Por qué algunos estudiantes aparecen con grado y curso, y otros no?
                        </div>
                        <p>
                            Depende de si el estudiante está matriculado en un curso activo. Los estudiantes sin curso 
                            (ej: nuevos que aún no se matricularon, o graduados) mostrarán solo su nombre sin ubicación.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo ver en qué otros equipos está un estudiante?
                        </div>
                        <p>
                            No directamente desde esta página. Tendrías que buscar al estudiante en otros equipos manualmente, 
                            o consultar en el módulo de estudiantes si hay un reporte de equipos por estudiante.
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¿Encontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, repórtalo aquí.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOTÓN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CRÍTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACIÓN DE LA PÁGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Servicios',
            modulePath: 'services',
            pageTitle: 'Equipos Deportivos',
            pagePath: 'sports-teams.html',
            moduleDescription: 'Disciplinas, categorías, equipos e integrantes'
        };

        // ==========================================
        // INICIALIZACIÓN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('📖 Iniciando página de manual...');
            
            try {
                // Verificar si existe la función de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesión si la función existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar información en la página
                updatePageInfo();
                
                console.log('✅ Página de manual lista');
                
            } catch (error) {
                console.error('❌ Error inicializando página:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la página: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACIÓN DE LA PÁGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCIÓN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove después de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
