<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSIÓN DE LA PÁGINA -->
    <meta name="page-version" content="26.02.08.18.30">
    
    <title>Manual - Servicios - Eventos Internos - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSIÓN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .step-number {
            background: var(--system-primary-color, #1B365D);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.75rem;
        }

        /* Tarjeta para reportar bugs - COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Botón flotante para reportar bugs - COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .floating-bug-button:hover,
        .floating-bug-button:focus,
        .floating-bug-button:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Lista de características */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Servicios
                        </h1>
                        <p class="subtitle mb-0">Eventos Internos</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/services/internal-events.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al Módulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACIÓN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Servicios</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Eventos Internos</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras algún problema,<br>
                                puedes reportarlo usando el botón de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCIÓN 1: ¿Qué es? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¿Qué son los Eventos Internos?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            Los <strong>Eventos Internos</strong> son actividades institucionales del colegio que se 
                            realizan dentro de las instalaciones, como cafecitos con familias, primeras comuniones, 
                            actos cívicos, día de la familia, celebraciones especiales, entre otros.
                        </p>
                        
                        <p>
                            Esta página te permite planificar y solicitar aprobación para eventos internos, 
                            incluyendo la gestión de refrigerios, personal de apoyo extra y servicios de apoyo 
                            de diferentes áreas del colegio.
                        </p>

                        <p><strong>Componentes de un evento interno:</strong></p>
                        
                        <ol>
                            <li><strong>Información básica:</strong> Nombre, fecha, horario, ubicación, número de participantes</li>
                            <li><strong>Refrigerios (opcional):</strong> Menús para estudiantes y/o adultos</li>
                            <li><strong>Personal de apoyo (opcional):</strong> Personal extra de aseo, cafetería, mantenimiento o tecnología</li>
                            <li><strong>Servicios de apoyo (opcional):</strong> Staffing, comunicaciones, recursos tecnológicos, organización del sitio, recursos/papelería</li>
                            <li><strong>Aprobación:</strong> Selección del aprobador que revisará y autorizará el evento</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-lightbulb text-info me-2"></i>
                            <strong>Flujo completo:</strong>
                            <p class="mb-0 mt-2">
                                1. Creas el evento → 2. Se envía a aprobación → 3. Aprobador autoriza/rechaza → 
                                4. Si se aprueba, queda programado → 5. Áreas de apoyo registran sus costos → 
                                6. El día del evento se realiza → 7. Se marca como completado
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 2: Características principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Características principales
                    </h2>
                    
                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Wizard guiado en 5 pasos:</strong> Proceso paso a paso para no olvidar ningún detalle del evento.</li>
                            
                            <li><strong>Solicitud de aprobación integrada:</strong> Seleccionas quién debe aprobar el evento y se envía automáticamente la notificación.</li>
                            
                            <li><strong>Gestión de refrigerios:</strong> Selecciona menús del catálogo con cálculo automático de costos por cantidad de participantes.</li>
                            
                            <li><strong>Coordinación de personal extra:</strong> Solicita personal adicional de aseo, cafetería, mantenimiento o tecnología.</li>
                            
                            <li><strong>Servicios de apoyo multidisciplinarios:</strong> Solicita apoyo de 5 áreas diferentes (staffing, comunicaciones, tecnología, organización, recursos) con descripción detallada de necesidades.</li>
                            
                            <li><strong>Notificaciones automáticas:</strong> El sistema notifica al aprobador, a coordinación, recepción, portería y a las áreas de apoyo solicitadas.</li>
                            
                            <li><strong>Costos en tiempo real:</strong> Calcula automáticamente el costo estimado basado en refrigerios seleccionados. Los costos de servicios de apoyo se registran posteriormente por cada área.</li>
                            
                            <li><strong>Control de estados:</strong> Los eventos pasan por estados: Programado → Completado/Suspendido/Cancelado.</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 3: Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5 class="mb-3">Requisitos previos:</h5>
                        
                        <ul>
                            <li><strong>Permiso necesario:</strong> Debes tener el permiso "Eventos internos" activo en tu usuario.</li>
                            
                            <li><strong>Planificación anticipada:</strong> Los eventos deben programarse con un mínimo de días de antelación (configurado en parámetros del módulo, típicamente 7 días).</li>
                            
                            <li><strong>Información completa:</strong> Antes de empezar, ten clara toda la información: cuántos participantes, qué refrigerios necesitas, qué apoyo requieres, etc.</li>
                            
                            <li><strong>Catálogo de refrigerios:</strong> Debe haber al menos un menú activo en el catálogo de refrigerios (configurado en Configuración de Servicios).</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Días mínimos de antelación:</strong>
                            <p class="mb-0 mt-2">
                                El sistema validará que la fecha del evento esté al menos X días en el futuro 
                                (donde X es el parámetro "Días mínimos de antelación" configurado por el administrador). 
                                Esto garantiza tiempo suficiente para aprobaciones y coordinación.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 4: Guía paso a paso -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Guía paso a paso
                    </h2>

                    <p class="mb-4">
                        El proceso de creación de eventos se divide en 5 pasos claros. No puedes avanzar al siguiente 
                        paso sin completar el actual correctamente.
                    </p>

                    <!-- Paso 1 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">1</span>
                            Información Básica del Evento
                        </h5>
                        <p class="mt-3">Completa la información fundamental del evento:</p>
                        <ul>
                            <li><strong>Nombre del Evento:</strong> Ejemplo: "Día de la Familia 2026", "Primera Comunión Grado 3"</li>
                            <li><strong>Fecha del Evento:</strong> Debe ser al menos 7 días en el futuro (o los días configurados)</li>
                            <li><strong>Hora de Inicio y Finalización:</strong> La hora de fin debe ser posterior a la de inicio</li>
                            <li><strong>Sitio/Ubicación:</strong> Ejemplo: "Cancha múltiple cubierta", "Auditorio principal"</li>
                            <li><strong>Número de Estudiantes:</strong> Cantidad estimada de estudiantes que participarán</li>
                            <li><strong>Número de Adultos:</strong> Cantidad estimada de adultos (padres, invitados, docentes)</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Importante:</strong> Debe haber al menos un participante (estudiantes o adultos). 
                            Las cantidades que ingreses aquí se usarán automáticamente para calcular refrigerios.
                        </div>

                        <p class="mt-3">Una vez completos todos los campos, haz clic en <strong>"Siguiente"</strong>.</p>
                    </div>

                    <!-- Paso 2 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">2</span>
                            Refrigerios y Alimentación
                        </h5>
                        <p class="mt-3">Decide si el evento incluirá refrigerios:</p>

                        <h6 class="mt-3">Refrigerios para Estudiantes:</h6>
                        <ol>
                            <li>Marca la casilla "Refrigerios para Estudiantes"</li>
                            <li>Selecciona un menú del catálogo</li>
                            <li>La cantidad se toma automáticamente del número de estudiantes del paso 1</li>
                            <li>El precio unitario y total se calculan automáticamente</li>
                        </ol>

                        <h6 class="mt-3">Refrigerios para Adultos:</h6>
                        <ol>
                            <li>Marca la casilla "Refrigerios para Adultos"</li>
                            <li>Selecciona un menú del catálogo</li>
                            <li>La cantidad se toma automáticamente del número de adultos del paso 1</li>
                            <li>El precio unitario y total se calculan automáticamente</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Opcional:</strong> Los refrigerios son completamente opcionales. Si tu evento no los requiere, 
                            simplemente no marques ninguna casilla y avanza al siguiente paso.
                        </div>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Menús diferentes:</strong> Puedes seleccionar menús diferentes para estudiantes y adultos. 
                            Por ejemplo, un refrigerio básico para estudiantes y uno ejecutivo para adultos.
                        </div>
                    </div>

                    <!-- Paso 3 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">3</span>
                            Personal de Apoyo
                        </h5>
                        <p class="mt-3">
                            Solicita personal de apoyo adicional si tu evento lo requiere. Esto se refiere a personal 
                            EXTRA del colegio, no al personal regular de cada área.
                        </p>

                        <h6 class="mt-3">Áreas disponibles:</h6>
                        <ul>
                            <li><strong>Personal de Aseo:</strong> Para limpieza adicional o limpieza especial durante/después del evento</li>
                            <li><strong>Personal de Cafetería:</strong> Para servir refrigerios o atender alimentos</li>
                            <li><strong>Personal de Mantenimiento:</strong> Para reparaciones, ajustes o mantenimiento durante el evento</li>
                            <li><strong>Personal de Tecnología:</strong> Para soporte técnico especializado</li>
                        </ul>

                        <h6 class="mt-3">Cómo solicitar:</h6>
                        <ol>
                            <li>Marca la casilla del tipo de personal que necesitas</li>
                            <li>Indica la cantidad de personas necesarias</li>
                            <li>Repite para cada tipo de personal que requieras</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Opcional:</strong> El personal de apoyo es completamente opcional. Solo solicita las áreas 
                            que realmente necesiten refuerzo para tu evento específico.
                        </div>
                    </div>

                    <!-- Paso 4 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">4</span>
                            Servicios de Apoyo
                        </h5>
                        <p class="mt-3">
                            Solicita servicios de apoyo de diferentes áreas del colegio. A diferencia del personal de apoyo 
                            (que es gente), esto son servicios o recursos específicos que necesitas.
                        </p>

                        <h6 class="mt-3">Servicios disponibles:</h6>

                        <p><strong>1. Personal de Apoyo General (Staffing):</strong></p>
                        <p class="ms-3">Coordinado por Talento Humano. Para solicitudes especiales de personal que no encajan 
                        en las categorías del paso 3.</p>

                        <p><strong>2. Comunicaciones:</strong></p>
                        <p class="ms-3">Para circulares, anuncios, cubrimiento fotográfico, notas de prensa, publicaciones 
                        en redes sociales del colegio.</p>

                        <p><strong>3. Recursos Tecnológicos:</strong></p>
                        <p class="ms-3">Video proyectores, computadores, equipos de sonido, micrófonos, pantallas, 
                        software especializado.</p>

                        <p><strong>4. Organización del Sitio:</strong></p>
                        <p class="ms-3">Ubicación y organización de mesas, sillas, biombos, decoración, señalización, 
                        mobiliario especial.</p>

                        <p><strong>5. Recursos (Papelería, Materiales):</strong></p>
                        <p class="ms-3">Papelería, marcadores, cuadernillos, folletos, materiales impresos, 
                        recursos didácticos.</p>

                        <h6 class="mt-3">Cómo solicitar servicios:</h6>
                        <ol>
                            <li>Marca la casilla del servicio que necesitas</li>
                            <li>En el campo de texto que aparece, describe detalladamente tus necesidades</li>
                            <li>Sé específico: cantidades, características, horarios de instalación/uso, etc.</li>
                            <li>Repite para cada servicio que requieras</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Descripción obligatoria:</strong> Si marcas un servicio, DEBES describir qué necesitas. 
                            Esto ayuda al área responsable a prepararse adecuadamente.
                        </div>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Ejemplo de buena descripción:</strong><br>
                            "Recursos Tecnológicos: Necesito 1 video proyector HD, 2 micrófonos inalámbricos y 1 computador 
                            portátil. Instalación a las 8:00 AM en el Auditorio Principal. Uso durante 3 horas."
                        </div>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Sobre los costos:</strong> Los costos de estos servicios NO se calculan automáticamente. 
                            Cada área responsable registrará posteriormente el costo real de su apoyo para el evento.
                        </div>
                    </div>

                    <!-- Paso 5 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">5</span>
                            Resumen y Solicitud de Aprobación
                        </h5>
                        <p class="mt-3">
                            En este paso final revisas todo lo que configuraste y seleccionas quién debe aprobar el evento.
                        </p>

                        <h6 class="mt-3">Qué verás en el resumen:</h6>
                        <ul>
                            <li>Información básica del evento (nombre, fecha, horario, ubicación, participantes)</li>
                            <li>Refrigerios solicitados con cantidades y costos</li>
                            <li>Personal de apoyo solicitado</li>
                            <li>Servicios de apoyo solicitados con sus descripciones</li>
                            <li>Resumen de costos estimados (solo refrigerios, los servicios son "Pendiente")</li>
                        </ul>

                        <h6 class="mt-3">Seleccionar aprobador:</h6>
                        <ol>
                            <li>En el selector "Seleccione el Aprobador", elige la persona que debe revisar y aprobar tu evento</li>
                            <li>El aprobador recibirá una notificación por correo con todos los detalles</li>
                            <li>El aprobador puede aprobar o rechazar el evento desde su bandeja de aprobaciones</li>
                        </ol>

                        <h6 class="mt-3">Enviar la solicitud:</h6>
                        <ol>
                            <li>Revisa cuidadosamente todo el resumen</li>
                            <li>Si encuentras algún error, usa el botón "Anterior" para corregirlo</li>
                            <li>Cuando todo esté correcto, haz clic en <strong>"Guardar Evento"</strong></li>
                            <li>El sistema guardará el evento, enviará las notificaciones y te regresará a la lista de eventos</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Notificaciones automáticas:</strong>
                            <p class="mb-0 mt-2">
                                Al guardar el evento se enviarán correos a:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Aprobador seleccionado (solicitud de aprobación)</li>
                                <li>Coordinación de servicios (notificación obligatoria)</li>
                                <li>Recepción (notificación obligatoria)</li>
                                <li>Portería (notificación obligatoria)</li>
                                <li>Cada área de servicio de apoyo que solicitaste</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Después de guardar:</strong> El evento quedará en estado "Programado" y aparecerá en la 
                            lista de eventos. Podrás consultarlo pero no editarlo. Si se aprueba, las áreas de apoyo podrán 
                            registrar sus costos.
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 5: Gestión de eventos existentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ul me-2"></i>
                        Gestión de eventos existentes
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Consultar eventos</h5>
                        <p>En la lista de eventos puedes:</p>
                        <ul>
                            <li>Ver todos tus eventos programados, completados, suspendidos o cancelados</li>
                            <li>Filtrar por estado del evento</li>
                            <li>Filtrar por rango de fechas</li>
                            <li>Ver información resumida: nombre, fecha, horario, participantes y estado</li>
                        </ul>

                        <h5 class="mb-3 mt-4">Ver detalle completo</h5>
                        <p>Haz clic en el botón de "ver" (ícono de ojo) para consultar todos los detalles de un evento:</p>
                        <ul>
                            <li>Información básica completa</li>
                            <li>Estado de aprobación (pendiente/aprobado/rechazado)</li>
                            <li>Refrigerios solicitados con costos</li>
                            <li>Personal de apoyo solicitado</li>
                            <li>Servicios de apoyo con sus descripciones</li>
                            <li>Costos registrados por cada área (si ya los registraron)</li>
                        </ul>

                        <h5 class="mb-3 mt-4">Cambiar estado del evento</h5>
                        <p>Si el evento está en estado "Programado", puedes cambiar su estado:</p>
                        <ol>
                            <li>Haz clic en el botón de cambiar estado (ícono de flechas circulares)</li>
                            <li>Selecciona el nuevo estado:
                                <ul>
                                    <li><strong>Completado:</strong> El evento se realizó exitosamente</li>
                                    <li><strong>Suspendido:</strong> El evento se pospuso pero podría realizarse después</li>
                                    <li><strong>Cancelado:</strong> El evento no se realizará</li>
                                </ul>
                            </li>
                            <li>Si seleccionas Suspendido o Cancelado, DEBES indicar el motivo</li>
                            <li>Haz clic en "Confirmar Cambio"</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Sobre el cambio de estado:</strong>
                            <p class="mb-0 mt-2">
                                Una vez cambias el estado a Completado, Suspendido o Cancelado, las áreas de apoyo ya NO 
                                podrán registrar o editar costos. Por eso es importante marcar como Completado solo cuando 
                                el evento realmente se terminó y todas las áreas ya registraron sus costos.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 6: Solución de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Solución de problemas comunes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No me deja seleccionar una fecha
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>La fecha está muy cerca (menos de los días mínimos de antelación configurados).</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Selecciona una fecha con al menos 7 días (o los días configurados) de anticipación</li>
                            <li>Si tienes una urgencia real, contacta al administrador del sistema</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No aparecen menús de refrigerios para seleccionar
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>No hay menús activos en el catálogo de refrigerios.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Contacta al administrador para que active menús en Configuración de Servicios</li>
                            <li>O simplemente no marques refrigerios y continúa sin ellos</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No me deja avanzar del paso 2 aunque no marqué refrigerios
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>Probablemente marcaste la casilla de refrigerios pero no seleccionaste un menú.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Si NO necesitas refrigerios, desmarca la casilla correspondiente</li>
                            <li>Si SÍ necesitas refrigerios, selecciona un menú del catálogo</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No hay aprobadores disponibles en el selector
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>No hay trabajadores con el permiso "Resolución de solicitudes" activos en el sistema.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Contacta al administrador para que asigne este permiso a las personas que pueden aprobar eventos</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Guardé el evento pero el aprobador dice que no le llegó la notificación
                        </div>
                        <p><strong>Posibles causas:</strong></p>
                        <ul>
                            <li>El correo cayó en spam</li>
                            <li>El aprobador no tiene correo registrado o está mal escrito en el sistema</li>
                            <li>Problema temporal del servidor de correos</li>
                        </ul>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Pide al aprobador que revise su carpeta de spam</li>
                            <li>Verifica con el administrador que el correo del aprobador esté correcto</li>
                            <li>Como alternativa, comunica directamente al aprobador y pídele que revise su bandeja de aprobaciones en el sistema</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 7: Buenas prácticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas prácticas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Recomendaciones para eventos exitosos:</h5>

                        <div class="tip-box mb-3">
                            <strong>1. Planifica con tiempo suficiente</strong>
                            <p class="mb-0">
                                Aunque el sistema exige mínimo 7 días, lo ideal es planificar con 2-3 semanas de anticipación. 
                                Esto da tiempo para aprobaciones, coordinación con proveedores y comunicación a familias.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>2. Estima participantes con un margen</strong>
                            <p class="mb-0">
                                Es mejor estimar un 10-15% más de participantes que menos. Es más fácil gestionar refrigerios 
                                sobrantes que faltantes. Sin embargo, sé realista para no desperdiciar recursos.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>3. Sé específico en descripciones de servicios</strong>
                            <p class="mb-0">
                                Cuando solicites servicios de apoyo, no escribas solo "necesito sonido". Especifica: 
                                "2 micrófonos inalámbricos + 2 parlantes grandes + mezclador, instalado a las 8:00 AM 
                                en cancha cubierta". Esto evita malentendidos.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>4. Coordina con las áreas antes de enviar la solicitud</strong>
                            <p class="mb-0">
                                Aunque el sistema notifica automáticamente, es buena práctica contactar informalmente a las 
                                áreas que vas a necesitar (comunicaciones, tecnología, etc.) para confirmar disponibilidad antes.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>5. Revisa el resumen antes de guardar</strong>
                            <p class="mb-0">
                                En el paso 5, tómate el tiempo de revisar TODA la información. Una vez guardado, no podrás 
                                editar el evento, solo cancelarlo y crear uno nuevo.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>6. Marca como completado solo cuando TODO esté listo</strong>
                            <p class="mb-0">
                                No marques el evento como "Completado" el mismo día que se realiza. Espera unos días para 
                                que todas las áreas de apoyo registren sus costos. Una vez marcado como completado, ya no 
                                podrán hacerlo.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>7. Documenta razones de suspensión/cancelación</strong>
                            <p class="mb-0">
                                Si debes suspender o cancelar un evento, sé claro en el motivo. Esto ayuda a estadísticas 
                                futuras y justificaciones institucionales.
                            </p>
                        </div>

                        <div class="tip-box mb-0">
                            <strong>8. Usa los filtros para hacer seguimiento</strong>
                            <p class="mb-0">
                                Filtra regularmente por "Programados" para ver qué eventos tienes pendientes. Filtra por 
                                rango de fechas para analizar eventos pasados o planificar los próximos meses.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 8: Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo editar un evento después de guardarlo?
                        </div>
                        <p>
                            No. Una vez guardado el evento, no se puede editar. Solo puedes cambiar su estado 
                            (Completado/Suspendido/Cancelado). Si necesitas hacer cambios, deberías cancelar el evento 
                            y crear uno nuevo con la información correcta.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué pasa si el aprobador rechaza mi evento?
                        </div>
                        <p>
                            El evento quedará en estado "Rechazado" y el aprobador debe indicar el motivo del rechazo. 
                            Verás este motivo en el detalle del evento. Puedes crear una nueva solicitud corrigiendo 
                            los aspectos que llevaron al rechazo.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Cómo sé si mi evento fue aprobado?
                        </div>
                        <p>
                            Consulta el detalle del evento. En la sección "Estado de Aprobación" verás si está Pendiente, 
                            Aprobado o Rechazado. También puedes recibir una notificación (dependiendo de la configuración 
                            del sistema).
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Los costos de servicios de apoyo se cobran automáticamente?
                        </div>
                        <p>
                            No. Los costos de servicios de apoyo (staffing, comunicaciones, tecnología, organización, 
                            recursos) NO se calculan automáticamente. Cada área responsable debe registrar posteriormente 
                            el costo real de su apoyo usando la página "Costos de Eventos".
                        </p>
                        <p>
                            Solo los refrigerios tienen costo calculado automáticamente porque vienen del catálogo con 
                            precios fijos.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo solicitar varios servicios del mismo tipo?
                        </div>
                        <p>
                            Sí. En el campo de descripción puedes detallar todos los elementos que necesitas. Por ejemplo, 
                            en "Recursos Tecnológicos" puedes solicitar proyector + sonido + computador todo junto. No 
                            necesitas marcar la casilla varias veces.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué diferencia hay entre "Personal de Apoyo" (paso 3) y "Servicios de Apoyo" (paso 4)?
                        </div>
                        <p>
                            <strong>Personal de Apoyo (paso 3):</strong> Son personas extra que necesitas (aseo, cafetería, 
                            mantenimiento, tecnología). Solicitas por cantidad de personas.
                        </p>
                        <p>
                            <strong>Servicios de Apoyo (paso 4):</strong> Son recursos, equipos o actividades que necesitas 
                            de diferentes áreas (proyector, comunicados, organización de mesas, papelería). Solicitas por descripción.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿A quién se notifica cuando creo un evento?
                        </div>
                        <p>Siempre se notifica a:</p>
                        <ul>
                            <li>El aprobador que seleccionaste</li>
                            <li>Coordinación de servicios (siempre, obligatorio)</li>
                            <li>Recepción (siempre, obligatorio)</li>
                            <li>Portería (siempre, obligatorio)</li>
                        </ul>
                        <p>Adicionalmente se notifica a:</p>
                        <ul>
                            <li>Cada área de servicio de apoyo que hayas marcado en el paso 4</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo cancelar un evento después de aprobado?
                        </div>
                        <p>
                            Sí. Incluso si el evento ya fue aprobado, puedes cambiar su estado a "Cancelado" desde la lista 
                            de eventos. Solo asegúrate de indicar claramente el motivo de la cancelación.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué hago si me equivoqué en el número de participantes y ya guardé el evento?
                        </div>
                        <p>
                            Si el evento AÚN NO ha sido aprobado ni las áreas han registrado costos, puedes:
                        </p>
                        <ol>
                            <li>Cancelar el evento actual</li>
                            <li>Crear un nuevo evento con los datos corregidos</li>
                        </ol>
                        <p>
                            Si ya hay costos registrados o aprobaciones, contacta al coordinador de servicios o al administrador 
                            para hacer ajustes administrativos.
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¿Encontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, repórtalo aquí.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOTÓN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CRÍTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACIÓN DE LA PÁGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Servicios',
            modulePath: 'services',
            pageTitle: 'Eventos Internos',
            pagePath: 'internal-events.html',
            moduleDescription: 'Gestión de eventos institucionales internos'
        };

        // ==========================================
        // INICIALIZACIÓN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('📖 Iniciando página de manual...');
            
            try {
                // Verificar si existe la función de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesión si la función existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar información en la página
                updatePageInfo();
                
                console.log('✅ Página de manual lista');
                
            } catch (error) {
                console.error('❌ Error inicializando página:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la página: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACIÓN DE LA PÁGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCIÓN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove después de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
