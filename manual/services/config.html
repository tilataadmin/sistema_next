<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="26.02.08.17.00">
    
    <title>Manual - Servicios - Configuraci√≥n de Servicios - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .step-number {
            background: var(--system-primary-color, #1B365D);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.75rem;
        }

        /* Tarjeta para reportar bugs */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Bot√≥n flotante para reportar bugs */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Lista de caracter√≠sticas */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Subsecciones */
        .subsection-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 3px solid var(--system-primary-color, #1B365D);
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Servicios
                        </h1>
                        <p class="subtitle mb-0">Configuraci√≥n de Servicios</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/services/config.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Servicios</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Configuraci√≥n de Servicios</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCI√ìN 1: ¬øQu√© es? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© es Configuraci√≥n de Servicios?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            La p√°gina de <strong>Configuraci√≥n de Servicios</strong> es el centro de control 
                            administrativo del m√≥dulo de servicios. Aqu√≠ se gestionan todos los cat√°logos, 
                            tarifarios y par√°metros que hacen funcionar el sistema de salidas pedag√≥gicas, 
                            eventos internos, extracurriculares y transporte.
                        </p>
                        
                        <p>
                            Esta p√°gina permite crear y mantener actualizados los destinos de transporte, 
                            las tarifas por capacidad de veh√≠culos, los nodos de recogida y entrega, 
                            el cat√°logo de refrigerios, y los par√°metros generales como d√≠as de antelaci√≥n 
                            y correos de notificaci√≥n.
                        </p>

                        <div class="warning-box">
                            <i class="bi bi-shield-exclamation text-warning me-2"></i>
                            <strong>Importante:</strong> Esta es una p√°gina administrativa sensible. Los cambios 
                            que hagas aqu√≠ afectan directamente c√≥mo se calculan los costos de los servicios y 
                            c√≥mo funcionan las notificaciones. Aseg√∫rate de entender el impacto de cada cambio 
                            antes de guardarlo.
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 2: Caracter√≠sticas principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas principales
                    </h2>
                    
                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>6 secciones organizadas en pesta√±as:</strong> Destinos, Tarifas Estudiantes, 
                                Tarifas Extracurriculares, Nodos, Refrigerios y Par√°metros.</li>
                            
                            <li><strong>Gesti√≥n completa CRUD:</strong> Crear, visualizar, editar y activar/desactivar 
                                registros en cada cat√°logo.</li>
                            
                            <li><strong>Tarifarios diferenciados:</strong> Tarifas por rangos de capacidad para salidas 
                                de estudiantes, y tarifas fijas por capacidad para extracurriculares.</li>
                            
                            <li><strong>Control de vigencia:</strong> Cada registro puede estar activo o inactivo, 
                                permitiendo mantener hist√≥ricos sin eliminar informaci√≥n.</li>
                            
                            <li><strong>Validaciones autom√°ticas:</strong> El sistema valida que las capacidades m√≠nimas 
                                no sean mayores que las m√°ximas, que los correos tengan formato v√°lido, etc.</li>
                            
                            <li><strong>Par√°metros centralizados:</strong> D√≠as m√≠nimos de antelaci√≥n y 8 correos de 
                                notificaci√≥n configurables desde una sola pantalla.</li>
                            
                            <li><strong>Actualizaci√≥n inmediata:</strong> Los cambios en tarifas, destinos o par√°metros 
                                se reflejan inmediatamente en los nuevos servicios creados.</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCI√ìN 3: Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5 class="mb-3">Requisitos previos:</h5>
                        
                        <ul>
                            <li><strong>Permiso necesario:</strong> Debes tener el permiso "Configuraci√≥n de servicios" 
                                activo en tu usuario. Este es un permiso administrativo de alto nivel.</li>
                            
                            <li><strong>Conocimiento del m√≥dulo:</strong> Familiar√≠zate primero con c√≥mo funcionan las 
                                salidas pedag√≥gicas, eventos internos y extracurriculares antes de modificar su configuraci√≥n.</li>
                            
                            <li><strong>Comunicaci√≥n con √°reas:</strong> Algunos cambios (especialmente en correos de 
                                notificaci√≥n) deben coordinarse con las √°reas afectadas.</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Impacto de los cambios:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Cambios en <strong>tarifas</strong> NO afectan servicios ya programados 
                                    (los costos se congelan al programar).</li>
                                <li>Cambios en <strong>correos</strong> afectan inmediatamente las notificaciones 
                                    de nuevos servicios.</li>
                                <li>Cambios en <strong>d√≠as de antelaci√≥n</strong> se aplican inmediatamente a todas 
                                    las nuevas solicitudes.</li>
                                <li>Desactivar un <strong>destino</strong> o <strong>refrigerio</strong> lo oculta 
                                    de los selectores pero no afecta servicios ya creados.</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 4: Gu√≠a paso a paso -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Gu√≠a paso a paso
                    </h2>

                    <!-- SUBSECCI√ìN: Destinos -->
                    <div class="subsection-title">
                        <i class="bi bi-geo-alt me-2"></i>Pesta√±a 1: Destinos de Transporte
                    </div>

                    <div class="step-card">
                        <h5>¬øQu√© son los destinos?</h5>
                        <p>
                            Los destinos son los lugares a los que se pueden realizar salidas pedag√≥gicas o deportivas. 
                            Cada destino tiene un nombre y opcionalmente una direcci√≥n.
                        </p>

                        <h6 class="mt-3">Crear un nuevo destino:</h6>
                        <ol>
                            <li>Haz clic en el bot√≥n <strong>"Nuevo Destino"</strong></li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><strong>Nombre del destino:</strong> Obligatorio. Ejemplo: "Zipaquir√°", "Guasca", "Bogot√° Centro"</li>
                                    <li><strong>Direcci√≥n:</strong> Opcional. Ejemplo: "Calle 10 # 5-23"</li>
                                    <li><strong>Activo:</strong> Deja marcado para que aparezca en los selectores</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <h6 class="mt-3">Editar un destino existente:</h6>
                        <ol>
                            <li>Localiza el destino en la tabla</li>
                            <li>Haz clic en el bot√≥n de editar (√≠cono de l√°piz)</li>
                            <li>Modifica los campos necesarios</li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Buena pr√°ctica:</strong> No elimines destinos. Si un destino ya no se usa, 
                            simplemente desmarca "Activo". Esto mantiene el hist√≥rico de salidas antiguas a ese destino.
                        </div>
                    </div>

                    <!-- SUBSECCI√ìN: Tarifas Estudiantes -->
                    <div class="subsection-title">
                        <i class="bi bi-currency-dollar me-2"></i>Pesta√±a 2: Tarifas para Estudiantes
                    </div>

                    <div class="step-card">
                        <h5>¬øQu√© son las tarifas para estudiantes?</h5>
                        <p>
                            Son los precios de transporte para salidas pedag√≥gicas y deportivas. Se definen por 
                            <strong>destino</strong> y por <strong>rango de capacidad del veh√≠culo</strong>.
                        </p>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Ejemplo de estructura de tarifas:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Zipaquir√°, 1-20 pasajeros ‚Üí $300,000</li>
                                <li>Zipaquir√°, 21-24 pasajeros ‚Üí $350,000</li>
                                <li>Zipaquir√°, 25-40 pasajeros ‚Üí $450,000</li>
                            </ul>
                            <p class="mb-0 mt-2">Cada destino puede tener m√∫ltiples tarifas seg√∫n la capacidad del veh√≠culo.</p>
                        </div>

                        <h6 class="mt-3">Crear una nueva tarifa:</h6>
                        <ol>
                            <li>Aseg√∫rate de que el destino ya existe (si no, cr√©alo primero en la pesta√±a de Destinos)</li>
                            <li>Haz clic en el bot√≥n <strong>"Nueva Tarifa"</strong></li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><strong>Destino:</strong> Selecciona el destino al que aplica la tarifa</li>
                                    <li><strong>Capacidad m√≠nima:</strong> Ejemplo: 1 (para veh√≠culos de 1 a X pasajeros)</li>
                                    <li><strong>Capacidad m√°xima:</strong> Ejemplo: 20 (para veh√≠culos hasta 20 pasajeros)</li>
                                    <li><strong>Valor de la tarifa:</strong> Ejemplo: 300000 (sin puntos ni comas)</li>
                                    <li><strong>Activa:</strong> Deja marcado</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Validaci√≥n importante:</strong> La capacidad m√°xima no puede ser menor que la m√≠nima. 
                            El sistema te avisar√° si intentas guardar rangos inv√°lidos.
                        </div>

                        <h6 class="mt-3">Editar una tarifa existente:</h6>
                        <ol>
                            <li>Localiza la tarifa en la tabla (est√°n ordenadas por destino y capacidad)</li>
                            <li>Haz clic en el bot√≥n de editar</li>
                            <li>Modifica el valor o el estado activo/inactivo</li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Actualizaci√≥n de tarifas:</strong> Los cambios en tarifas NO afectan servicios 
                            ya programados. Los costos se congelan al momento de aprobar una solicitud.
                        </div>
                    </div>

                    <!-- SUBSECCI√ìN: Tarifas Extracurriculares -->
                    <div class="subsection-title">
                        <i class="bi bi-bus-front me-2"></i>Pesta√±a 3: Tarifas para Extracurriculares
                    </div>

                    <div class="step-card">
                        <h5>¬øQu√© son las tarifas extracurriculares?</h5>
                        <p>
                            Son los precios de transporte para actividades extracurriculares. A diferencia de las 
                            tarifas de estudiantes, estas NO se asocian a un destino espec√≠fico, solo a la 
                            <strong>capacidad del veh√≠culo</strong>.
                        </p>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Ejemplo:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Veh√≠culo de 20 pasajeros ‚Üí $180,000 por viaje</li>
                                <li>Veh√≠culo de 30 pasajeros ‚Üí $250,000 por viaje</li>
                            </ul>
                        </div>

                        <h6 class="mt-3">Crear una nueva tarifa extracurricular:</h6>
                        <ol>
                            <li>Haz clic en el bot√≥n <strong>"Nueva Tarifa"</strong></li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><strong>Capacidad del veh√≠culo:</strong> Ejemplo: 20 (significa veh√≠culo de 20 pasajeros)</li>
                                    <li><strong>Valor de la tarifa:</strong> Ejemplo: 180000</li>
                                    <li><strong>Activa:</strong> Deja marcado</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>
                    </div>

                    <!-- SUBSECCI√ìN: Nodos -->
                    <div class="subsection-title">
                        <i class="bi bi-signpost-split me-2"></i>Pesta√±a 4: Nodos de Transporte
                    </div>

                    <div class="step-card">
                        <h5>¬øQu√© son los nodos?</h5>
                        <p>
                            Los nodos son puntos intermedios de recogida o entrega de estudiantes durante salidas 
                            pedag√≥gicas o deportivas. NO son destinos finales, sino paraderos donde los padres 
                            recogen a sus hijos.
                        </p>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Ejemplos de nodos:</strong>
                            <ul class="mb-0 mt-2">
                                <li>Colegio</li>
                                <li>Parque La Calera</li>
                                <li>Cachivaches</li>
                                <li>Unicentro</li>
                            </ul>
                        </div>

                        <h6 class="mt-3">Crear un nuevo nodo:</h6>
                        <ol>
                            <li>Haz clic en el bot√≥n <strong>"Nuevo Nodo"</strong></li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><strong>Nombre del nodo:</strong> Ejemplo: "Parque La Calera"</li>
                                    <li><strong>Descripci√≥n:</strong> Opcional. Ejemplo: "Frente a la iglesia principal"</li>
                                    <li><strong>Orden:</strong> Opcional. Define el orden visual en selectores</li>
                                    <li><strong>Activo:</strong> Deja marcado</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Sobre el orden:</strong> Si defines un orden num√©rico (1, 2, 3...), los nodos 
                            aparecer√°n en ese orden en los selectores. Si no defines orden, aparecer√°n alfab√©ticamente.
                        </div>
                    </div>

                    <!-- SUBSECCI√ìN: Refrigerios -->
                    <div class="subsection-title">
                        <i class="bi bi-cup-hot me-2"></i>Pesta√±a 5: Cat√°logo de Refrigerios
                    </div>

                    <div class="step-card">
                        <h5>¬øQu√© es el cat√°logo de refrigerios?</h5>
                        <p>
                            Es el listado de men√∫s de refrigerios disponibles para salidas pedag√≥gicas y eventos internos. 
                            Cada men√∫ tiene un nombre, descripci√≥n opcional y precio unitario.
                        </p>

                        <h6 class="mt-3">Crear un nuevo men√∫:</h6>
                        <ol>
                            <li>Haz clic en el bot√≥n <strong>"Nuevo Men√∫"</strong></li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><strong>Nombre del men√∫:</strong> Ejemplo: "Refrigerio Est√°ndar", "Almuerzo Ejecutivo"</li>
                                    <li><strong>Descripci√≥n:</strong> Opcional. Ejemplo: "S√°ndwich, jugo y fruta"</li>
                                    <li><strong>Precio unitario:</strong> Ejemplo: 8500 (precio por persona)</li>
                                    <li><strong>Activo:</strong> Deja marcado</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Guardar"</strong></li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Nota:</strong> El precio unitario se multiplica autom√°ticamente por el n√∫mero de 
                            participantes al calcular el costo total de un servicio.
                        </div>
                    </div>

                    <!-- SUBSECCI√ìN: Par√°metros -->
                    <div class="subsection-title">
                        <i class="bi bi-sliders me-2"></i>Pesta√±a 6: Par√°metros del M√≥dulo
                    </div>

                    <div class="step-card">
                        <h5>¬øQu√© son los par√°metros del m√≥dulo?</h5>
                        <p>
                            Son configuraciones generales que controlan el comportamiento del sistema de servicios. 
                            Se dividen en dos grupos:
                        </p>

                        <h6 class="mt-3">A. Par√°metros Generales (num√©ricos):</h6>
                        <ul>
                            <li><strong>D√≠as m√≠nimos de antelaci√≥n:</strong> Tiempo m√≠nimo requerido para programar 
                                un servicio. Ejemplo: 7 (significa que deben programarse con al menos 7 d√≠as de anticipaci√≥n)</li>
                            <li><strong>D√≠as para estado "Inminente":</strong> Cu√°ntos d√≠as antes de la fecha del evento 
                                cambia autom√°ticamente a estado Inminente. Ejemplo: 3</li>
                        </ul>

                        <h6 class="mt-3">B. Correos de Notificaci√≥n (8 correos configurables):</h6>
                        <ul>
                            <li><strong>Talento Humano:</strong> Se notifica cuando un evento interno requiere personal de apoyo</li>
                            <li><strong>Comunicaciones:</strong> Se notifica cuando se requiere apoyo en comunicaciones</li>
                            <li><strong>Recursos Tecnol√≥gicos:</strong> Se notifica cuando se requieren recursos tecnol√≥gicos</li>
                            <li><strong>Organizaci√≥n del Sitio:</strong> Se notifica cuando se requiere organizaci√≥n log√≠stica</li>
                            <li><strong>Recursos:</strong> Se notifica cuando se requiere papeler√≠a o materiales</li>
                            <li><strong>Coordinaci√≥n de Servicios:</strong> Se notifica SIEMPRE de todos los eventos (obligatorio)</li>
                            <li><strong>Recepci√≥n:</strong> Se notifica SIEMPRE de todos los eventos (obligatorio)</li>
                            <li><strong>Porter√≠a:</strong> Se notifica SIEMPRE de todos los eventos (obligatorio)</li>
                        </ul>

                        <h6 class="mt-3">Modificar par√°metros:</h6>
                        <ol>
                            <li>Ve a la pesta√±a <strong>"Par√°metros"</strong></li>
                            <li>Modifica los valores directamente en los campos de texto</li>
                            <li>Para correos, aseg√∫rate de usar direcciones v√°lidas (formato usuario@dominio.com)</li>
                            <li>Haz clic en el bot√≥n <strong>"Guardar Cambios"</strong> al final de la p√°gina</li>
                            <li>El sistema te indicar√° cu√°ntos par√°metros fueron actualizados</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>¬°Cuidado con los correos!</strong> Los tres √∫ltimos correos (Coordinaci√≥n, Recepci√≥n, 
                            Porter√≠a) reciben notificaci√≥n de TODOS los eventos. Aseg√∫rate de que las direcciones sean 
                            correctas y que las personas est√©n al tanto de que recibir√°n estas notificaciones.
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 5: Soluci√≥n de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Soluci√≥n de problemas comunes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No me permite guardar una tarifa
                        </div>
                        <p><strong>Posibles causas:</strong></p>
                        <ul>
                            <li>La capacidad m√°xima es menor que la m√≠nima</li>
                            <li>No seleccionaste un destino (para tarifas de estudiantes)</li>
                            <li>El valor de la tarifa est√° en blanco o es negativo</li>
                            <li>Ya existe una tarifa con el mismo destino y rango de capacidad</li>
                        </ul>
                        <p><strong>Soluci√≥n:</strong></p>
                        <ul>
                            <li>Verifica que la capacidad m√°xima sea mayor o igual que la m√≠nima</li>
                            <li>Aseg√∫rate de completar todos los campos obligatorios (marcados con *)</li>
                            <li>Revisa si ya existe una tarifa similar y ed√≠tala en lugar de crear una nueva</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Cambi√© un destino pero sigue apareciendo el nombre anterior en solicitudes viejas
                        </div>
                        <p><strong>Esto es correcto:</strong></p>
                        <p>
                            Las solicitudes de servicios guardan una copia del nombre del destino al momento de crearlas. 
                            Esto es intencional para mantener el hist√≥rico exacto. Los cambios en el cat√°logo de destinos 
                            solo afectan nuevas solicitudes.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Actualic√© una tarifa pero el sistema sigue mostrando el valor antiguo en una solicitud
                        </div>
                        <p><strong>Esto es correcto:</strong></p>
                        <p>
                            Una vez que una solicitud es aprobada, los costos se congelan y ya no se recalculan. 
                            Los cambios en tarifarios solo afectan nuevas solicitudes. Esto garantiza estabilidad 
                            presupuestal y evita confusiones.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Los correos de notificaci√≥n no est√°n llegando
                        </div>
                        <p><strong>Posibles causas:</strong></p>
                        <ul>
                            <li>El correo est√° mal escrito en la configuraci√≥n</li>
                            <li>El correo est√° en la carpeta de spam</li>
                            <li>Problema general del sistema de correos</li>
                        </ul>
                        <p><strong>Soluci√≥n:</strong></p>
                        <ul>
                            <li>Verifica la ortograf√≠a del correo en la pesta√±a de Par√°metros</li>
                            <li>Pide a los destinatarios que revisen spam y agreguen el remitente a contactos confiables</li>
                            <li>Contacta al administrador del sistema si el problema persiste</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Desactiv√© un destino pero a√∫n aparece en el selector al crear una salida
                        </div>
                        <p><strong>Posible causa:</strong></p>
                        <p>
                            Puede haber un cach√© del navegador que est√° mostrando informaci√≥n antigua.
                        </p>
                        <p><strong>Soluci√≥n:</strong></p>
                        <ul>
                            <li>Recarga la p√°gina con F5 o Ctrl+F5</li>
                            <li>Cierra sesi√≥n y vuelve a entrar</li>
                            <li>Si persiste, limpia la cach√© del navegador</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCI√ìN 6: Buenas pr√°cticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas pr√°cticas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Recomendaciones para una configuraci√≥n √≥ptima:</h5>

                        <div class="tip-box mb-3">
                            <strong>1. Mant√©n hist√≥ricos, no elimines</strong>
                            <p class="mb-0">
                                En lugar de eliminar destinos, tarifas o men√∫s antiguos, m√°rcalos como inactivos. 
                                Esto preserva el hist√≥rico de servicios pasados y permite reactivarlos f√°cilmente 
                                si vuelven a necesitarse.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>2. Actualiza tarifas a inicio de a√±o</strong>
                            <p class="mb-0">
                                Coordina con el proveedor de transporte para actualizar todas las tarifas al inicio 
                                del a√±o escolar. Esto evita cambios frecuentes y facilita la planificaci√≥n presupuestal.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>3. Usa nombres descriptivos</strong>
                            <p class="mb-0">
                                En destinos y nodos, usa nombres claros que todos entiendan. Ejemplo: "Parque Principal 
                                La Calera" en lugar de solo "Parque". Esto reduce confusiones.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>4. Documenta cambios en correos</strong>
                            <p class="mb-0">
                                Antes de cambiar un correo de notificaci√≥n, informa a las personas afectadas. Esto 
                                evita que servicios importantes pasen desapercibidos.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>5. Verifica rangos de capacidad sin solapamientos</strong>
                            <p class="mb-0">
                                Al crear tarifas, aseg√∫rate de que los rangos de capacidad no se solapen. 
                                Ejemplo: 1-20, 21-30, 31-40 (NO 1-20, 20-30, 30-40).
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>6. Establece d√≠as de antelaci√≥n realistas</strong>
                            <p class="mb-0">
                                El par√°metro de d√≠as m√≠nimos debe dar tiempo suficiente para: aprobaciones, 
                                coordinaci√≥n con proveedor, notificaciones a familias. M√≠nimo recomendado: 7 d√≠as.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>7. Revisa configuraci√≥n trimestralmente</strong>
                            <p class="mb-0">
                                Dedica tiempo cada trimestre para revisar que los cat√°logos est√©n actualizados, 
                                los correos sean correctos y las tarifas reflejen los acuerdos vigentes.
                            </p>
                        </div>

                        <div class="tip-box mb-0">
                            <strong>8. Coordina con el √°rea financiera</strong>
                            <p class="mb-0">
                                Los cambios en tarifas deben estar alineados con los contratos y presupuestos 
                                institucionales. Valida siempre con el √°rea financiera antes de actualizar valores.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 7: Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPuedo tener varias tarifas para el mismo destino?
                        </div>
                        <p>
                            S√≠. De hecho, es lo normal. Un mismo destino debe tener m√∫ltiples tarifas seg√∫n el 
                            rango de capacidad del veh√≠culo. Ejemplo: Zipaquir√° con tarifa para 1-20 pasajeros, 
                            otra para 21-30, y otra para 31-40.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øC√≥mo sabe el sistema qu√© tarifa aplicar?
                        </div>
                        <p>
                            Cuando se crea una solicitud de salida, el sistema:
                        </p>
                        <ol>
                            <li>Cuenta el total de participantes (estudiantes + adultos)</li>
                            <li>Busca en la tabla de tarifas del destino seleccionado</li>
                            <li>Encuentra el rango de capacidad que incluye ese n√∫mero de participantes</li>
                            <li>Aplica la tarifa correspondiente</li>
                        </ol>
                        <p>
                            Si no encuentra una tarifa activa que cubra ese n√∫mero de participantes, mostrar√° un error.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øQu√© pasa si actualizo el precio de un refrigerio?
                        </div>
                        <p>
                            Los servicios ya creados y aprobados mantienen el precio antiguo (se congela al aprobar). 
                            Solo las nuevas solicitudes usar√°n el precio actualizado.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPuedo eliminar un destino que ya se us√≥ en salidas anteriores?
                        </div>
                        <p>
                            T√©cnicamente no hay eliminaci√≥n en el sistema, pero puedes marcarlo como inactivo. 
                            Esto lo oculta de los selectores para nuevas solicitudes pero no afecta las salidas 
                            hist√≥ricas a ese destino.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPor qu√© hay tarifas diferentes para estudiantes y extracurriculares?
                        </div>
                        <p>
                            Porque tienen l√≥gicas diferentes:
                        </p>
                        <ul>
                            <li><strong>Salidas de estudiantes:</strong> Tarifa por destino + capacidad (cada viaje 
                                puede ser a un lugar diferente)</li>
                            <li><strong>Extracurriculares:</strong> Tarifa solo por capacidad (los destinos son fijos 
                                y conocidos, no es necesario especificarlos)</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øQui√©n deber√≠a recibir las notificaciones de Coordinaci√≥n, Recepci√≥n y Porter√≠a?
                        </div>
                        <p>
                            Estas son notificaciones obligatorias que se env√≠an en TODOS los eventos. Deben configurarse 
                            con correos de √°reas que necesiten estar al tanto de todos los movimientos:
                        </p>
                        <ul>
                            <li><strong>Coordinaci√≥n:</strong> Quien supervisa todas las salidas y eventos</li>
                            <li><strong>Recepci√≥n:</strong> Para gestionar llamadas de familias sobre salidas</li>
                            <li><strong>Porter√≠a:</strong> Para control de acceso en eventos internos y llegada/salida 
                                de veh√≠culos</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øCada cu√°nto debo actualizar las tarifas?
                        </div>
                        <p>
                            Depende de tu contrato con el proveedor. Lo usual es actualizarlas:
                        </p>
                        <ul>
                            <li>Una vez al a√±o (inicio de a√±o escolar)</li>
                            <li>Cuando hay cambios en el contrato con el proveedor</li>
                            <li>Cuando hay ajustes inflacionarios pactados</li>
                        </ul>
                        <p>
                            No es necesario ni recomendable cambiarlas con mucha frecuencia.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPuedo configurar diferentes precios de refrigerios para estudiantes y adultos?
                        </div>
                        <p>
                            S√≠, pero no desde esta p√°gina. Los precios diferenciados para estudiantes y adultos se 
                            manejan al momento de crear el evento interno, no en el cat√°logo. En el cat√°logo solo 
                            defines los men√∫s disponibles y su precio unitario gen√©rico.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øQu√© hago si el proveedor cambia las tarifas a mitad de a√±o?
                        </div>
                        <p>
                            Tienes dos opciones:
                        </p>
                        <ol>
                            <li><strong>Desactivar tarifas antiguas y crear nuevas:</strong> Marca las tarifas actuales 
                                como inactivas y crea nuevas tarifas con los valores actualizados. Los servicios ya 
                                aprobados mantienen el valor antiguo.</li>
                            <li><strong>Editar tarifas existentes:</strong> Modifica directamente los valores. Solo 
                                afecta nuevas solicitudes.</li>
                        </ol>
                        <p>
                            La primera opci√≥n es mejor para mantener hist√≥rico claro de cambios.
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Servicios',
            modulePath: 'services',
            pageTitle: 'Configuraci√≥n de Servicios',
            pagePath: 'config.html',
            moduleDescription: 'Gesti√≥n de cat√°logos, tarifarios y par√°metros del m√≥dulo'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
