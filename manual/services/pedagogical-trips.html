<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSIÓN DE LA PÁGINA -->
    <meta name="page-version" content="26.02.08.19.00">
    
    <title>Manual - Servicios - Salidas Pedagógicas - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSIÓN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .step-number {
            background: var(--system-primary-color, #1B365D);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.75rem;
        }

        /* Tarjeta para reportar bugs - COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Botón flotante para reportar bugs - COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .floating-bug-button:hover,
        .floating-bug-button:focus,
        .floating-bug-button:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Lista de características */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Subsecciones */
        .subsection-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 3px solid var(--system-primary-color, #1B365D);
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Servicios
                        </h1>
                        <p class="subtitle mb-0">Salidas Pedagógicas</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/services/pedagogical-trips.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al Módulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACIÓN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Servicios</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Salidas Pedagógicas</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras algún problema,<br>
                                puedes reportarlo usando el botón de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCIÓN 1: ¿Qué es? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¿Qué son las Salidas Pedagógicas?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            Las <strong>Salidas Pedagógicas</strong> son actividades educativas fuera del colegio que 
                            requieren transporte, como visitas a museos, zoológicos, parques, empresas, bibliotecas, 
                            teatros, y otros espacios que complementan el aprendizaje en aula.
                        </p>
                        
                        <p>
                            Este módulo gestiona TODO el ciclo de vida de una salida: desde la planeación inicial, 
                            solicitud de aprobación, cálculo automático de costos de transporte, registro de asistencia 
                            de estudiantes, hasta el banderazo de salida y el seguimiento del evento.
                        </p>

                        <p><strong>Diferencias clave:</strong></p>
                        <ul>
                            <li><strong>vs Eventos Internos:</strong> Las salidas salen del colegio y requieren transporte. 
                                Los eventos internos se realizan en las instalaciones.</li>
                            <li><strong>vs Salidas Deportivas:</strong> Las salidas pedagógicas son educativas/culturales. 
                                Las deportivas son competencias o entrenamientos.</li>
                            <li><strong>vs Extracurriculares:</strong> Las salidas pedagógicas son puntuales. Las 
                                extracurriculares son recurrentes (mismo día de la semana, todo el semestre).</li>
                        </ul>

                        <div class="info-box">
                            <i class="bi bi-lightbulb text-info me-2"></i>
                            <strong>Ciclo completo:</strong>
                            <p class="mb-0 mt-2">
                                1. Creas la salida (wizard 5 pasos) → 2. Se envía a aprobación → 3. Aprobador autoriza/rechaza → 
                                4. Si aprueba, cambia a estado "Programación" → 5. X días antes, cambia automáticamente a 
                                "Inminente" → 6. Registras asistencia de estudiantes → 7. Das banderazo → 8. Estado "En proceso" → 
                                9. Al completar, marca como "Realizada"
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 2: Características principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Características principales
                    </h2>
                    
                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Wizard guiado de 5 pasos:</strong> Creación paso a paso con validaciones en cada etapa.</li>
                            
                            <li><strong>Cálculo automático de estudiantes:</strong> Seleccionas grados y el sistema cuenta automáticamente 
                                los estudiantes activos de esos grados. No tienes que contar manualmente.</li>
                            
                            <li><strong>Optimización inteligente de transporte:</strong> El sistema calcula automáticamente cuántos 
                                vehículos necesitas, de qué capacidad, y el costo total optimizado usando tarifas por rango de capacidad.</li>
                            
                            <li><strong>Congelamiento de tarifas:</strong> Al crear la salida, las tarifas de transporte se congelan. 
                                Cambios futuros en el tarifario no afectan salidas ya aprobadas.</li>
                            
                            <li><strong>Gestión de estados automática:</strong> Las salidas cambian automáticamente a "Inminente" X días 
                                antes de la fecha (configurado en parámetros).</li>
                            
                            <li><strong>Registro de asistencia avanzado:</strong> Lista completa de estudiantes por curso, con posibilidad 
                                de desvincular estudiantes que no asisten (con motivo documentado).</li>
                            
                            <li><strong>Servicios opcionales flexibles:</strong> Refrigerios y entradas son completamente opcionales y 
                                se calculan automáticamente si los activas.</li>
                            
                            <li><strong>Edición inteligente:</strong> Puedes editar salidas que NO han sido aprobadas. Una vez aprobadas, 
                                solo puedes suspenderlas o darles seguimiento.</li>
                            
                            <li><strong>Filtros avanzados:</strong> Filtra salidas por fechas, estado, o grados específicos.</li>
                            
                            <li><strong>Notificaciones automáticas:</strong> Email al aprobador con todos los detalles de la solicitud.</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 3: Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5 class="mb-3">Requisitos previos:</h5>
                        
                        <ul>
                            <li><strong>Permiso necesario:</strong> Debes tener el permiso "Salidas pedagógicas" activo.</li>
                            
                            <li><strong>Planificación con antelación:</strong> Las salidas deben programarse con al menos 7 días 
                                de anticipación (o los días configurados por el administrador). El sistema NO permite fechas 
                                menores a este mínimo.</li>
                            
                            <li><strong>Destinos activos:</strong> Debe haber al menos un destino de transporte activo en el catálogo 
                                (configurado en Configuración de Servicios).</li>
                            
                            <li><strong>Tarifario de transporte:</strong> Debe haber tarifas de transporte activas por rango de 
                                capacidad (configuradas en Configuración de Servicios).</li>
                            
                            <li><strong>Aprobadores disponibles:</strong> Debe haber al menos un trabajador con permiso de 
                                "Resolución de solicitudes".</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Importante sobre aprobaciones:</strong>
                            <p class="mb-0 mt-2">
                                Una vez que una salida es aprobada, NO puedes editarla ni eliminarla. Solo puedes suspenderla 
                                o darle seguimiento. Por eso es crítico revisar bien toda la información antes de enviar a aprobación.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 4: Guía paso a paso - WIZARD -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-list-ol me-2"></i>
                        Crear una Nueva Salida (Wizard de 5 Pasos)
                    </h2>

                    <p class="mb-4">
                        El proceso de creación está dividido en 5 pasos claros. El sistema valida que completes cada paso 
                        correctamente antes de permitirte avanzar al siguiente.
                    </p>

                    <!-- PASO 1 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">1</span>
                            Información General
                        </h5>
                        <p class="mt-3">Define los aspectos fundamentales de la salida:</p>

                        <h6 class="mt-3">Campos obligatorios:</h6>
                        <ul>
                            <li><strong>Grados participantes:</strong> Selecciona uno o múltiples grados (mantén presionado Ctrl 
                                para seleccionar varios). El sistema calculará automáticamente cuántos estudiantes hay en esos grados.</li>
                            
                            <li><strong>Destino:</strong> Selecciona del catálogo de destinos configurados. Ejemplo: "Museo del Oro", 
                                "Zoológico de Santa Cruz", "Parque Explora".</li>
                            
                            <li><strong>Fecha de salida:</strong> DEBE ser al menos 7 días en el futuro (o los días configurados). 
                                El sistema te avisará si no cumples este requisito.</li>
                            
                            <li><strong>Hora de salida:</strong> Hora en que los vehículos partirán del colegio.</li>
                            
                            <li><strong>Hora de regreso:</strong> Hora estimada de regreso al colegio. Debe ser posterior a la 
                                hora de salida.</li>
                            
                            <li><strong>Modalidad de transporte:</strong>
                                <ul>
                                    <li><strong>Solo ida:</strong> El colegio proporciona transporte de ida, las familias recogen 
                                        a los estudiantes en el destino</li>
                                    <li><strong>Solo regreso:</strong> Las familias llevan a los estudiantes al destino, el colegio 
                                        proporciona transporte de regreso</li>
                                    <li><strong>Ida y vuelta:</strong> El colegio proporciona transporte completo (más común)</li>
                                </ul>
                            </li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Validación de fecha:</strong> El sistema te mostrará en tiempo real si la fecha cumple 
                            el requisito de días mínimos de antelación. Si la fecha es inválida, no podrás avanzar al siguiente paso.
                        </div>
                    </div>

                    <!-- PASO 2 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">2</span>
                            Descripción de la Salida
                        </h5>
                        <p class="mt-3">Documenta el propósito y detalles pedagógicos:</p>

                        <h6 class="mt-3">Campos:</h6>
                        <ul>
                            <li><strong>Descripción (obligatorio):</strong> Explica el objetivo de la salida, qué actividades se 
                                realizarán, qué aprenderán los estudiantes. Sea claro y específico.</li>
                            
                            <li><strong>Unidad de indagación (opcional):</strong> Si la salida está vinculada a una unidad de indagación 
                                del currículo IB o a un tema específico del plan de estudios, documéntalo aquí.</li>
                            
                            <li><strong>Observaciones (opcional):</strong> Cualquier información adicional relevante: recomendaciones 
                                de vestimenta, elementos que deben llevar los estudiantes, restricciones del lugar, etc.</li>
                        </ul>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Buena práctica:</strong> Sé específico en la descripción. En lugar de escribir "Visita al museo", 
                            escribe "Visita al Museo del Oro para observar piezas precolombinas y su relación con el tema de 
                            civilizaciones antiguas de la unidad 3 de Sociales".
                        </div>
                    </div>

                    <!-- PASO 3 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">3</span>
                            Participantes
                        </h5>
                        <p class="mt-3">Confirma cuántas personas irán:</p>

                        <h6 class="mt-3">Estudiantes (automático):</h6>
                        <p>
                            El sistema calcula automáticamente cuántos estudiantes activos hay en los grados que seleccionaste 
                            en el Paso 1. También te muestra el desglose por grado.
                        </p>
                        <p>
                            <strong>Ejemplo:</strong> Si seleccionaste 4° y 5°, el sistema podría mostrar:<br>
                            <em>Número de estudiantes: 58</em><br>
                            <em>Desglose: Cuarto: 30, Quinto: 28</em>
                        </p>

                        <h6 class="mt-3">Adultos (manual):</h6>
                        <ul>
                            <li><strong>Número de adultos:</strong> Cuántos adultos acompañarán (docentes, padres voluntarios, 
                                coordinadores). Puedes poner 0 si no va ningún adulto.</li>
                            
                            <li><strong>Adultos acompañantes (opcional):</strong> Nombres de los adultos, separados por comas. 
                                Ejemplo: "María García, Pedro López, Ana Ruiz"</li>
                        </ul>

                        <h6 class="mt-3">Total de participantes:</h6>
                        <p>
                            El sistema suma automáticamente estudiantes + adultos y muestra el total. Este total se usará para:
                        </p>
                        <ul>
                            <li>Calcular cuántos vehículos se necesitan</li>
                            <li>Calcular costos de refrigerios (si los activas)</li>
                            <li>Calcular costos de entradas (si las activas)</li>
                        </ul>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>¿Por qué estudiantes es automático?</strong> Para evitar errores humanos. El sistema cuenta 
                            directamente de la base de datos cuántos estudiantes activos hay en cada curso de cada grado.
                        </div>
                    </div>

                    <!-- PASO 4 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">4</span>
                            Servicios Opcionales
                        </h5>
                        <p class="mt-3">Decide si incluir refrigerios y/o entradas:</p>

                        <h6 class="mt-3">Refrigerios (opcional):</h6>
                        <ol>
                            <li>Marca la casilla "Incluir Refrigerios"</li>
                            <li>Selecciona un menú del catálogo (configurado en Configuración de Servicios)</li>
                            <li>La cantidad se auto-llena con el total de participantes. Puedes modificarla si necesitas 
                                un número diferente (por ejemplo, si no todos los participantes recibirán refrigerio)</li>
                            <li>El costo se calcula automáticamente: Precio unitario × Cantidad</li>
                        </ol>

                        <h6 class="mt-3">Entradas (opcional):</h6>
                        <ol>
                            <li>Marca la casilla "Incluir Entradas"</li>
                            <li>Escribe el valor unitario de la entrada (lo que cobra el destino por persona)</li>
                            <li>El costo se calcula automáticamente: Valor entrada × Total participantes</li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Consejo:</strong> Si el destino cobra entrada diferenciada (niños vs adultos), promedia 
                            o usa el valor más alto. En Observaciones (Paso 2) puedes aclarar estos detalles.
                        </div>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Servicios opcionales vs obligatorios:</strong>
                            <ul class="mt-2 mb-0">
                                <li>El <strong>transporte es obligatorio</strong> (por definición de "salida pedagógica"). 
                                    Su costo se calcula automáticamente en el Paso 5.</li>
                                <li>Los refrigerios y entradas son opcionales. Si no los necesitas, simplemente no los marques.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- PASO 5 -->
                    <div class="step-card">
                        <h5>
                            <span class="step-number">5</span>
                            Aprobación y Resumen
                        </h5>
                        <p class="mt-3">Última revisión antes de enviar:</p>

                        <h6 class="mt-3">Seleccionar aprobador:</h6>
                        <p>
                            Elige del selector quién debe aprobar esta salida. Solo aparecen trabajadores con permiso de 
                            "Resolución de solicitudes". Esta persona recibirá un correo electrónico con todos los detalles.
                        </p>

                        <h6 class="mt-3">Comentarios/Justificación (opcional):</h6>
                        <p>
                            Información adicional para el aprobador. Ejemplo: "Esta salida está alineada con el proyecto 
                            de ciencias del segundo trimestre" o "Los padres ya fueron informados en la reunión del martes".
                        </p>

                        <h6 class="mt-3">Resumen de Costos:</h6>
                        <p>El sistema muestra un desglose completo de costos:</p>
                        <ul>
                            <li><strong>Transporte:</strong> Calculado automáticamente. Incluye desglose de vehículos:
                                <ul>
                                    <li>Cuántos vehículos se necesitan</li>
                                    <li>De qué capacidad cada uno</li>
                                    <li>Cuántos pasajeros va en cada vehículo</li>
                                    <li>Tarifa de cada vehículo</li>
                                </ul>
                            </li>
                            <li><strong>Refrigerios:</strong> Si los activaste, muestra el costo total</li>
                            <li><strong>Entradas:</strong> Si las activaste, muestra el costo total</li>
                            <li><strong>TOTAL:</strong> Suma de todos los conceptos</li>
                        </ul>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Cálculo inteligente de transporte:</strong>
                            <p class="mb-0 mt-2">
                                El sistema usa una función de optimización que selecciona automáticamente la combinación de 
                                vehículos más eficiente según el tarifario. Por ejemplo, si tienes 45 participantes, podría 
                                asignar 1 vehículo de 30 pasajeros + 1 vehículo de 20 pasajeros, en lugar de 3 vehículos de 
                                20, dependiendo de las tarifas configuradas.
                            </p>
                        </div>

                        <h6 class="mt-3">Guardar y Solicitar Aprobación:</h6>
                        <ol>
                            <li>Revisa cuidadosamente el resumen completo</li>
                            <li>Si encuentras algún error, usa el botón "Anterior" para regresar y corregir</li>
                            <li>Cuando todo esté correcto, haz clic en <strong>"Guardar y Solicitar Aprobación"</strong></li>
                            <li>El sistema:
                                <ul>
                                    <li>Guarda la salida</li>
                                    <li>Crea la solicitud de aprobación</li>
                                    <li>Envía email al aprobador</li>
                                    <li>Te regresa a la lista de salidas</li>
                                </ul>
                            </li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Después de guardar:</strong> La salida quedará en estado "Programación" con aprobación 
                            "Pendiente". NO puedes editarla hasta que sea rechazada (si es rechazada, puedes eliminarla y crear 
                            una nueva). Si es aprobada, ya NO podrás editarla ni eliminarla nunca más.
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 5: Estados y flujo -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-diagram-3 me-2"></i>
                        Estados y Flujo de una Salida
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Estados posibles:</h5>

                        <div class="mb-3">
                            <span class="badge bg-primary me-2">Programación</span>
                            <p class="mt-2 ms-4">
                                Estado inicial después de crear la salida. Permanece así hasta que el sistema la cambie 
                                automáticamente a "Inminente" X días antes (configurado en parámetros del módulo, típicamente 7 días).
                            </p>
                        </div>

                        <div class="mb-3">
                            <span class="badge bg-warning me-2">Inminente</span>
                            <p class="mt-2 ms-4">
                                El sistema cambia automáticamente a este estado cuando faltan X días para la salida. En este estado:
                            </p>
                            <ul class="ms-4">
                                <li>Puedes registrar asistencia de estudiantes</li>
                                <li>Puedes dar banderazo cuando los vehículos partan</li>
                                <li>Puedes suspender la salida si surge un inconveniente</li>
                            </ul>
                        </div>

                        <div class="mb-3">
                            <span class="badge bg-success me-2">En proceso</span>
                            <p class="mt-2 ms-4">
                                Después de dar banderazo, la salida cambia a este estado. Significa que los vehículos ya partieron 
                                y la salida está en curso. Solo puedes suspenderla si ocurre algo grave.
                            </p>
                        </div>

                        <div class="mb-3">
                            <span class="badge bg-secondary me-2">Realizada</span>
                            <p class="mt-2 ms-4">
                                Estado final exitoso. Marca la salida como completada cuando los estudiantes regresen al colegio.
                            </p>
                        </div>

                        <div class="mb-3">
                            <span class="badge bg-danger me-2">Suspendida</span>
                            <p class="mt-2 ms-4">
                                Si por cualquier motivo (clima, orden público, transporte, destino, etc.) la salida no puede realizarse, 
                                se suspende. DEBES indicar el motivo.
                            </p>
                        </div>

                        <div class="mb-3">
                            <span class="badge bg-dark me-2">Cancelada</span>
                            <p class="mt-2 ms-4">
                                Similar a suspendida, pero implica que definitivamente no se realizará (suspendida podría reprogramarse).
                            </p>
                        </div>

                        <div class="info-box mt-4">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Flujo típico exitoso:</strong>
                            <p class="mb-0 mt-2">
                                Programación → Inminente (automático) → En proceso (al dar banderazo) → Realizada (al completar)
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 6: Acciones disponibles -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-gear me-2"></i>
                        Acciones Disponibles por Estado
                    </h2>

                    <div class="subsection-title">
                        <i class="bi bi-circle-fill me-2" style="font-size: 0.5rem;"></i>
                        En Estado: Programación
                    </div>

                    <div class="step-card">
                        <ul>
                            <li><strong>Ver detalle:</strong> Siempre disponible. Muestra toda la información de la salida.</li>
                            <li><strong>Editar:</strong> SOLO si la solicitud NO ha sido aprobada. Abre el wizard con los datos cargados.</li>
                            <li><strong>Eliminar:</strong> SOLO si la solicitud NO ha sido aprobada.</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            Una vez aprobada, no puedes editar ni eliminar. Si necesitas cambios mayores en una salida aprobada, 
                            debes suspenderla y crear una nueva.
                        </div>
                    </div>

                    <div class="subsection-title">
                        <i class="bi bi-circle-fill me-2" style="font-size: 0.5rem;"></i>
                        En Estado: Inminente
                    </div>

                    <div class="step-card">
                        <h6>1. Registrar Asistencia:</h6>
                        <p>Abre un panel lateral (offcanvas) con la lista completa de estudiantes agrupados por curso:</p>
                        <ul>
                            <li>Muestra resumen: Planeados, Confirmados, Desvinculados</li>
                            <li>Buscador para filtrar estudiantes por nombre</li>
                            <li>Checkbox por cada estudiante (marcado = irá a la salida)</li>
                            <li>Opción de desvincular estudiantes seleccionados (para aquellos que NO irán)</li>
                        </ul>

                        <p class="mt-3"><strong>Desvincular estudiantes:</strong></p>
                        <ol>
                            <li>Desmarca los checkboxes de estudiantes que NO irán</li>
                            <li>Haz clic en "Desvincular seleccionados"</li>
                            <li>Escribe el motivo (obligatorio): "No presentó autorización", "Incapacidad médica", "No asistió", etc.</li>
                            <li>Los estudiantes desvinculados quedan documentados con su razón</li>
                            <li>El número de "Estudiantes reales" se actualiza automáticamente</li>
                        </ol>

                        <h6 class="mt-3">2. Dar Banderazo:</h6>
                        <p>Cuando los vehículos estén listos para partir:</p>
                        <ol>
                            <li>Haz clic en el botón de banderazo (ícono de bandera)</li>
                            <li>Confirma la acción</li>
                            <li>El estado cambia automáticamente a "En proceso"</li>
                            <li>Ya NO puedes registrar más asistencia (se congela)</li>
                        </ol>

                        <h6 class="mt-3">3. Suspender:</h6>
                        <p>Si por algún motivo la salida no puede realizarse:</p>
                        <ol>
                            <li>Haz clic en "Suspender"</li>
                            <li>Selecciona una razón predefinida o elige "Otro"</li>
                            <li>Escribe los detalles (obligatorio)</li>
                            <li>Confirma</li>
                            <li>El estado cambia a "Suspendida"</li>
                        </ol>
                    </div>

                    <div class="subsection-title">
                        <i class="bi bi-circle-fill me-2" style="font-size: 0.5rem;"></i>
                        En Estado: En Proceso
                    </div>

                    <div class="step-card">
                        <p>Solo puedes:</p>
                        <ul>
                            <li><strong>Ver detalle:</strong> Consultar información</li>
                            <li><strong>Suspender:</strong> Si ocurre algo grave durante la salida</li>
                        </ul>
                        <p>Idealmente, cuando regresen, marcas manualmente el estado como "Realizada" (esto lo hace el administrador o hay un proceso automático según configuración).</p>
                    </div>
                </section>

                <!-- SECCIÓN 7: Filtros -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-funnel me-2"></i>
                        Usar Filtros de Búsqueda
                    </h2>

                    <div class="step-card">
                        <p>El panel de filtros te ayuda a encontrar salidas específicas:</p>

                        <h6 class="mt-3">Filtros disponibles:</h6>
                        <ul>
                            <li><strong>Fecha inicio:</strong> Solo muestra salidas desde esta fecha en adelante</li>
                            <li><strong>Fecha fin:</strong> Solo muestra salidas hasta esta fecha</li>
                            <li><strong>Estado:</strong> Filtra por estado específico (Programación, Inminente, etc.)</li>
                            <li><strong>Grado:</strong> Filtra salidas que incluyan cualquiera de los grados seleccionados (puedes seleccionar múltiples)</li>
                        </ul>

                        <h6 class="mt-3">Cómo usar:</h6>
                        <ol>
                            <li>Abre el panel de filtros (si está colapsado)</li>
                            <li>Completa los criterios que necesites (no es necesario completar todos)</li>
                            <li>Haz clic en "Filtrar"</li>
                            <li>La tabla se actualiza mostrando solo las salidas que cumplan los criterios</li>
                            <li>El contador de resultados te indica cuántas salidas se encontraron</li>
                        </ol>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Filtro de grado útil:</strong> Si quieres ver todas las salidas de un grado específico 
                            (sin importar fechas), solo selecciona ese grado y haz clic en Filtrar.
                        </div>

                        <p class="mt-3"><strong>Limpiar filtros:</strong></p>
                        <p>Haz clic en "Limpiar" para resetear todos los filtros y ver nuevamente todas las salidas.</p>
                    </div>
                </section>

                <!-- SECCIÓN 8: Solución de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Solución de problemas comunes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No me deja avanzar del Paso 1 aunque completé todos los campos
                        </div>
                        <p><strong>Causa más común:</strong></p>
                        <p>La fecha de la salida no cumple el mínimo de días de antelación.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Revisa el mensaje que aparece debajo del campo de fecha</li>
                            <li>Selecciona una fecha que cumpla el mínimo requerido (típicamente 7 días o más)</li>
                            <li>El sistema te indicará en verde cuando la fecha sea válida</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            El número de estudiantes aparece en 0
                        </div>
                        <p><strong>Causas posibles:</strong></p>
                        <ul>
                            <li>No seleccionaste ningún grado en el Paso 1</li>
                            <li>Los grados seleccionados no tienen cursos activos</li>
                            <li>Los cursos no tienen estudiantes activos matriculados</li>
                        </ul>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Regresa al Paso 1 y verifica que hayas seleccionado al menos un grado</li>
                            <li>Si seleccionaste grados y aún sale 0, contacta al administrador para verificar que los cursos y estudiantes estén correctamente configurados</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            El costo de transporte aparece en $0
                        </div>
                        <p><strong>Causas posibles:</strong></p>
                        <ul>
                            <li>No seleccionaste un destino</li>
                            <li>No hay participantes (estudiantes + adultos = 0)</li>
                            <li>No hay tarifas de transporte configuradas para ese destino en el tarifario</li>
                        </ul>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Verifica que seleccionaste un destino en el Paso 1</li>
                            <li>Verifica que hay participantes (Paso 3)</li>
                            <li>Si ambos están correctos y aún sale $0, contacta al administrador para verificar el tarifario</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No aparecen aprobadores en el selector del Paso 5
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>No hay trabajadores con el permiso "Resolución de solicitudes".</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Contacta al administrador para que asigne este permiso a las personas correspondientes</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No puedo editar una salida que creé
                        </div>
                        <p><strong>Causa más probable:</strong></p>
                        <p>La salida ya fue aprobada.</p>
                        <p><strong>Explicación:</strong></p>
                        <p>Una vez que una salida es aprobada, el sistema NO permite editarla para mantener integridad de datos. Los costos están congelados y no deben cambiar.</p>
                        <p><strong>Alternativas:</strong></p>
                        <ul>
                            <li>Si los cambios son menores (ej: horarios), coordina directamente sin modificar en el sistema</li>
                            <li>Si los cambios son mayores, suspende la salida aprobada y crea una nueva con los datos correctos</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No veo el botón de "Registrar asistencia"
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>La salida NO está en estado "Inminente".</p>
                        <p><strong>Explicación:</strong></p>
                        <p>Solo puedes registrar asistencia cuando la salida está en estado "Inminente" (X días antes de la fecha). Si está en "Programación", espera a que el sistema la cambie automáticamente.</p>
                    </div>
                </section>

                <!-- SECCIÓN 9: Buenas prácticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas prácticas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Recomendaciones para gestionar salidas exitosamente:</h5>

                        <div class="tip-box mb-3">
                            <strong>1. Planifica con mucho tiempo</strong>
                            <p class="mb-0">
                                Aunque el sistema exige mínimo 7 días, lo ideal es planificar con 3-4 semanas de anticipación. 
                                Esto da tiempo para: aprobación, comunicar a familias, gestionar autorizaciones, coordinar con el destino.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>2. Revisa el Paso 5 con calma</strong>
                            <p class="mb-0">
                                El resumen de costos en el Paso 5 es tu última oportunidad de verificar todo antes de enviar a 
                                aprobación. Revisa: ¿Son los grados correctos? ¿La fecha es la correcta? ¿El número de participantes 
                                tiene sentido? ¿Los costos parecen razonables?
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>3. Sé específico en la descripción</strong>
                            <p class="mb-0">
                                Una buena descripción ayuda al aprobador a entender el valor pedagógico. No escribas solo "Visita 
                                al museo". Escribe: "Visita al Museo de Ciencias para complementar la unidad de sistemas del cuerpo 
                                humano, incluye taller práctico de digestión".
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>4. Registra asistencia lo más cerca posible del día</strong>
                            <p class="mb-0">
                                El registro de asistencia se habilita cuando la salida está "Inminente". Hazlo 1-2 días antes o 
                                la misma mañana de la salida, cuando ya sabes con certeza quién irá y quién no.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>5. Documenta bien las desvinculaciones</strong>
                            <p class="mb-0">
                                Cuando desvincules estudiantes, sé claro en el motivo: "No presentó autorización firmada por los padres", 
                                "Incapacidad médica (presentó certificado)", "Ausente el día de la salida". Esto es importante para 
                                estadísticas y para justificar números finales.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>6. Da banderazo justo antes de partir</strong>
                            <p class="mb-0">
                                No des banderazo con horas de anticipación. Hazlo cuando los estudiantes estén subiendo a los vehículos 
                                y todo esté listo. Si das banderazo muy temprano y surge un problema, ya no podrás desvincular estudiantes.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>7. Comunica cambios de estado fuera del sistema</strong>
                            <p class="mb-0">
                                Aunque el sistema gestiona los estados, comunica activamente a las familias: "La salida fue aprobada", 
                                "Los vehículos partieron a las 8:00 AM", "Regresamos al colegio a las 2:30 PM". El sistema es para 
                                gestión interna, la comunicación a familias sigue siendo responsabilidad del docente/coordinador.
                            </p>
                        </div>

                        <div class="tip-box mb-0">
                            <strong>8. Usa filtros para hacer seguimiento</strong>
                            <p class="mb-0">
                                Filtra regularmente por estado "Inminente" para ver qué salidas se acercan y requieren tu atención. 
                                Filtra por grado para ver todas las salidas programadas de un curso específico.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 10: Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo crear una salida para mañana?
                        </div>
                        <p>
                            No. El sistema exige un mínimo de días de antelación (típicamente 7 días, pero puede estar configurado 
                            diferente). Esto garantiza tiempo suficiente para aprobaciones, comunicación a familias, y logística.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué pasa si el aprobador rechaza mi salida?
                        </div>
                        <p>
                            El estado de aprobación quedará como "Rechazada" y el aprobador debe indicar el motivo. Verás este 
                            motivo en el detalle de la salida. Puedes eliminar la salida rechazada y crear una nueva corrigiendo 
                            los aspectos que llevaron al rechazo.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Cómo sé cuándo mi salida cambia a "Inminente"?
                        </div>
                        <p>
                            El sistema cambia automáticamente el estado X días antes de la fecha de la salida (donde X está 
                            configurado en parámetros del módulo, típicamente 7 días). Revisa regularmente la lista filtrando 
                            por estado "Inminente" para ver cuáles están cerca.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Por qué el sistema calcula menos estudiantes de los que yo sé que hay?
                        </div>
                        <p>
                            El sistema cuenta SOLO estudiantes con estado "Activo" en la base de datos. Si hay estudiantes 
                            nuevos que aún no están matriculados formalmente, o estudiantes con estado diferente a activo, 
                            no los contará. Contacta al administrador para verificar los estados de los estudiantes.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo cambiar la cantidad de refrigerios a un número diferente del total de participantes?
                        </div>
                        <p>
                            Sí. Aunque el sistema auto-llena la cantidad con el total de participantes, puedes modificar manualmente 
                            ese número. Por ejemplo, si algunos adultos no recibirán refrigerio, puedes poner una cantidad menor.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿El costo de transporte incluye ida y vuelta?
                        </div>
                        <p>
                            El costo mostrado es por la modalidad que seleccionaste. Si seleccionaste "Ida y vuelta", el costo 
                            cubre ambos trayectos. Si seleccionaste "Solo ida" o "Solo regreso", el costo es solo por ese trayecto.
                        </p>
                        <p>
                            El tarifario de transporte está configurado por destino y rango de capacidad, sin diferenciar modalidad. 
                            La modalidad es informativa para el proveedor de transporte.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué pasa si desvincul<p class="mb-0">o un estudiante por error?
                        </div>
                        <p>
                            Una vez desvinculado un estudiante (con motivo documentado), el sistema lo marca como "no asistente". 
                            No hay un botón de "re-vincular". Si fue un error, tendrías que comunicarlo manualmente y ajustar 
                            fuera del sistema, o contactar al administrador para corrección en base de datos.
                        </p>
                        <p>
                            Por eso es importante revisar bien antes de confirmar las desvinculaciones.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo tener dos salidas el mismo día con los mismos grados?
                        </div>
                        <p>
                            Técnicamente sí, el sistema lo permite. Sin embargo, pedagógica y logísticamente es poco común y 
                            probablemente el aprobador cuestione la solicitud. Si realmente son dos salidas independientes 
                            (mañana y tarde, por ejemplo), asegúrate de explicarlo claramente en la descripción.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Cómo se calcula cuántos vehículos necesito?
                        </div>
                        <p>
                            El sistema usa una función de optimización que:
                        </p>
                        <ol>
                            <li>Toma el total de participantes</li>
                            <li>Consulta el tarifario de transporte para ese destino</li>
                            <li>Busca la combinación más eficiente de vehículos según rangos de capacidad y tarifas</li>
                            <li>Asigna pasajeros a cada vehículo sin exceder capacidades</li>
                            <li>Muestra el desglose completo en el Paso 5</li>
                        </ol>
                        <p>
                            Ejemplo: 45 participantes podría resultar en 1 vehículo de 30 + 1 de 20, o en 2 vehículos de 25, 
                            dependiendo de las tarifas configuradas y cuál combinación sea más económica.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo suspender una salida después de dar banderazo?
                        </div>
                        <p>
                            Sí. Aunque es inusual, si ocurre algo grave durante la salida (emergencia, clima extremo repentino, 
                            problema en el destino), puedes suspenderla incluso en estado "En proceso". Solo asegúrate de documentar 
                            muy bien el motivo.
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¿Encontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, repórtalo aquí.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOTÓN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CRÍTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACIÓN DE LA PÁGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Servicios',
            modulePath: 'services',
            pageTitle: 'Salidas Pedagógicas',
            pagePath: 'pedagogical-trips.html',
            moduleDescription: 'Gestión completa de salidas educativas'
        };

        // ==========================================
        // INICIALIZACIÓN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('📖 Iniciando página de manual...');
            
            try {
                // Verificar si existe la función de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesión si la función existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar información en la página
                updatePageInfo();
                
                console.log('✅ Página de manual lista');
                
            } catch (error) {
                console.error('❌ Error inicializando página:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la página: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACIÓN DE LA PÁGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCIÓN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove después de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
