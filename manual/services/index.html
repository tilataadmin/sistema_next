<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="26.02.08.22.00">
    
    <title>Manual - Servicios - √çndice del M√≥dulo - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .step-number {
            background: var(--system-primary-color, #1B365D);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.75rem;
        }

        /* Tarjeta para reportar bugs - COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Bot√≥n flotante para reportar bugs - COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .floating-bug-button:hover,
        .floating-bug-button:focus,
        .floating-bug-button:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Lista de caracter√≠sticas */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Subsecciones */
        .subsection-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 3px solid var(--system-primary-color, #1B365D);
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Servicios
                        </h1>
                        <p class="subtitle mb-0">√çndice del M√≥dulo</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/services/index.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Servicios</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">√çndice del M√≥dulo</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCI√ìN 1: ¬øQu√© es? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¬øQu√© es el √çndice del M√≥dulo?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            El <strong>√çndice del M√≥dulo de Servicios</strong> es la p√°gina principal del m√≥dulo. 
                            Funciona como un panel de control centralizado desde donde puedes acceder a todas las 
                            funcionalidades de servicios y eventos del colegio.
                        </p>
                        
                        <p><strong>¬øQu√© puedes hacer desde el √≠ndice?</strong></p>
                        <ul>
                            <li>Ver un resumen visual con m√©tricas clave del m√≥dulo (con carga manual)</li>
                            <li>Acceder r√°pidamente a cualquier funcionalidad mediante tarjetas organizadas por grupos</li>
                            <li>Ver contadores en tiempo real de elementos pendientes o activos</li>
                            <li>Navegar solo a las funciones para las que tienes permiso</li>
                        </ul>

                        <div class="info-box">
                            <i class="bi bi-lightbulb text-info me-2"></i>
                            <strong>Dise√±o inteligente:</strong> El √≠ndice muestra solo las funciones para las que 
                            tienes permiso. Si una tarjeta no aparece, es porque no tienes acceso a esa funcionalidad.
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 2: Estructura -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-layout-text-sidebar me-2"></i>
                        Estructura del √çndice
                    </h2>
                    
                    <div class="step-card">
                        <p>El √≠ndice est√° organizado en 3 secciones principales:</p>

                        <h6 class="subsection-title">1. Badges Contextuales</h6>
                        <p>
                            En la parte superior, debajo del t√≠tulo, aparecen peque√±as etiquetas (badges) que muestran 
                            informaci√≥n contextual:
                        </p>
                        <ul>
                            <li><strong>A√±o Activo:</strong> El a√±o escolar actual (ejemplo: "A√±o Activo: 2026")</li>
                            <li><strong>Estado:</strong> Estado del m√≥dulo (t√≠picamente "Activo")</li>
                        </ul>
                        <p>
                            Estos badges son informativos y no requieren ninguna acci√≥n.
                        </p>

                        <h6 class="subsection-title">2. Resumen del M√≥dulo (M√©tricas)</h6>
                        <p>
                            Una fila con 4 tarjetas de m√©tricas que muestran datos importantes:
                        </p>
                        <ul>
                            <li><strong>Solicitudes del a√±o:</strong> Total de solicitudes de servicios creadas en el a√±o actual</li>
                            <li><strong>Pendientes de aprobaci√≥n:</strong> Cu√°ntas solicitudes est√°n esperando aprobaci√≥n</li>
                            <li><strong>Salidas realizadas (mes):</strong> Salidas pedag√≥gicas y deportivas completadas este mes</li>
                            <li><strong>Transporte del mes:</strong> Valor total del transporte usado este mes</li>
                        </ul>
                        <p>
                            Las m√©tricas NO se cargan autom√°ticamente. Debes hacer clic en el bot√≥n 
                            <strong>"Cargar M√©tricas"</strong> para verlas. Esto hace que la p√°gina cargue m√°s r√°pido inicialmente.
                        </p>

                        <h6 class="subsection-title">3. Funciones del M√≥dulo</h6>
                        <p>
                            La secci√≥n principal con tarjetas organizadas en 4 grupos:
                        </p>
                        <ol>
                            <li><strong>Configuraci√≥n:</strong> Configuraci√≥n del m√≥dulo y cat√°logos base</li>
                            <li><strong>Salidas y Eventos:</strong> Salidas pedag√≥gicas, deportivas y eventos internos</li>
                            <li><strong>Servicios Recurrentes:</strong> Transportes que operan regularmente</li>
                            <li><strong>Gesti√≥n:</strong> Aprobaciones, costos y reportes</li>
                        </ol>
                        <p>
                            Cada tarjeta tiene un √≠cono, t√≠tulo, descripci√≥n breve, y puede tener un badge num√©rico 
                            si hay elementos pendientes o activos.
                        </p>
                    </div>
                </section>

                <!-- SECCI√ìN 3: M√©tricas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-graph-up me-2"></i>
                        Usar las M√©tricas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¬øPor qu√© las m√©tricas se cargan manualmente?</h5>
                        <p>
                            Las m√©tricas requieren consultar la base de datos varias veces, lo que puede tomar varios 
                            segundos. Para que el √≠ndice cargue r√°pidamente y puedas acceder a las funciones sin esperar, 
                            las m√©tricas est√°n en "modo carga diferida".
                        </p>

                        <h5 class="mt-4 mb-3">Cargar las m√©tricas:</h5>
                        <ol>
                            <li>En la secci√≥n "Resumen del M√≥dulo", todas las m√©tricas muestran <strong>"--"</strong> 
                                (guiones) por defecto</li>
                            <li>Haz clic en el bot√≥n <strong>"Cargar M√©tricas"</strong></li>
                            <li>El bot√≥n cambia a "Cargando..." con un spinner</li>
                            <li>En 2-5 segundos, las m√©tricas se llenan con los datos reales</li>
                            <li>El bot√≥n cambia a <strong>"Actualizar M√©tricas"</strong></li>
                        </ol>

                        <h5 class="mt-4 mb-3">Actualizar las m√©tricas:</h5>
                        <p>
                            Si ya cargaste las m√©tricas y quieres ver datos actualizados (despu√©s de aprobar algo, 
                            crear una salida, etc.):
                        </p>
                        <ul>
                            <li>Haz clic nuevamente en <strong>"Actualizar M√©tricas"</strong></li>
                            <li>El sistema vuelve a consultar la base de datos</li>
                            <li>Los n√∫meros se actualizan con los datos m√°s recientes</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Interpretaci√≥n de las m√©tricas:</h5>

                        <h6 class="subsection-title">Solicitudes del a√±o</h6>
                        <ul>
                            <li>Cuenta TODAS las solicitudes: pedag√≥gicas, deportivas, eventos internos</li>
                            <li>Incluye aprobadas, pendientes y rechazadas</li>
                            <li>Se reinicia cada a√±o escolar</li>
                            <li><strong>Uso:</strong> Tener idea del volumen de servicios solicitados</li>
                        </ul>

                        <h6 class="subsection-title">Pendientes de aprobaci√≥n</h6>
                        <ul>
                            <li>Solicitudes que est√°n esperando que alguien las apruebe o rechace</li>
                            <li>Si tienes permiso de aprobar, este n√∫mero es accionable</li>
                            <li><strong>Uso:</strong> Ver si hay solicitudes que requieren atenci√≥n urgente</li>
                        </ul>

                        <h6 class="subsection-title">Salidas realizadas (mes)</h6>
                        <ul>
                            <li>Suma de salidas pedag√≥gicas + deportivas con estado "Realizada" este mes</li>
                            <li>NO incluye suspendidas ni canceladas</li>
                            <li><strong>Uso:</strong> Ver el nivel de actividad mensual del colegio</li>
                        </ul>

                        <h6 class="subsection-title">Transporte del mes</h6>
                        <ul>
                            <li>Valor total en pesos del transporte usado este mes</li>
                            <li>Suma de salidas pedag√≥gicas + deportivas (excepto canceladas)</li>
                            <li><strong>Uso:</strong> Control presupuestal, validar facturas de proveedores</li>
                        </ul>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Cu√°ndo cargar m√©tricas:</strong> Si solo vas a entrar a una funci√≥n espec√≠fica 
                            (ejemplo: Aprobaciones), no es necesario cargar m√©tricas. Pero si quieres tener una visi√≥n 
                            general del m√≥dulo, c√°rgalas al inicio.
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 4: Grupos de Funciones -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-grid-3x3-gap me-2"></i>
                        Grupos de Funciones
                    </h2>

                    <div class="step-card">
                        <p>
                            Las 10 funcionalidades del m√≥dulo est√°n organizadas en 4 grupos l√≥gicos para facilitar 
                            la navegaci√≥n.
                        </p>

                        <h6 class="subsection-title">Grupo 1: Configuraci√≥n</h6>
                        <p>Funciones que configuran el funcionamiento del m√≥dulo:</p>
                        <ul>
                            <li><strong>Configuraci√≥n:</strong> Tarifarios, destinos, nodos, refrigerios, par√°metros</li>
                            <li><strong>Equipos deportivos:</strong> Disciplinas, categor√≠as, equipos e integrantes</li>
                        </ul>
                        <p>
                            <strong>Cu√°ndo usar:</strong> Al inicio del a√±o escolar, o cuando cambien tarifas/contratos
                        </p>

                        <h6 class="subsection-title">Grupo 2: Salidas y Eventos</h6>
                        <p>Funciones para solicitar y gestionar salidas y eventos:</p>
                        <ul>
                            <li><strong>Salidas pedag√≥gicas:</strong> Wizard de 5 pasos, registro asistencia, banderazo</li>
                            <li><strong>Salidas deportivas:</strong> Wizard de 4 pasos, integraci√≥n con equipos, banderazo</li>
                            <li><strong>Eventos internos:</strong> Wizard de 5 pasos, refrigerios, servicios de apoyo</li>
                        </ul>
                        <p>
                            <strong>Badges:</strong> Muestran cu√°ntas salidas/eventos est√°n en estado "Programaci√≥n" o "Inminente"
                        </p>
                        <p>
                            <strong>Cu√°ndo usar:</strong> Para crear nuevas salidas/eventos, o gestionar las existentes
                        </p>

                        <h6 class="subsection-title">Grupo 3: Servicios Recurrentes</h6>
                        <p>Funciones para servicios que operan regularmente:</p>
                        <ul>
                            <li><strong>Extracurriculares:</strong> Ciclos semestrales, veh√≠culos, registro diario</li>
                            <li><strong>Transporte de personal:</strong> Rutas, registro diario, liquidaci√≥n mensual</li>
                        </ul>
                        <p>
                            <strong>Cu√°ndo usar:</strong> Diariamente (registros) y mensualmente (res√∫menes/liquidaciones)
                        </p>

                        <h6 class="subsection-title">Grupo 4: Gesti√≥n</h6>
                        <p>Funciones administrativas y de control:</p>
                        <ul>
                            <li><strong>Aprobaciones:</strong> Bandeja centralizada para aprobar/rechazar solicitudes</li>
                            <li><strong>Costos de eventos:</strong> Registrar costos de servicios de apoyo por √°rea</li>
                            <li><strong>Reportes:</strong> 4 tipos de reportes, exportaci√≥n Excel/PDF</li>
                        </ul>
                        <p>
                            <strong>Badge en Aprobaciones:</strong> Muestra cu√°ntas solicitudes est√°n pendientes
                        </p>
                        <p>
                            <strong>Cu√°ndo usar:</strong> Seg√∫n necesidad (aprobaciones cuando llegan, reportes fin de mes)
                        </p>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Grupos din√°micos:</strong> Si no tienes permiso para NINGUNA funci√≥n de un grupo, 
                            ese grupo completo se oculta autom√°ticamente. Por ejemplo, si no tienes permisos de configuraci√≥n, 
                            el Grupo 1 no aparecer√°.
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 5: Badges en Tarjetas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-bookmark me-2"></i>
                        Badges en las Tarjetas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¬øQu√© son los badges en tarjetas?</h5>
                        <p>
                            Algunas tarjetas de funciones tienen un peque√±o n√∫mero en la esquina superior derecha. 
                            Este n√∫mero indica cu√°ntos elementos pendientes o activos hay en esa funcionalidad.
                        </p>

                        <h5 class="mt-4 mb-3">Badges que existen:</h5>

                        <h6 class="subsection-title">Badge azul en Salidas Pedag√≥gicas</h6>
                        <ul>
                            <li>Muestra: Salidas con estado "Programaci√≥n" o "Inminente"</li>
                            <li>Significado: Hay salidas pedag√≥gicas que est√°n pr√≥ximas o pendientes de iniciar</li>
                            <li>Acci√≥n: Si ves un n√∫mero, revisa que todo est√© en orden (asistencia, aprobaci√≥n)</li>
                        </ul>

                        <h6 class="subsection-title">Badge azul en Salidas Deportivas</h6>
                        <ul>
                            <li>Muestra: Salidas con estado "Programaci√≥n" o "Inminente"</li>
                            <li>Significado: Hay salidas deportivas pr√≥ximas</li>
                            <li>Acci√≥n: Verificar asistencia, coordinaci√≥n con entrenadores</li>
                        </ul>

                        <h6 class="subsection-title">Badge azul en Eventos Internos</h6>
                        <ul>
                            <li>Muestra: Eventos con estado "Programaci√≥n"</li>
                            <li>Significado: Hay eventos pr√≥ximos que a√∫n no se han realizado</li>
                            <li>Acci√≥n: Verificar que todas las √°reas hayan registrado sus costos</li>
                        </ul>

                        <h6 class="subsection-title">Badge amarillo en Aprobaciones</h6>
                        <ul>
                            <li>Muestra: Solicitudes con estado "Pendiente"</li>
                            <li>Significado: Hay solicitudes esperando aprobaci√≥n</li>
                            <li><strong>Este es el m√°s importante</strong> porque requiere acci√≥n inmediata</li>
                            <li>Acci√≥n: Entrar a Aprobaciones y revisar las solicitudes pendientes</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Badge amarillo = acci√≥n requerida:</strong> Si ves un n√∫mero amarillo en Aprobaciones, 
                            hay personas esperando tu aprobaci√≥n. Prioriza revisar esas solicitudes para no retrasar 
                            salidas o eventos.
                        </div>

                        <h5 class="mt-4 mb-3">¬øLos badges se actualizan autom√°ticamente?</h5>
                        <p>
                            Los badges se cargan cuando abres el √≠ndice. Si haces cambios (aprobar algo, crear una salida), 
                            debes refrescar la p√°gina (F5) para ver los badges actualizados.
                        </p>
                    </div>
                </section>

                <!-- SECCI√ìN 6: Navegaci√≥n -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-signpost-2 me-2"></i>
                        Navegar desde el √çndice
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Acceder a una funci√≥n:</h5>
                        <ol>
                            <li>Identifica la tarjeta de la funci√≥n que necesitas</li>
                            <li>Haz clic en cualquier parte de la tarjeta</li>
                            <li>Se abre la p√°gina de esa funcionalidad</li>
                        </ol>

                        <h5 class="mt-4 mb-3">Regresar al √≠ndice:</h5>
                        <p>
                            Desde cualquier p√°gina del m√≥dulo, usa las migas de pan (breadcrumbs) en la parte superior:
                        </p>
                        <ul>
                            <li>Dashboard ‚Üí <strong>Servicios y Eventos</strong> ‚Üí [Funci√≥n actual]</li>
                            <li>Haz clic en "Servicios y Eventos" para volver al √≠ndice</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Regresar al Dashboard:</h5>
                        <ul>
                            <li>Haz clic en "Dashboard" en las migas de pan</li>
                            <li>O usa el bot√≥n/enlace del men√∫ principal si est√° disponible</li>
                        </ul>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Atajos de teclado:</strong> Si tu navegador lo permite, puedes usar Alt+Flecha Izquierda 
                            para volver a la p√°gina anterior (equivalente al bot√≥n "Atr√°s" del navegador).
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 7: Permisos -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-shield-check me-2"></i>
                        Sistema de Permisos
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">¬øC√≥mo funciona?</h5>
                        <p>
                            El √≠ndice muestra solo las tarjetas de funciones para las que tienes permiso. Si una funci√≥n 
                            no aparece, es porque no tienes acceso a ella.
                        </p>

                        <h5 class="mt-4 mb-3">10 permisos del m√≥dulo:</h5>
                        <ol>
                            <li><strong>Salidas pedag√≥gicas</strong></li>
                            <li><strong>Salidas deportivas</strong></li>
                            <li><strong>Eventos internos</strong></li>
                            <li><strong>Extracurriculares</strong></li>
                            <li><strong>Transporte de personal</strong></li>
                            <li><strong>Equipos deportivos</strong></li>
                            <li><strong>Aprobaciones de servicios</strong></li>
                            <li><strong>Reportes de servicios</strong></li>
                            <li><strong>Configuraci√≥n de servicios</strong></li>
                            <li><strong>Registro de costos de eventos</strong></li>
                        </ol>

                        <h5 class="mt-4 mb-3">Acceso al √≠ndice:</h5>
                        <p>
                            Para ver el √≠ndice, necesitas tener <strong>al menos uno</strong> de los 10 permisos. 
                            Si no tienes ninguno, ver√°s una pantalla de "Acceso Denegado".
                        </p>

                        <h5 class="mt-4 mb-3">Super Administrador:</h5>
                        <p>
                            Si eres Super Admin, tienes acceso a TODAS las funciones del m√≥dulo, sin importar permisos 
                            espec√≠ficos.
                        </p>

                        <h5 class="mt-4 mb-3">¬øNecesitas m√°s permisos?</h5>
                        <ul>
                            <li>Contacta al administrador del sistema</li>
                            <li>Explica qu√© funcionalidades necesitas y por qu√©</li>
                            <li>El administrador puede asignarte los permisos correspondientes</li>
                        </ul>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Permisos granulares:</strong> Es com√∫n que diferentes personas tengan diferentes 
                            conjuntos de permisos. Por ejemplo, un coordinador acad√©mico puede tener "Salidas pedag√≥gicas" 
                            y "Aprobaciones", mientras que un coordinador de transporte tiene "Extracurriculares" y 
                            "Transporte de personal".
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 8: Buenas pr√°cticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas pr√°cticas
                    </h2>

                    <div class="step-card">
                        <div class="tip-box mb-3">
                            <strong>1. Establece el √≠ndice como p√°gina de inicio</strong>
                            <p class="mb-0">
                                Si trabajas frecuentemente con servicios y eventos, agrega el √≠ndice a favoritos en tu 
                                navegador con un nombre corto como "Servicios". As√≠ accedes con un clic.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>2. Revisa los badges al llegar</strong>
                            <p class="mb-0">
                                Al abrir el √≠ndice cada ma√±ana, echa un vistazo r√°pido a los badges:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>¬øHay n√∫mero amarillo en Aprobaciones? ‚Üí Prioridad alta</li>
                                <li>¬øHay n√∫meros altos en Salidas? ‚Üí Verificar que todo est√© coordinado</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>3. Carga m√©tricas solo cuando las necesites</strong>
                            <p class="mb-0">
                                Si solo vas a entrar a una funci√≥n espec√≠fica, s√°ltate las m√©tricas. Solo c√°rgalas cuando:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Necesites presentar datos en una reuni√≥n</li>
                                <li>Est√©s haciendo seguimiento mensual</li>
                                <li>Quieras tener una visi√≥n general del m√≥dulo</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>4. Mant√©n pesta√±as abiertas</strong>
                            <p class="mb-0">
                                Si trabajas simult√°neamente en varias funciones (ejemplo: aprobando solicitudes y revisando 
                                reportes), abre cada una en una pesta√±a diferente del navegador. As√≠ puedes cambiar 
                                r√°pidamente entre ellas.
                            </p>
                        </div>

                        <div class="tip-box mb-0">
                            <strong>5. Conoce el orden de los grupos</strong>
                            <p class="mb-0">
                                Los grupos est√°n ordenados seg√∫n flujo de trabajo:
                            </p>
                            <ol class="mt-2 mb-0">
                                <li>Primero configuras (Grupo 1)</li>
                                <li>Luego creas salidas/eventos (Grupo 2)</li>
                                <li>Registras servicios diarios (Grupo 3)</li>
                                <li>Finalmente gestionas aprobaciones y reportes (Grupo 4)</li>
                            </ol>
                        </div>
                    </div>
                </section>

                <!-- SECCI√ìN 9: Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPor qu√© solo veo algunas tarjetas y no todas?
                        </div>
                        <p>
                            Solo ves las tarjetas de funciones para las que tienes permiso. Esto es normal. Cada usuario 
                            ve un √≠ndice personalizado seg√∫n sus permisos. Si necesitas acceso a m√°s funciones, contacta 
                            al administrador.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            Las m√©tricas muestran "--" despu√©s de hacer clic en "Cargar M√©tricas"
                        </div>
                        <p>
                            Puede haber un problema de permisos o conectividad. Verifica:
                        </p>
                        <ul>
                            <li>Espera unos segundos, a veces tarda m√°s de lo esperado</li>
                            <li>Refresca la p√°gina (F5) e intenta de nuevo</li>
                            <li>Si persiste, reporta el problema al administrador</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            El badge de Aprobaciones muestra un n√∫mero pero no tengo acceso a esa funci√≥n
                        </div>
                        <p>
                            Los badges se cargan para todos los usuarios, pero solo puedes acceder a la funci√≥n si tienes 
                            el permiso correspondiente. Si el badge aparece pero la tarjeta no es clickeable o no existe, 
                            significa que no tienes permiso de "Aprobaciones de servicios".
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPuedo personalizar qu√© m√©tricas veo?
                        </div>
                        <p>
                            No en la versi√≥n actual. Las 4 m√©tricas son fijas para todos los usuarios. Sin embargo, 
                            algunas m√©tricas pueden estar ocultas seg√∫n tu rol (implementaci√≥n futura).
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øEl √≠ndice guarda alguna preferencia o estado?
                        </div>
                        <p>
                            No. El √≠ndice NO guarda si cargaste m√©tricas o no. Cada vez que regresas al √≠ndice, las 
                            m√©tricas vuelven a mostrar "--" y debes cargarlas manualmente si las necesitas.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øHay alguna diferencia entre hacer clic en una tarjeta vs escribir la URL directamente?
                        </div>
                        <p>
                            No. Ambas formas te llevan a la misma p√°gina. Sin embargo, usar las tarjetas es m√°s intuitivo 
                            y visual, especialmente si no recuerdas la URL exacta de cada funci√≥n.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øLos badges se actualizan en tiempo real?
                        </div>
                        <p>
                            No. Los badges se cargan cuando abres el √≠ndice por primera vez. Si haces cambios (aprobar 
                            una solicitud, crear una salida), debes refrescar la p√°gina para ver los badges actualizados. 
                            Esto es intencional para no sobrecargar el servidor con consultas constantes.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øQu√© pasa si un grupo completo no aparece?
                        </div>
                        <p>
                            Si un grupo completo (ejemplo: "Configuraci√≥n") no aparece, significa que no tienes permiso 
                            para NINGUNA de las funciones de ese grupo. El sistema oculta grupos vac√≠os para simplificar 
                            la interfaz.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¬øPuedo cambiar el orden de las tarjetas o grupos?
                        </div>
                        <p>
                            No. El orden est√° fijo y dise√±ado para seguir un flujo de trabajo l√≥gico. Todos los usuarios 
                            ven el mismo orden (aunque solo ven las tarjetas para las que tienen permiso).
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Servicios',
            modulePath: 'services',
            pageTitle: '√çndice del M√≥dulo',
            pagePath: 'index.html',
            moduleDescription: 'Panel de control centralizado del m√≥dulo de servicios y eventos'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
