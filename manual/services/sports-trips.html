<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSIÓN DE LA PÁGINA -->
    <meta name="page-version" content="26.02.08.21.00">
    
    <title>Manual - Servicios - Salidas Deportivas - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSIÓN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Secciones del manual */
        .section-title {
            color: var(--system-primary-color, #1B365D);
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding-bottom: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .step-card {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .step-number {
            background: var(--system-primary-color, #1B365D);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .faq-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.75rem;
        }

        /* Tarjeta para reportar bugs - COLOR PRIMARIO */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Botón flotante para reportar bugs - COLOR PRIMARIO */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .floating-bug-button:hover,
        .floating-bug-button:focus,
        .floating-bug-button:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
            background-color: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
            color: white !important;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Lista de características */
        .feature-list {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .feature-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Subsecciones */
        .subsection-title {
            color: var(--system-primary-color, #1B365D);
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 3px solid var(--system-primary-color, #1B365D);
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Servicios
                        </h1>
                        <p class="subtitle mb-0">Salidas Deportivas</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/services/sports-trips.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al Módulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACIÓN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Servicios</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Salidas Deportivas</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras algún problema,<br>
                                puedes reportarlo usando el botón de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ============================================ -->

                <!-- SECCIÓN 1: ¿Qué es? -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-info-circle me-2"></i>
                        ¿Qué son las Salidas Deportivas?
                    </h2>
                    
                    <div class="step-card">
                        <p class="lead">
                            Las <strong>Salidas Deportivas</strong> son salidas institucionales para competencias, torneos, 
                            entrenamientos o eventos deportivos que se realizan fuera del colegio. A diferencia de las 
                            salidas pedagógicas (que son por grado), estas salidas son para <strong>equipos deportivos 
                            específicos</strong>.
                        </p>
                        
                        <p><strong>Ciclo completo de una salida deportiva:</strong></p>
                        <ol>
                            <li>Se crea la salida seleccionando el equipo deportivo (disciplina + categoría)</li>
                            <li>Los integrantes del equipo se cargan automáticamente como participantes</li>
                            <li>El sistema calcula el transporte necesario según tarifario</li>
                            <li>Se envía solicitud de aprobación</li>
                            <li>El estado cambia automáticamente a "Inminente" X días antes (típicamente 7 días)</li>
                            <li>Se registra la asistencia real (quiénes asistieron, quiénes no)</li>
                            <li>Se da "banderazo" cuando los vehículos salen (cambia a "En proceso")</li>
                            <li>Después del evento, se marca como "Realizada"</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-lightbulb text-info me-2"></i>
                            <strong>Diferencia clave con Salidas Pedagógicas:</strong>
                            <ul class="mt-2 mb-0">
                                <li><strong>Salidas Pedagógicas:</strong> Organizadas por grado (ejemplo: todos los estudiantes 
                                    de 9° van al museo). Los participantes se calculan automáticamente según matrícula.</li>
                                <li><strong>Salidas Deportivas:</strong> Organizadas por equipo deportivo (ejemplo: el equipo 
                                    de fútbol juvenil masculino va a un torneo). Los participantes son los integrantes 
                                    registrados del equipo.</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 2: Características principales -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-star me-2"></i>
                        Características principales
                    </h2>
                    
                    <div class="step-card">
                        <ul class="feature-list">
                            <li><strong>Wizard guiado de 4 pasos:</strong> Proceso paso a paso para crear la salida sin 
                                posibilidad de olvidar información clave.</li>
                            
                            <li><strong>Integración con equipos deportivos:</strong> Seleccionas disciplina + categoría, 
                                y el sistema carga automáticamente los integrantes del equipo.</li>
                            
                            <li><strong>Cálculo automático de transporte:</strong> El sistema calcula el número de vehículos, 
                                capacidad y costo según el tarifario configurado.</li>
                            
                            <li><strong>Destino dual:</strong> Puedes seleccionar un destino tarifario (para el costo) y 
                                especificar el lugar exacto (ej: tarifario "Norte de Bogotá", específico "Colegio Rochester").</li>
                            
                            <li><strong>Modalidades flexibles:</strong> Solo ida, solo regreso, o ida y vuelta.</li>
                            
                            <li><strong>Nodos de transporte opcionales:</strong> Configura puntos de salida/llegada si 
                                los estudiantes se recogen o entregan en lugares específicos.</li>
                            
                            <li><strong>Gestión automática de estados:</strong> El sistema cambia automáticamente el estado 
                                a "Inminente" X días antes de la salida.</li>
                            
                            <li><strong>Registro de asistencia avanzado:</strong> Puedes desvincular estudiantes que no 
                                asistirán y registrar el motivo.</li>
                            
                            <li><strong>Congelamiento de tarifas:</strong> Al crear la salida, las tarifas de transporte 
                                se congelan. Cambios futuros en el tarifario NO afectan esta salida.</li>
                            
                            <li><strong>Aprobación obligatoria:</strong> Toda salida requiere aprobación de un responsable 
                                autorizado.</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 3: Antes de comenzar -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Antes de comenzar
                    </h2>
                    
                    <div class="step-card">
                        <h5 class="mb-3">Requisitos previos:</h5>
                        
                        <ul>
                            <li><strong>Permiso necesario:</strong> Debes tener el permiso "Salidas deportivas" activo.</li>
                            
                            <li><strong>Equipos deportivos configurados:</strong> Debe haber al menos un equipo creado 
                                en el módulo de "Equipos Deportivos" con integrantes activos.</li>
                            
                            <li><strong>Destinos y tarifas activos:</strong> El catálogo de destinos y tarifas de transporte 
                                debe estar configurado en "Configuración de Servicios".</li>
                            
                            <li><strong>Aprobadores disponibles:</strong> Debe haber al menos un trabajador con permiso 
                                "Resolución de solicitudes".</li>
                            
                            <li><strong>Planificar con anticipación:</strong> Las salidas deben crearse con mínimo 7 días 
                                de antelación (el número exacto es configurable).</li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Advertencia importante:</strong> Una vez la salida es aprobada, NO se puede editar ni 
                            eliminar. Solo se puede suspender o cancelar. Por eso es fundamental revisar muy bien toda 
                            la información antes de enviar la solicitud de aprobación.
                        </div>

                        <h5 class="mt-4 mb-3">Flujo recomendado:</h5>
                        <ol>
                            <li>Verificar que el equipo deportivo esté actualizado (integrantes correctos)</li>
                            <li>Coordinar con el entrenador/responsable del equipo</li>
                            <li>Crear la salida deportiva con al menos 2-3 semanas de anticipación</li>
                            <li>Esperar aprobación</li>
                            <li>Cuando esté "Inminente", registrar asistencia real</li>
                            <li>El día de la salida, dar banderazo cuando los vehículos partan</li>
                        </ol>
                    </div>
                </section>

                <!-- SECCIÓN 4: Wizard Paso 1 -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-1-circle me-2"></i>
                        Crear Salida: Paso 1 - Información Básica
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Campos del Paso 1:</h5>

                        <p><span class="step-number">1</span><strong>Nombre de la salida</strong> (obligatorio)</p>
                        <ul>
                            <li>Escribe un nombre descriptivo del evento</li>
                            <li>Ejemplo: "Campeonato UNCOLI - Fútbol Masculino"</li>
                            <li>Ejemplo: "Torneo de Voleibol Femenino - Colegio San Carlos"</li>
                        </ul>

                        <p class="mt-3"><span class="step-number">2</span><strong>Fecha del evento</strong> (obligatorio)</p>
                        <ul>
                            <li>Selecciona la fecha en que se realizará el evento deportivo</li>
                            <li>El sistema valida que sea con el mínimo de días de anticipación requerido</li>
                            <li>Si no cumple, aparece un mensaje de advertencia en rojo</li>
                        </ul>

                        <p class="mt-3"><span class="step-number">3</span><strong>Hora del evento</strong> (opcional)</p>
                        <ul>
                            <li>A qué hora comienza el partido/competencia</li>
                            <li>Esto ayuda a coordinar la logística, pero no es obligatorio</li>
                        </ul>

                        <p class="mt-3"><span class="step-number">4</span><strong>N° adultos acompañantes</strong> (obligatorio)</p>
                        <ul>
                            <li>Cuántos adultos (docentes, entrenadores, padres) irán además de los estudiantes</li>
                            <li>Por defecto viene 1, pero puedes cambiarlo</li>
                            <li>Esto se suma a los estudiantes para calcular el transporte</li>
                        </ul>

                        <p class="mt-3"><span class="step-number">5</span><strong>Hora de salida</strong> (obligatorio)</p>
                        <ul>
                            <li>A qué hora salen los vehículos del colegio</li>
                            <li>Debe ser antes de la hora del evento</li>
                        </ul>

                        <p class="mt-3"><span class="step-number">6</span><strong>Hora de regreso</strong> (obligatorio)</p>
                        <ul>
                            <li>A qué hora regresan al colegio</li>
                            <li>Debe ser posterior a la hora de salida</li>
                        </ul>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>Buena práctica:</strong> Incluye en el nombre de la salida información clave como el tipo 
                            de evento, el rival (si aplica), y la disciplina. Esto facilita identificar la salida en listados 
                            y reportes.
                        </div>

                        <h5 class="mt-4 mb-3">Avanzar al Paso 2:</h5>
                        <p>
                            Una vez completes todos los campos obligatorios y la fecha cumpla con el mínimo de días, haz clic 
                            en <strong>"Siguiente"</strong> para pasar al Paso 2.
                        </p>
                    </div>
                </section>

                <!-- SECCIÓN 5: Wizard Paso 2 -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-2-circle me-2"></i>
                        Crear Salida: Paso 2 - Selección de Equipo
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Cómo funciona el Paso 2:</h5>

                        <p>
                            Este paso conecta la salida deportiva con un equipo registrado en el módulo de "Equipos Deportivos". 
                            Los integrantes del equipo se cargarán automáticamente como participantes de la salida.
                        </p>

                        <h5 class="mt-4 mb-3">Seleccionar el equipo:</h5>
                        <ol>
                            <li><strong>Disciplina:</strong> Selecciona el deporte (Fútbol, Baloncesto, Voleibol, etc.)
                                <ul>
                                    <li>Solo aparecen las disciplinas activas</li>
                                </ul>
                            </li>
                            <li><strong>Categoría:</strong> Selecciona la categoría (Infantil, Juvenil, Pre-juvenil, etc.)
                                <ul>
                                    <li>Solo aparecen las categorías activas</li>
                                </ul>
                            </li>
                            <li>El sistema busca un equipo que coincida con esa <strong>disciplina + categoría</strong> 
                                y que esté activo</li>
                        </ol>

                        <h5 class="mt-4 mb-3">Resultado de la búsqueda:</h5>

                        <p><strong>Si encuentra el equipo:</strong></p>
                        <ul>
                            <li>Aparece una tarjeta con la información del equipo:
                                <ul>
                                    <li>Nombre completo (Disciplina - Categoría - Género)</li>
                                    <li>Entrenador (si tiene)</li>
                                    <li>Número de integrantes activos</li>
                                </ul>
                            </li>
                            <li>El sistema carga automáticamente los integrantes del equipo</li>
                            <li>Puedes avanzar al Paso 3</li>
                        </ul>

                        <p><strong>Si NO encuentra el equipo:</strong></p>
                        <ul>
                            <li>Aparece un mensaje de advertencia: "No se encontró un equipo activo para esta combinación"</li>
                            <li>NO puedes avanzar al siguiente paso</li>
                            <li><strong>Solución:</strong> Debes ir al módulo "Equipos Deportivos" y:
                                <ul>
                                    <li>Crear el equipo si no existe</li>
                                    <li>Activar el equipo si está inactivo</li>
                                    <li>Agregar integrantes al equipo</li>
                                </ul>
                            </li>
                        </ul>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Importante:</strong> Si el equipo no tiene integrantes activos, el sistema te permitirá 
                            avanzar al Paso 3, pero te mostrará una advertencia porque la salida quedaría sin estudiantes. 
                            Verifica que el equipo tenga integrantes antes de continuar.
                        </div>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>¿Por qué no puedo elegir el género en este paso?</strong> Porque el género ya está 
                            definido en el equipo deportivo. Un equipo es único por disciplina + categoría + género. 
                            Por ejemplo, si existe "Fútbol - Juvenil - Masculino" y seleccionas Fútbol + Juvenil, 
                            automáticamente se cargará ese equipo masculino.
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 6: Wizard Paso 3 -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-3-circle me-2"></i>
                        Crear Salida: Paso 3 - Transporte
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Configuración del transporte:</h5>

                        <h6 class="subsection-title">Destino tarifario (obligatorio)</h6>
                        <ul>
                            <li>Selecciona el destino que corresponde según el tarifario configurado</li>
                            <li>Ejemplo: "Norte de Bogotá", "Sur de Bogotá", "Fuera de la ciudad"</li>
                            <li>Este destino se usa para calcular el costo del transporte</li>
                        </ul>

                        <h6 class="subsection-title">Destino específico (opcional)</h6>
                        <ul>
                            <li>Escribe el nombre exacto del lugar</li>
                            <li>Ejemplo: "Colegio Rochester", "Unidad Deportiva El Salitre", "Coliseo ABC"</li>
                            <li>Este es informativo para los conductores y participantes</li>
                        </ul>

                        <h6 class="subsection-title">Modalidad de recorrido (obligatorio)</h6>
                        <p>Selecciona una de las 3 opciones:</p>
                        <ol>
                            <li><strong>Solo ida:</strong> El transporte solo lleva (los estudiantes regresan por su cuenta 
                                o con padres)</li>
                            <li><strong>Solo regreso:</strong> Los estudiantes llegan por su cuenta, el transporte solo trae 
                                de regreso</li>
                            <li><strong>Ida y regreso:</strong> El transporte lleva Y trae (la opción más común)</li>
                        </ol>

                        <div class="info-box">
                            <i class="bi bi-info-circle text-info me-2"></i>
                            <strong>Impacto de la modalidad en el costo:</strong>
                            <ul class="mt-2 mb-0">
                                <li>Solo ida o Solo regreso: se cobra el valor simple del tarifario</li>
                                <li>Ida y regreso: se cobra el doble (es decir, tarifa × 2)</li>
                            </ul>
                        </div>

                        <h6 class="subsection-title">Nodos de transporte (opcional)</h6>
                        <p>
                            Dependiendo de la modalidad seleccionada, aparecen campos para agregar nodos:
                        </p>
                        <ul>
                            <li><strong>Solo ida o Ida y regreso:</strong> Puedes agregar "Nodos de salida" (puntos donde 
                                se recogen estudiantes)</li>
                            <li><strong>Solo regreso o Ida y regreso:</strong> Puedes agregar "Nodos de llegada" (puntos 
                                donde se entregan estudiantes)</li>
                        </ul>
                        <p>
                            Los nodos son opcionales. Si no agregas ninguno, se asume que todos salen/llegan del/al colegio.
                        </p>

                        <h6 class="subsection-title">Vista previa del costo (automática)</h6>
                        <p>
                            Una vez selecciones destino y modalidad, el sistema muestra automáticamente:
                        </p>
                        <ul>
                            <li><strong>Total participantes:</strong> Estudiantes + adultos</li>
                            <li><strong>Vehículos necesarios:</strong> Cuántos vehículos y de qué capacidad</li>
                            <li><strong>Valor del transporte:</strong> Costo total calculado según tarifario</li>
                        </ul>

                        <div class="tip-box">
                            <i class="bi bi-lightbulb text-success me-2"></i>
                            <strong>¿Cómo calcula el sistema los vehículos?</strong> El sistema revisa el tarifario del 
                            destino seleccionado, busca las tarifas por rangos de capacidad, y optimiza la combinación 
                            más eficiente de vehículos para llevar a todos los participantes al menor costo posible.
                        </div>

                        <h5 class="mt-4 mb-3">Validaciones antes de avanzar:</h5>
                        <ul>
                            <li>Debe haber un destino tarifario seleccionado</li>
                            <li>Debe haber una modalidad seleccionada</li>
                            <li>El costo calculado debe ser mayor a $0 (si es $0, puede haber un problema con el tarifario)</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 7: Wizard Paso 4 -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-4-circle me-2"></i>
                        Crear Salida: Paso 4 - Confirmar y Enviar
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Revisión final:</h5>

                        <p>
                            El Paso 4 muestra un resumen completo de toda la información ingresada en los pasos anteriores. 
                            <strong>Revisa cuidadosamente</strong> porque una vez enviada la solicitud y aprobada, 
                            NO podrás editar nada.
                        </p>

                        <h5 class="mt-4 mb-3">Resumen mostrado:</h5>

                        <h6 class="subsection-title">Información General</h6>
                        <ul>
                            <li>Nombre de la salida</li>
                            <li>Fecha y hora del evento</li>
                            <li>Número de adultos</li>
                            <li>Horas de salida y regreso</li>
                        </ul>

                        <h6 class="subsection-title">Equipo</h6>
                        <ul>
                            <li>Disciplina y categoría</li>
                            <li>Total de participantes (estudiantes + adultos)</li>
                        </ul>

                        <h6 class="subsection-title">Transporte</h6>
                        <ul>
                            <li>Destino tarifario y destino específico</li>
                            <li>Modalidad de recorrido</li>
                            <li>Vehículos necesarios (cantidad y capacidad)</li>
                            <li><strong>Valor total del transporte</strong> (destacado en verde)</li>
                            <li>Nodos de salida/llegada (si se agregaron)</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Seleccionar aprobador (obligatorio):</h5>
                        <p>
                            Después del resumen, debes seleccionar quién aprobará la salida:
                        </p>
                        <ul>
                            <li>Solo aparecen trabajadores con el permiso "Resolución de solicitudes"</li>
                            <li>Típicamente son coordinadores, directores o personal administrativo autorizado</li>
                            <li>Al enviar la solicitud, esta persona recibirá un correo automático</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Enviar solicitud:</h5>
                        <ol>
                            <li>Revisa todo el resumen cuidadosamente</li>
                            <li>Selecciona el aprobador</li>
                            <li>Haz clic en <strong>"Enviar Solicitud"</strong></li>
                            <li>El sistema:
                                <ul>
                                    <li>Crea la solicitud de aprobación</li>
                                    <li>Crea la salida deportiva con estado "Programación"</li>
                                    <li>Registra automáticamente los integrantes del equipo como participantes</li>
                                    <li>Guarda los nodos de transporte (si los agregaste)</li>
                                    <li>Congela las tarifas de transporte</li>
                                    <li>Envía correo al aprobador</li>
                                </ul>
                            </li>
                            <li>Aparece un mensaje de éxito y la ventana se cierra</li>
                            <li>La salida aparece en el listado con estado "Programación" y aprobación "Pendiente"</li>
                        </ol>

                        <div class="warning-box">
                            <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                            <strong>Última oportunidad para cambios:</strong> Una vez hagas clic en "Enviar Solicitud", 
                            ya NO podrás editar la salida. Si el aprobador la rechaza, tendrás que eliminarla y crear 
                            una nueva corrigiendo los errores.
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 8: Estados y Flujo -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-diagram-3 me-2"></i>
                        Estados de una Salida Deportiva
                    </h2>

                    <div class="step-card">
                        <p>
                            Una salida deportiva pasa por diferentes estados durante su ciclo de vida. Algunos cambios 
                            son automáticos, otros los haces tú manualmente.
                        </p>

                        <h5 class="mb-3">Los 6 estados posibles:</h5>

                        <h6 class="subsection-title">1. Programación (inicial)</h6>
                        <ul>
                            <li><strong>Cuándo:</strong> Estado inicial después de crear la salida</li>
                            <li><strong>Qué significa:</strong> La salida está creada pero aún falta tiempo</li>
                            <li><strong>Permanece en este estado hasta:</strong> X días antes de la fecha (típicamente 7 días)</li>
                            <li><strong>Acciones disponibles:</strong> Solo ver detalle. Esperar aprobación.</li>
                        </ul>

                        <h6 class="subsection-title">2. Inminente (automático)</h6>
                        <ul>
                            <li><strong>Cuándo:</strong> El sistema cambia automáticamente cuando faltan X días para la salida 
                                (solo si está aprobada)</li>
                            <li><strong>Qué significa:</strong> La salida está cerca, hay que preparar logística</li>
                            <li><strong>Acciones disponibles:</strong>
                                <ul>
                                    <li>Registrar asistencia (marcar quiénes van, quiénes no)</li>
                                    <li>Dar banderazo (cuando los vehículos salen)</li>
                                    <li>Suspender (si por algún motivo no se puede realizar)</li>
                                </ul>
                            </li>
                        </ul>

                        <h6 class="subsection-title">3. En proceso (manual)</h6>
                        <ul>
                            <li><strong>Cuándo:</strong> Después de dar el banderazo</li>
                            <li><strong>Qué significa:</strong> Los vehículos salieron, la salida está en curso</li>
                            <li><strong>Permanece en este estado:</strong> Hasta que pase la fecha del evento</li>
                            <li><strong>Acciones disponibles:</strong> Ver asistencia, suspender (si hay emergencia grave)</li>
                        </ul>

                        <h6 class="subsection-title">4. Realizada (automático)</h6>
                        <ul>
                            <li><strong>Cuándo:</strong> El sistema cambia automáticamente el día después de la fecha del evento 
                                (si estaba "En proceso")</li>
                            <li><strong>Qué significa:</strong> La salida se completó exitosamente</li>
                            <li><strong>Es un estado final:</strong> No hay más acciones</li>
                        </ul>

                        <h6 class="subsection-title">5. Suspendida (manual)</h6>
                        <ul>
                            <li><strong>Cuándo:</strong> Tú la suspendes manualmente desde "Inminente" o "En proceso"</li>
                            <li><strong>Qué significa:</strong> La salida NO se pudo realizar por alguna razón (clima, orden 
                                público, problemas con transporte, etc.)</li>
                            <li><strong>Requiere:</strong> Motivo obligatorio</li>
                            <li><strong>Es un estado final:</strong> No se puede reanudar</li>
                        </ul>

                        <h6 class="subsection-title">6. Cancelada (manual)</h6>
                        <ul>
                            <li><strong>Cuándo:</strong> Tú la cancelas manualmente desde "Programación" (después de aprobada)</li>
                            <li><strong>Qué significa:</strong> La salida definitivamente NO se va a realizar</li>
                            <li><strong>Diferencia con Suspendida:</strong> Cancelada es antes del día (en Programación), 
                                Suspendida es el mismo día o cercano (en Inminente/En proceso)</li>
                            <li><strong>Es un estado final:</strong> No se puede reactivar</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Flujo típico exitoso:</h5>
                        <p>
                            <strong>Programación</strong> (días/semanas antes) 
                            → <strong>Inminente</strong> (automático 7 días antes) 
                            → <strong>En proceso</strong> (banderazo) 
                            → <strong>Realizada</strong> (automático al día siguiente)
                        </p>
                    </div>
                </section>

                <!-- SECCIÓN 9: Acciones por Estado -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-gear me-2"></i>
                        Acciones Disponibles por Estado
                    </h2>

                    <div class="step-card">
                        <h6 class="subsection-title">Estado: Programación</h6>
                        <ul>
                            <li><strong>Ver detalle:</strong> Haz clic en la tarjeta de la salida para ver toda la información</li>
                            <li><strong>Cancelar:</strong> Solo si está aprobada. Requiere motivo. Estado final.</li>
                            <li><strong>NO puedes:</strong> Editar, registrar asistencia, dar banderazo</li>
                        </ul>

                        <h6 class="subsection-title">Estado: Inminente</h6>
                        <p>Este es el estado con más acciones disponibles porque es el momento de preparar logística.</p>

                        <p><strong>1. Registrar Asistencia:</strong></p>
                        <ul>
                            <li>Haz clic en "Asistencia" en el detalle de la salida</li>
                            <li>Aparece un modal con la lista completa de integrantes del equipo</li>
                            <li>El sistema muestra:
                                <ul>
                                    <li><strong>Planeados:</strong> Total de integrantes del equipo</li>
                                    <li><strong>Asistentes:</strong> Cuántos marcaste que SÍ van (por defecto todos)</li>
                                    <li><strong>Desvinculados:</strong> Cuántos marcaste que NO van</li>
                                </ul>
                            </li>
                            <li>Para desvincular un estudiante:
                                <ol>
                                    <li>Haz clic en el botón "Desvincular" del estudiante</li>
                                    <li>Escribe el motivo (ejemplo: "No presentó autorización", "Incapacidad médica")</li>
                                    <li>Confirma</li>
                                    <li>El estudiante pasa a la lista de "Desvinculados" con el motivo</li>
                                </ol>
                            </li>
                            <li>Estos cambios actualizan el campo "Estudiantes reales" de la salida</li>
                        </ul>

                        <p><strong>2. Dar Banderazo:</strong></p>
                        <ul>
                            <li>Cuando los vehículos están listos para partir</li>
                            <li>Haz clic en "Iniciar Salida" o "Dar Banderazo"</li>
                            <li>Confirma que los vehículos están saliendo</li>
                            <li>El estado cambia a "En proceso"</li>
                            <li>Ya NO puedes modificar la asistencia</li>
                        </ul>

                        <p><strong>3. Suspender:</strong></p>
                        <ul>
                            <li>Si por alguna razón la salida NO se puede realizar</li>
                            <li>Haz clic en "Suspender"</li>
                            <li>Escribe la razón (obligatorio)</li>
                            <li>El estado cambia a "Suspendida" (estado final)</li>
                        </ul>

                        <h6 class="subsection-title">Estado: En Proceso</h6>
                        <ul>
                            <li><strong>Ver asistencia:</strong> Puedes revisar quiénes fueron, pero ya NO editar</li>
                            <li><strong>Suspender:</strong> Solo en caso de emergencia grave durante la salida</li>
                        </ul>

                        <h6 class="subsection-title">Estados finales (Realizada, Suspendida, Cancelada)</h6>
                        <ul>
                            <li>Solo puedes ver el detalle</li>
                            <li>No hay acciones disponibles</li>
                            <li>La información queda registrada para reportes e historial</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 10: Filtros y Búsqueda -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-funnel me-2"></i>
                        Filtrar y Buscar Salidas
                    </h2>

                    <div class="step-card">
                        <p>
                            En la parte superior de la página hay una barra de filtros para encontrar salidas específicas.
                        </p>

                        <h5 class="mb-3">Filtros disponibles:</h5>

                        <h6 class="subsection-title">Buscar por texto</h6>
                        <ul>
                            <li>Escribe en el campo de búsqueda</li>
                            <li>Busca en: nombre de la salida, destino específico</li>
                            <li>Actualiza los resultados en tiempo real mientras escribes</li>
                        </ul>

                        <h6 class="subsection-title">Filtrar por estado</h6>
                        <ul>
                            <li>Selecciona uno de los 6 estados</li>
                            <li>Ejemplo: Filtra por "Inminente" para ver qué salidas están cercanas</li>
                            <li>"Todos los estados" muestra todo</li>
                        </ul>

                        <h6 class="subsection-title">Filtrar por disciplina</h6>
                        <ul>
                            <li>Selecciona un deporte específico</li>
                            <li>Ejemplo: Solo salidas de fútbol</li>
                            <li>"Todas las disciplinas" muestra todo</li>
                        </ul>

                        <h6 class="subsection-title">Filtrar por mes</h6>
                        <ul>
                            <li>Selecciona un mes (ejemplo: Marzo 2026)</li>
                            <li>Muestra solo salidas programadas para ese mes</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Combinar filtros:</h5>
                        <p>
                            Puedes usar múltiples filtros al mismo tiempo. Por ejemplo:
                        </p>
                        <ul>
                            <li>Estado "Inminente" + Disciplina "Fútbol" → Ver salidas de fútbol que están cercanas</li>
                            <li>Mes "Marzo 2026" + Estado "Realizada" → Ver salidas completadas en marzo</li>
                        </ul>

                        <h5 class="mt-4 mb-3">Contador de resultados:</h5>
                        <p>
                            Debajo de los filtros aparece un resumen:
                        </p>
                        <ul>
                            <li>Total de salidas encontradas</li>
                            <li>Desglose por estado (cuántas en Programación, Inminente, etc.)</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 11: Solución de problemas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-question-circle me-2"></i>
                        Solución de problemas comunes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No puedo avanzar del Paso 1, me dice que la fecha no cumple con los días mínimos
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>Las salidas deportivas deben crearse con anticipación (típicamente 7 días mínimo).</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Cambia la fecha del evento a una fecha más lejana</li>
                            <li>El mensaje te indica cuántos días de anticipación necesitas</li>
                            <li>Si realmente necesitas crear la salida con menos días, contacta al administrador para 
                                que cambie temporalmente la configuración</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            En el Paso 2 me dice "No se encontró un equipo activo"
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>No existe un equipo con esa combinación de disciplina + categoría, o existe pero está inactivo.</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Ve al módulo "Equipos Deportivos"</li>
                            <li>Verifica si existe el equipo para esa disciplina y categoría</li>
                            <li>Si no existe, créalo</li>
                            <li>Si existe pero está inactivo, actívalo</li>
                            <li>Asegúrate de que el equipo tenga integrantes activos</li>
                            <li>Regresa al wizard y selecciona nuevamente la disciplina y categoría</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            El costo del transporte aparece en $0
                        </div>
                        <p><strong>Causas posibles:</strong></p>
                        <ul>
                            <li>No hay tarifas configuradas para el destino seleccionado</li>
                            <li>El número de participantes está fuera de los rangos del tarifario</li>
                            <li>El destino o las tarifas están inactivos</li>
                        </ul>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Ve a "Configuración de Servicios" → Tarifas de Transporte</li>
                            <li>Verifica que haya tarifas activas para el destino que seleccionaste</li>
                            <li>Verifica que los rangos de capacidad cubran el número de participantes</li>
                            <li>Si todo está bien configurado y sigue en $0, reporta el problema</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            No hay aprobadores disponibles en el Paso 4
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>No hay ningún trabajador con el permiso "Resolución de solicitudes".</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Contacta al administrador del sistema</li>
                            <li>El administrador debe asignar el permiso "Resolución de solicitudes" a al menos un trabajador</li>
                            <li>Típicamente son coordinadores o directores</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            Necesito editar una salida que ya fue aprobada
                        </div>
                        <p><strong>Causa:</strong></p>
                        <p>Las salidas aprobadas NO se pueden editar (política del sistema para mantener trazabilidad).</p>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li><strong>Si el cambio es menor</strong> (ejemplo: cambió la hora de salida en 10 minutos):
                                <ul>
                                    <li>Comunica el cambio manualmente a los involucrados</li>
                                    <li>No es necesario cancelar la salida</li>
                                </ul>
                            </li>
                            <li><strong>Si el cambio es mayor</strong> (ejemplo: cambió la fecha):
                                <ul>
                                    <li>Cancela la salida actual (requiere motivo)</li>
                                    <li>Crea una nueva salida con la información correcta</li>
                                    <li>Envía nueva solicitud de aprobación</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            La salida no cambió automáticamente a "Inminente"
                        </div>
                        <p><strong>Causas posibles:</strong></p>
                        <ul>
                            <li>La salida NO está aprobada (el cambio automático solo ocurre si está aprobada)</li>
                            <li>Aún no han pasado los días necesarios</li>
                        </ul>
                        <p><strong>Solución:</strong></p>
                        <ul>
                            <li>Verifica que la solicitud de aprobación esté en estado "Aprobada"</li>
                            <li>Calcula cuántos días faltan para la fecha de la salida</li>
                            <li>El cambio automático ocurre exactamente X días antes (típicamente 7 días)</li>
                            <li>El cambio puede tardar hasta 1 hora después de cumplirse el plazo</li>
                            <li>Refresca la página para ver el cambio</li>
                        </ul>
                    </div>
                </section>

                <!-- SECCIÓN 12: Buenas prácticas -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-award me-2"></i>
                        Buenas prácticas
                    </h2>

                    <div class="step-card">
                        <h5 class="mb-3">Recomendaciones para gestionar salidas deportivas eficientemente:</h5>

                        <div class="tip-box mb-3">
                            <strong>1. Planifica con 3-4 semanas de anticipación</strong>
                            <p class="mb-0">
                                Aunque el sistema solo exige 7 días, planificar con más tiempo te da margen para:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Esperar la aprobación sin prisas</li>
                                <li>Gestionar autorizaciones de padres</li>
                                <li>Coordinar con el entrenador</li>
                                <li>Manejar imprevistos</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>2. Verifica el equipo deportivo antes de crear la salida</strong>
                            <p class="mb-0">
                                Antes de empezar el wizard:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Ve al módulo "Equipos Deportivos"</li>
                                <li>Verifica que el equipo exista y esté activo</li>
                                <li>Asegúrate de que todos los integrantes estén al día</li>
                                <li>Retira del equipo a quien ya no pertenece</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>3. Sé específico en el nombre de la salida</strong>
                            <p class="mb-0">
                                Incluye información clave:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Tipo de evento (Torneo, Campeonato, Amistoso, Entrenamiento)</li>
                                <li>Rival o sede (si aplica)</li>
                                <li>Disciplina (si no es obvio)</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                <strong>Ejemplo bueno:</strong> "Torneo UNCOLI - Fútbol Masculino Juvenil"<br>
                                <strong>Ejemplo malo:</strong> "Salida fútbol"
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>4. Revisa el Paso 4 con mucha atención</strong>
                            <p class="mb-0">
                                Es tu última oportunidad para detectar errores. Verifica especialmente:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Fecha y horas correctas</li>
                                <li>Número de participantes (estudiantes + adultos)</li>
                                <li>Destino correcto</li>
                                <li>Modalidad apropiada</li>
                                <li>Costo del transporte razonable</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>5. Registra la asistencia 1-2 días antes o la misma mañana</strong>
                            <p class="mb-0">
                                No registres asistencia con mucha anticipación porque:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Pueden surgir imprevistos (enfermedades, emergencias)</li>
                                <li>Las autorizaciones de padres pueden llegar tarde</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                El mejor momento es la noche anterior o la misma mañana del evento.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>6. Documenta bien las desvinculaciones</strong>
                            <p class="mb-0">
                                Cuando desvincules un estudiante, escribe un motivo claro:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li><strong>Bueno:</strong> "No presentó autorización firmada por acudiente"</li>
                                <li><strong>Bueno:</strong> "Incapacidad médica por gripe"</li>
                                <li><strong>Malo:</strong> "No va"</li>
                            </ul>
                            <p class="mt-2 mb-0">
                                Los motivos quedan registrados para estadísticas y auditorías.
                            </p>
                        </div>

                        <div class="tip-box mb-3">
                            <strong>7. Da el banderazo en el momento correcto</strong>
                            <p class="mb-0">
                                El banderazo debe darse justo cuando los vehículos están partiendo:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>No lo des horas antes (la salida podría suspenderse)</li>
                                <li>No lo des después de que ya salieron</li>
                                <li>Idealmente, dale banderazo cuando el conductor te confirme que ya van saliendo</li>
                            </ul>
                        </div>

                        <div class="tip-box mb-0">
                            <strong>8. Usa filtros para seguimiento</strong>
                            <p class="mb-0">
                                Periódicamente:
                            </p>
                            <ul class="mt-2 mb-0">
                                <li>Filtra por estado "Inminente" para ver qué salidas están cercanas</li>
                                <li>Filtra por disciplina + mes para planificar el calendario deportivo</li>
                                <li>Filtra por estado "Programación" para hacer seguimiento a aprobaciones pendientes</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN 13: Preguntas frecuentes -->
                <section>
                    <h2 class="section-title">
                        <i class="bi bi-chat-dots me-2"></i>
                        Preguntas frecuentes
                    </h2>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo crear una salida deportiva para mañana?
                        </div>
                        <p>
                            No. El sistema exige un mínimo de días de anticipación (típicamente 7 días). Esto da tiempo para 
                            aprobación, autorizaciones de padres, y coordinación logística. Si hay una emergencia, contacta 
                            al administrador para que ajuste temporalmente la configuración.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Qué pasa si el aprobador rechaza la solicitud?
                        </div>
                        <p>
                            La salida queda en estado "Rechazada" y aparece el motivo del rechazo. Puedes ver el motivo en el 
                            detalle de la salida. Deberías eliminarla y crear una nueva corrigiendo los problemas mencionados 
                            por el aprobador, o contactarlo para aclarar dudas.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Cuándo cambia automáticamente a "Inminente"?
                        </div>
                        <p>
                            El sistema revisa automáticamente cada cierto tiempo. Cuando faltan exactamente X días (típicamente 7) 
                            para la fecha de la salida Y la solicitud está aprobada, el estado cambia a "Inminente". El cambio 
                            puede tardar hasta 1 hora en reflejarse después de cumplirse el plazo.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Por qué el número de estudiantes es menor de lo esperado?
                        </div>
                        <p>
                            El sistema solo cuenta los integrantes ACTIVOS del equipo deportivo. Si un estudiante fue retirado 
                            del equipo, desactivado, o está en estado diferente a "Activo" en el sistema académico, NO se 
                            contará. Verifica los integrantes del equipo en el módulo "Equipos Deportivos".
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo cambiar la cantidad de adultos después de crear la salida?
                        </div>
                        <p>
                            No. Una vez creada (y mucho menos si está aprobada), NO puedes editar nada. Si aumenta o disminuye 
                            el número de adultos:
                        </p>
                        <ul>
                            <li>Si el cambio es menor (1-2 personas), comunícalo manualmente y no es necesario cancelar</li>
                            <li>Si el cambio es significativo y afecta el transporte, tendrías que cancelar y crear nueva salida</li>
                        </ul>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿El costo del transporte incluye ida y regreso automáticamente?
                        </div>
                        <p>
                            Depende de la modalidad que selecciones en el Paso 3:
                        </p>
                        <ul>
                            <li><strong>Solo ida:</strong> Costo simple</li>
                            <li><strong>Solo regreso:</strong> Costo simple</li>
                            <li><strong>Ida y regreso:</strong> Costo doble (tarifa × 2)</li>
                        </ul>
                        <p>
                            El sistema calcula automáticamente según tu selección.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo re-vincular un estudiante que desvinculé por error?
                        </div>
                        <p>
                            No directamente. Una vez desvinculado, el registro queda como "no asistente". Puedes:
                        </p>
                        <ul>
                            <li>Comunicar manualmente el error a los involucrados</li>
                            <li>Si es crítico, contactar al administrador para que lo corrija en la base de datos</li>
                        </ul>
                        <p>
                            Por eso es importante confirmar antes de desvincular.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo crear dos salidas el mismo día para el mismo equipo?
                        </div>
                        <p>
                            Técnicamente sí, el sistema no lo impide. Sin embargo, es muy raro que un equipo tenga dos eventos 
                            diferentes el mismo día. Si es una salida con múltiples actividades (ejemplo: partido en la mañana 
                            y entrenamiento en la tarde), créala como UNA sola salida y explica en el nombre o en "destino 
                            específico" el detalle de las actividades.
                        </p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Cómo sabe el sistema cuántos vehículos necesito?
                        </div>
                        <p>
                            El sistema:
                        </p>
                        <ol>
                            <li>Suma estudiantes + adultos = total participantes</li>
                            <li>Consulta el tarifario del destino seleccionado</li>
                            <li>Busca las tarifas por rangos de capacidad</li>
                            <li>Calcula la combinación más eficiente de vehículos para ese número de participantes</li>
                            <li>Optimiza para minimizar costo (usa la menor cantidad de vehículos más grandes posible)</li>
                            <li>Muestra el desglose: número de vehículos, capacidad, y costo</li>
                        </ol>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            ¿Puedo suspender una salida después de dar el banderazo?
                        </div>
                        <p>
                            Sí, pero solo en casos de emergencia grave (accidente, orden público, clima extremo, etc.). 
                            Una vez en estado "En proceso", suspender significa que la salida NO se completó como estaba 
                            planeado. Debes documentar muy bien el motivo porque esto queda en los registros oficiales.
                        </p>
                    </div>
                </section>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¿Encontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, repórtalo aquí.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOTÓN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CRÍTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACIÓN DE LA PÁGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Servicios',
            modulePath: 'services',
            pageTitle: 'Salidas Deportivas',
            pagePath: 'sports-trips.html',
            moduleDescription: 'Gestión de salidas deportivas: programación, transporte, asistencia y estados'
        };

        // ==========================================
        // INICIALIZACIÓN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('📖 Iniciando página de manual...');
            
            try {
                // Verificar si existe la función de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesión si la función existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar información en la página
                updatePageInfo();
                
                console.log('✅ Página de manual lista');
                
            } catch (error) {
                console.error('❌ Error inicializando página:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la página: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACIÓN DE LA PÁGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCIÓN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove después de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
