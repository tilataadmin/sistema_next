<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERSI√ìN DE LA P√ÅGINA -->
    <meta name="page-version" content="26.02.03.08.00">
    
    <title>Manual - Eventos - Detalle del Evento - SchoolNet</title>
    
    <!-- Bootstrap CSS - VERSI√ìN FIJA PROBADA -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-overlay.hidden {
            display: none;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Encabezado discreto */
        .manual-header {
            background: #f8f9fa;
            border-bottom: 2px solid var(--system-primary-color, #1B365D);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
        }

        .manual-header h1 {
            font-size: 1.75rem;
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.25rem;
        }

        .manual-header .subtitle {
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* Info card */
        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Tarjeta para reportar bugs */
        .bug-report-card {
            background: var(--system-primary-color, #1B365D);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .bug-report-card h5 {
            color: white;
        }

        /* Bot√≥n flotante para reportar bugs */
        .floating-bug-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            background: var(--system-primary-color, #1B365D) !important;
            border-color: var(--system-primary-color, #1B365D) !important;
        }

        .floating-bug-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            opacity: 0.9;
        }

        .icon-large {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        /* Estilos para el contenido del manual */
        .step-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .step-card h5 {
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 1rem;
        }
        
        .step-card h6 {
            color: var(--system-primary-color, #1B365D);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #0d6efd;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .success-box {
            background: #d1e7dd;
            border-left: 4px solid #198754;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .danger-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .feature-list {
            list-style: none;
            padding-left: 0;
        }
        
        .feature-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-list li i {
            color: var(--system-primary-color, #1B365D);
            margin-right: 0.5rem;
        }
        
        .tab-section {
            background: #f8f9fa;
            border-left: 4px solid var(--system-primary-color, #1B365D);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .tab-section h6 {
            color: var(--system-primary-color, #1B365D);
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="mb-0">Cargando...</p>
        </div>
    </div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container-fluid">

        <!-- ENCABEZADO DISCRETO -->
        <div class="manual-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1>
                            <i class="bi bi-book me-2"></i>
                            Manual: Detalle del Evento
                        </h1>
                        <p class="subtitle mb-0">Gesti√≥n completa de eventos, franjas, inscripciones y asistencias</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="../../modules/events/events-detail.html" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-left me-1"></i>Volver al M√≥dulo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENEDOR DE ALERTAS -->
        <div id="alertContainer"></div>

        <div class="row">
            <div class="col-lg-10 mx-auto">

                <!-- INFORMACI√ìN CONTEXTUAL -->
                <div class="info-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Manual de:</h6>
                            <h5 class="mb-1"><strong id="display-module">Eventos</strong></h5>
                            <p class="text-muted mb-0 small" id="display-page">Detalle del Evento</p>
                        </div>
                        <div class="col-md-6 text-md-end mt-3 mt-md-0">
                            <p class="small text-muted mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Si tienes dudas o encuentras alg√∫n problema,<br>
                                puedes reportarlo usando el bot√≥n de abajo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- CONTENIDO DEL MANUAL -->
                <!-- ========================================== -->

                <!-- ¬øQU√â ES? -->
                <div class="step-card">
                    <h5>
                        <i class="bi bi-question-circle me-2"></i>
                        ¬øQu√© es la p√°gina de Detalle del Evento?
                    </h5>
                    <p>
                        La p√°gina de Detalle del Evento es el <strong>centro de control completo</strong> para gestionar un evento espec√≠fico. 
                        Aqu√≠ puedes ver, editar y controlar todos los aspectos de un evento, desde su informaci√≥n b√°sica 
                        hasta las inscripciones y asistencias de los participantes.
                    </p>
                    <p>
                        Esta p√°gina est√° organizada en <strong>5 pesta√±as (tabs)</strong> que te permiten navegar entre diferentes 
                        funcionalidades sin perder de vista la informaci√≥n general del evento.
                    </p>
                    <p class="mb-0">
                        <strong>¬øC√≥mo llegar aqu√≠?</strong> Desde la p√°gina "Gestionar Eventos", haz clic en cualquier evento 
                        de la lista para acceder a su detalle completo.
                    </p>
                </div>

                <!-- CARACTER√çSTICAS PRINCIPALES -->
                <div class="step-card">
                    <h5>
                        <i class="bi bi-star me-2"></i>
                        Caracter√≠sticas Principales
                    </h5>
                    <p>La p√°gina de detalle te ofrece control total sobre el evento:</p>
                    
                    <ul class="feature-list">
                        <li>
                            <i class="bi bi-info-circle"></i>
                            <strong>Tab Informaci√≥n:</strong> Datos b√°sicos del evento, instituciones participantes, estad√≠sticas y c√≥digos QR
                        </li>
                        <li>
                            <i class="bi bi-layout-three-columns"></i>
                            <strong>Tab Franjas y Grupos:</strong> Organizaci√≥n del evento en bloques horarios con talleres opcionales
                        </li>
                        <li>
                            <i class="bi bi-people"></i>
                            <strong>Tab Inscripciones:</strong> Lista completa de participantes, importaci√≥n masiva desde CSV y exportaci√≥n a Excel
                        </li>
                        <li>
                            <i class="bi bi-clipboard-check"></i>
                            <strong>Tab Asistencias:</strong> Registro diario de asistencia de los participantes
                        </li>
                        <li>
                            <i class="bi bi-graph-up"></i>
                            <strong>Tab Reportes:</strong> Estad√≠sticas generales, gr√°ficos y an√°lisis de ocupaci√≥n de grupos
                        </li>
                    </ul>
                </div>

                <!-- GU√çA PASO A PASO -->
                <div class="step-card">
                    <h5>
                        <i class="bi bi-list-ol me-2"></i>
                        Gu√≠a Completa de Uso
                    </h5>
                    
                    <p class="mb-3">
                        A continuaci√≥n te explicamos c√≥mo usar cada una de las pesta√±as de la p√°gina de detalle:
                    </p>

                    <!-- TAB 1: INFORMACI√ìN -->
                    <div class="tab-section">
                        <h6>
                            <i class="bi bi-1-circle me-1"></i>
                            Tab "Informaci√≥n"
                        </h6>
                        <p><strong>¬øPara qu√© sirve?</strong> Ver los datos b√°sicos del evento y generar c√≥digos QR para inscripciones y asistencias.</p>
                        
                        <p><strong>¬øQu√© puedes hacer aqu√≠?</strong></p>
                        <ul class="mb-2">
                            <li><strong>Ver informaci√≥n general:</strong> Nombre, fechas, tipo de participantes, estado y descripci√≥n del evento</li>
                            <li><strong>Ver instituciones asociadas:</strong> Lista de todas las instituciones que participan en el evento</li>
                            <li><strong>Ver estad√≠sticas r√°pidas:</strong> Inscritos, asistencias, franjas y grupos (se actualizan en tiempo real)</li>
                            <li><strong>Generar c√≥digos QR:</strong> 
                                <ul>
                                    <li><em>QR de Asistencia:</em> Un QR por cada d√≠a del evento para que los participantes registren su asistencia</li>
                                    <li><em>QR de Inscripci√≥n:</em> Un QR √∫nico para que nuevas personas se inscriban al evento</li>
                                    <li><em>QR de Talleres:</em> Un QR para que participantes ya inscritos gestionen su selecci√≥n de talleres</li>
                                </ul>
                            </li>
                            <li><strong>Enviar encuesta:</strong> Si el evento tiene un enlace de encuesta configurado, puedes enviarlo masivamente a todos los inscritos</li>
                        </ul>
                        
                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo:</strong>
                            Los c√≥digos QR son muy √∫tiles para eventos presenciales. Puedes imprimirlos y ubicarlos en puntos estrat√©gicos 
                            (entrada del auditorio, recepci√≥n, etc.) para facilitar el registro de asistencia.
                        </div>
                        
                        <p><strong>Flujo de trabajo sugerido:</strong></p>
                        <ol>
                            <li>Revisa que la informaci√≥n del evento est√© correcta</li>
                            <li>Genera el QR de Inscripci√≥n y comp√°rtelo antes del evento</li>
                            <li>Genera los QR de Asistencia e impr√≠melos para cada d√≠a</li>
                            <li>Comparte el QR de Talleres si el evento tiene talleres con inscripci√≥n opcional</li>
                        </ol>
                    </div>

                    <!-- TAB 2: FRANJAS Y GRUPOS -->
                    <div class="tab-section">
                        <h6>
                            <i class="bi bi-2-circle me-1"></i>
                            Tab "Franjas y Grupos"
                        </h6>
                        <p><strong>¬øPara qu√© sirve?</strong> Organizar el evento en bloques horarios (franjas) y crear talleres/grupos dentro de cada franja.</p>
                        
                        <p><strong>Conceptos clave:</strong></p>
                        <ul class="mb-2">
                            <li><strong>Franja:</strong> Un bloque horario del evento (ejemplo: "Conferencia Inaugural - 8:00 AM a 10:00 AM")</li>
                            <li><strong>Tipo de franja:</strong>
                                <ul>
                                    <li><em>Plenaria:</em> Todos los participantes juntos (no se divide en grupos)</li>
                                    <li><em>Con Talleres:</em> Los participantes se dividen en grupos/talleres simult√°neos</li>
                                </ul>
                            </li>
                            <li><strong>Grupo/Taller:</strong> Una divisi√≥n dentro de una franja que tiene capacidad m√°xima y permite inscripciones individuales</li>
                        </ul>
                        
                        <p><strong>¬øC√≥mo crear una franja?</strong></p>
                        <ol>
                            <li>Haz clic en el bot√≥n "Nueva Franja"</li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><em>T√≠tulo:</em> Nombre descriptivo (ej: "Conferencia Inaugural", "Almuerzo", "Talleres Matutinos")</li>
                                    <li><em>Tipo:</em> Selecciona "Plenaria" o "Con Talleres"</li>
                                    <li><em>Fecha, Hora Inicio y Hora Fin:</em> Define el bloque horario</li>
                                    <li><em>Descripci√≥n:</em> Opcional, para dar m√°s contexto</li>
                                </ul>
                            </li>
                            <li>Haz clic en "Guardar Franja"</li>
                        </ol>
                        
                        <p><strong>¬øC√≥mo crear talleres dentro de una franja?</strong></p>
                        <ol>
                            <li>En la franja que creaste (tipo "Con Talleres"), haz clic en "Gestionar Grupos"</li>
                            <li>Se abrir√° un modal donde puedes agregar talleres</li>
                            <li>Haz clic en "Agregar Taller/Grupo"</li>
                            <li>Completa el formulario:
                                <ul>
                                    <li><em>Nombre del Taller:</em> Ejemplo: "Taller de Liderazgo"</li>
                                    <li><em>Capacidad M√°xima:</em> N√∫mero de personas que pueden inscribirse</li>
                                    <li><em>Ubicaci√≥n/Sal√≥n:</em> Opcional, ayuda a los participantes a ubicarse</li>
                                    <li><em>Orden:</em> Orden de visualizaci√≥n (si tienes Taller 1, Taller 2, etc.)</li>
                                    <li><em>Descripci√≥n:</em> Opcional, explica de qu√© trata el taller</li>
                                    <li><em>Taller activo:</em> Si est√° marcado, los participantes pueden inscribirse; si no, el taller no aparece en los formularios</li>
                                </ul>
                            </li>
                            <li>Haz clic en "Guardar Taller"</li>
                            <li>Repite para agregar m√°s talleres a la misma franja</li>
                        </ol>
                        
                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante:</strong>
                            Los participantes solo pueden inscribirse a UN taller por franja. Aseg√∫rate de que los horarios no se traslapen.
                        </div>
                        
                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>Ejemplo pr√°ctico:</strong>
                            Un evento de 2 d√≠as podr√≠a tener esta estructura:
                            <br>‚Ä¢ <strong>D√≠a 1, 8:00-9:00:</strong> Franja Plenaria "Inauguraci√≥n"
                            <br>‚Ä¢ <strong>D√≠a 1, 9:30-11:30:</strong> Franja con Talleres "Sesi√≥n Matutina" ‚Üí Taller A, Taller B, Taller C
                            <br>‚Ä¢ <strong>D√≠a 1, 11:30-12:30:</strong> Franja Plenaria "Almuerzo"
                            <br>‚Ä¢ <strong>D√≠a 1, 13:00-15:00:</strong> Franja con Talleres "Sesi√≥n Vespertina" ‚Üí Taller D, Taller E, Taller F
                        </div>
                    </div>

                    <!-- TAB 3: INSCRIPCIONES -->
                    <div class="tab-section">
                        <h6>
                            <i class="bi bi-3-circle me-1"></i>
                            Tab "Inscripciones"
                        </h6>
                        <p><strong>¬øPara qu√© sirve?</strong> Ver, crear, importar y exportar inscripciones de participantes.</p>
                        
                        <p><strong>Funcionalidades principales:</strong></p>
                        
                        <p><strong>1. Ver lista de inscritos</strong></p>
                        <ul>
                            <li>La tabla muestra: Documento, Nombre, Instituci√≥n, Email, Tipo (Interno/Externo) y Fecha de Inscripci√≥n</li>
                            <li>Puedes <strong>buscar</strong> por nombre o documento usando el campo de b√∫squeda</li>
                            <li>Puedes <strong>filtrar</strong> por instituci√≥n y tipo de participante</li>
                            <li>Haz clic en el icono "ojo" para ver el detalle completo de una inscripci√≥n (incluye talleres inscritos)</li>
                        </ul>
                        
                        <p><strong>2. Inscribir participantes manualmente</strong></p>
                        <ol>
                            <li>Haz clic en el bot√≥n "Inscribir Manualmente"</li>
                            <li>Completa el formulario con los datos del participante:
                                <ul>
                                    <li>Documento (requerido)</li>
                                    <li>Nombre completo (requerido)</li>
                                    <li>Email (requerido)</li>
                                    <li>Instituci√≥n (opcional, selecciona del listado)</li>
                                    <li>Cargo (opcional)</li>
                                    <li>Tipo: Interno (trabajador) o Externo</li>
                                    <li>Medio de llegada (opcional)</li>
                                    <li>Restricciones alimentarias (opcional)</li>
                                </ul>
                            </li>
                            <li>Haz clic en "Guardar Inscripci√≥n"</li>
                        </ol>
                        
                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Nota:</strong>
                            Cuando inscribes manualmente, el participante NO recibe un email autom√°tico. 
                            Deber√°s comunicarle personalmente que fue inscrito.
                        </div>
                        
                        <p><strong>3. Importar inscripciones desde CSV</strong></p>
                        <p>Esta funci√≥n es muy √∫til cuando tienes muchas inscripciones previas o listas externas.</p>
                        <ol>
                            <li>Haz clic en el bot√≥n "Importar CSV"</li>
                            <li>En el modal que se abre, haz clic en "Descargar Plantilla CSV" para obtener un archivo ejemplo</li>
                            <li>Abre la plantilla en Excel o LibreOffice Calc</li>
                            <li>Completa los datos de los participantes respetando el formato:
                                <ul>
                                    <li>Columna "document": N√∫mero de documento</li>
                                    <li>Columna "full_name": Nombre completo</li>
                                    <li>Columna "email": Correo electr√≥nico</li>
                                    <li>Columna "institution": Nombre EXACTO de la instituci√≥n (debe existir en el cat√°logo)</li>
                                    <li>Columna "position": Cargo</li>
                                    <li>Columna "is_internal": Escribe "true" (interno) o "false" (externo)</li>
                                    <li>Columna "dietary_restrictions": Restricciones alimentarias</li>
                                    <li>Columna "arrival_method": Medio de llegada</li>
                                </ul>
                            </li>
                            <li>Guarda el archivo como CSV (formato: CSV UTF-8 separado por comas)</li>
                            <li>En el modal, haz clic en "Seleccionar archivo CSV" y elige tu archivo</li>
                            <li>El sistema validar√° los datos y te mostrar√° una vista previa</li>
                            <li>Revisa que los datos sean correctos (filas en rojo tienen errores)</li>
                            <li>Haz clic en "Importar X Inscripciones" para completar el proceso</li>
                        </ol>
                        
                        <div class="danger-box">
                            <strong><i class="bi bi-exclamation-circle me-2"></i>Errores comunes al importar CSV:</strong>
                            <ul class="mb-0">
                                <li>Nombre de instituci√≥n no coincide exactamente con el cat√°logo</li>
                                <li>El valor de "is_internal" no es "true" o "false"</li>
                                <li>Faltan campos obligatorios (document, full_name, email)</li>
                                <li>El archivo no est√° en formato CSV o usa separadores incorrectos</li>
                            </ul>
                        </div>
                        
                        <p><strong>4. Exportar inscripciones a Excel</strong></p>
                        <ol>
                            <li>Haz clic en el bot√≥n "Exportar Excel"</li>
                            <li>Se descargar√° autom√°ticamente un archivo .xlsx con todos los inscritos</li>
                            <li>El archivo incluye todas las columnas: documento, nombre, email, instituci√≥n, cargo, tipo, etc.</li>
                        </ol>
                        
                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Consejo:</strong>
                            Exporta el listado de inscritos antes del evento y comp√°rtelo con el equipo de log√≠stica 
                            para preparar materiales, alimentos y espacios seg√∫n el n√∫mero real de participantes.
                        </div>
                    </div>

                    <!-- TAB 4: ASISTENCIAS -->
                    <div class="tab-section">
                        <h6>
                            <i class="bi bi-4-circle me-1"></i>
                            Tab "Asistencias"
                        </h6>
                        <p><strong>¬øPara qu√© sirve?</strong> Ver y controlar el registro de asistencia diaria de los participantes.</p>
                        
                        <p><strong>¬øC√≥mo funciona?</strong></p>
                        <ol>
                            <li>Selecciona un d√≠a del evento usando el selector de fecha</li>
                            <li>El sistema cargar√° autom√°ticamente todas las asistencias registradas ese d√≠a</li>
                            <li>Ver√°s una tabla con: Hora, Documento, Nombre, Origen (QR o Manual) y Grupos asignados</li>
                        </ol>
                        
                        <p><strong>Informaci√≥n que muestra cada registro:</strong></p>
                        <ul>
                            <li><strong>Hora:</strong> Hora exacta en que se registr√≥ la asistencia</li>
                            <li><strong>Documento y Nombre:</strong> Identificaci√≥n del participante</li>
                            <li><strong>Origen:</strong>
                                <ul>
                                    <li><span class="badge bg-success">QR</span> = La asistencia se registr√≥ escaneando el c√≥digo QR</li>
                                    <li><span class="badge bg-primary">Manual</span> = La asistencia fue registrada manualmente por un administrador</li>
                                </ul>
                            </li>
                            <li><strong>Grupos Asignados:</strong> Lista de talleres en los que est√° inscrito el participante</li>
                        </ul>
                        
                        <div class="info-box">
                            <strong><i class="bi bi-info-circle me-2"></i>¬øC√≥mo registran asistencia los participantes?</strong>
                            Los participantes escanean el c√≥digo QR del d√≠a correspondiente (generado en el Tab "Informaci√≥n"). 
                            El QR los lleva a un formulario p√∫blico donde solo ingresan su documento y el sistema registra autom√°ticamente su asistencia.
                        </div>
                        
                        <div class="warning-box">
                            <strong><i class="bi bi-exclamation-triangle me-2"></i>Importante:</strong>
                            El sistema previene registros duplicados: un participante solo puede registrar su asistencia UNA VEZ por d√≠a.
                        </div>
                    </div>

                    <!-- TAB 5: REPORTES -->
                    <div class="tab-section">
                        <h6>
                            <i class="bi bi-5-circle me-1"></i>
                            Tab "Reportes"
                        </h6>
                        <p><strong>¬øPara qu√© sirve?</strong> Ver estad√≠sticas generales, gr√°ficos y an√°lisis del evento.</p>
                        
                        <p><strong>Estad√≠sticas disponibles:</strong></p>
                        <ul class="mb-2">
                            <li><strong>Total Inscritos:</strong> N√∫mero total de participantes inscritos al evento</li>
                            <li><strong>Internos:</strong> Cantidad de participantes que son trabajadores internos</li>
                            <li><strong>Externos:</strong> Cantidad de participantes externos</li>
                            <li><strong>Tasa de Asistencia:</strong> Porcentaje de inscritos que registraron al menos una asistencia</li>
                        </ul>
                        
                        <p><strong>Gr√°ficos disponibles:</strong></p>
                        <ul class="mb-2">
                            <li><strong>Inscripciones por Instituci√≥n:</strong> Gr√°fico de barras que muestra cu√°ntas personas de cada instituci√≥n se inscribieron (Top 10)</li>
                            <li><strong>Asistencias por D√≠a:</strong> Gr√°fico de l√≠nea que muestra cu√°ntas asistencias se registraron cada d√≠a del evento</li>
                        </ul>
                        
                        <p><strong>Tabla de Ocupaci√≥n de Grupos:</strong></p>
                        <p>Esta tabla muestra el estado de cada taller/grupo del evento:</p>
                        <ul>
                            <li><strong>Franja:</strong> A qu√© bloque horario pertenece el taller</li>
                            <li><strong>Taller/Grupo:</strong> Nombre del taller</li>
                            <li><strong>Capacidad:</strong> Cupo m√°ximo configurado</li>
                            <li><strong>Inscritos:</strong> Cantidad actual de personas inscritas</li>
                            <li><strong>Disponibles:</strong> Cupos que a√∫n quedan libres</li>
                            <li><strong>Ocupaci√≥n:</strong> Barra de progreso visual con porcentaje</li>
                            <li><strong>Estado:</strong> Disponible (verde), Casi Lleno (amarillo), Lleno (rojo)</li>
                        </ul>
                        
                        <div class="success-box">
                            <strong><i class="bi bi-lightbulb me-2"></i>Uso recomendado:</strong>
                            Revisa el tab de Reportes regularmente durante el periodo de inscripciones para identificar:
                            <ul class="mb-0">
                                <li>Talleres que est√°n llenos (podr√≠as abrir un grupo adicional)</li>
                                <li>Talleres con baja inscripci√≥n (podr√≠as promocionarlos m√°s o cancelarlos)</li>
                                <li>Instituciones con mayor participaci√≥n (√∫til para planear futuros eventos)</li>
                                <li>D√≠as con mayor asistencia (ayuda a planear log√≠stica)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- SOLUCI√ìN DE PROBLEMAS -->
                <div class="step-card">
                    <h5>
                        <i class="bi bi-tools me-2"></i>
                        Soluci√≥n de Problemas Comunes
                    </h5>
                    
                    <h6 class="mt-3 mb-2">‚ùå No puedo crear una franja</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>La fecha seleccionada est√° fuera del rango del evento</li>
                        <li>Los campos obligatorios est√°n vac√≠os</li>
                        <li>No tienes permisos de "Gestionar eventos"</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Verifica que la fecha est√© entre la fecha de inicio y fin del evento. Aseg√∫rate de llenar todos los campos marcados con asterisco (*). Si el problema persiste, contacta al administrador del sistema.</p>

                    <h6 class="mt-3 mb-2">‚ùå Los talleres no aparecen en el formulario p√∫blico</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>El taller est√° marcado como "Inactivo"</li>
                        <li>La franja es tipo "Plenaria" en lugar de "Con Talleres"</li>
                        <li>El taller se cre√≥ despu√©s de que el participante abri√≥ el formulario</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Verifica en "Gestionar Grupos" que el taller est√© marcado como "Activo". Aseg√∫rate de que la franja sea tipo "Con Talleres". Pide al participante que recargue la p√°gina.</p>

                    <h6 class="mt-3 mb-2">‚ùå El CSV no se importa correctamente</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>El archivo no est√° en formato CSV</li>
                        <li>Los nombres de las instituciones no coinciden con el cat√°logo</li>
                        <li>La columna "is_internal" tiene valores diferentes a "true" o "false"</li>
                        <li>Hay filas con campos requeridos vac√≠os</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Descarga la plantilla y √∫sala como base. Verifica que los nombres de instituciones sean exactamente iguales a los del cat√°logo. Revisa la vista previa de importaci√≥n: las filas en rojo tienen errores espec√≠ficos que debes corregir.</p>

                    <h6 class="mt-3 mb-2">‚ùå Los c√≥digos QR no funcionan</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>El QR se escane√≥ con una app que no abre enlaces</li>
                        <li>El participante no tiene conexi√≥n a internet</li>
                        <li>El QR se imprimi√≥ con baja calidad y no se puede leer</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Indica a los participantes que usen la c√°mara nativa del celular o apps como Google Lens. Aseg√∫rate de imprimir los QR en buena resoluci√≥n (m√≠nimo 200x200 p√≠xeles). Puedes compartir el enlace directamente si el QR no funciona.</p>

                    <h6 class="mt-3 mb-2">‚ùå No aparecen las asistencias de un d√≠a</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>La fecha seleccionada no est√° dentro del rango del evento</li>
                        <li>Nadie ha registrado asistencia ese d√≠a</li>
                        <li>Est√°s viendo el d√≠a equivocado</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Verifica la fecha en el selector. Si el d√≠a es correcto y deber√≠a haber asistencias, revisa el Tab "Reportes" para confirmar que hay registros. Recarga la p√°gina si el problema persiste.</p>

                    <h6 class="mt-3 mb-2">‚ùå La tabla de ocupaci√≥n de grupos no se actualiza</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>Los datos no se han sincronizado</li>
                        <li>No has recargado el tab despu√©s de hacer cambios</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Sal del tab de Reportes y vuelve a entrar para recargar los datos. Si el problema persiste, recarga completamente la p√°gina.</p>

                    <h6 class="mt-3 mb-2">‚ùå No puedo ver el detalle de una inscripci√≥n</h6>
                    <p><strong>Posibles causas:</strong></p>
                    <ul>
                        <li>La inscripci√≥n fue eliminada</li>
                        <li>Hay un problema de conexi√≥n</li>
                    </ul>
                    <p><strong>Soluci√≥n:</strong> Verifica que la inscripci√≥n a√∫n existe en la lista. Recarga la p√°gina e intenta de nuevo. Si el problema persiste, reporta el bug.</p>
                </div>

                <!-- BUENAS PR√ÅCTICAS -->
                <div class="step-card">
                    <h5>
                        <i class="bi bi-shield-check me-2"></i>
                        Buenas Pr√°cticas y Recomendaciones
                    </h5>
                    
                    <p><strong>Antes del evento:</strong></p>
                    <ul>
                        <li>Configura todas las franjas y talleres con al menos una semana de anticipaci√≥n</li>
                        <li>Genera el QR de inscripci√≥n y comp√°rtelo ampliamente</li>
                        <li>Verifica que las instituciones participantes est√©n correctamente asociadas al evento</li>
                        <li>Configura capacidades realistas para cada taller considerando el espacio f√≠sico</li>
                        <li>Genera los QR de asistencia e impr√≠melos en buen tama√±o (m√≠nimo media carta)</li>
                    </ul>
                    
                    <p><strong>Durante las inscripciones:</strong></p>
                    <ul>
                        <li>Revisa diariamente el tab de Reportes para monitorear inscripciones</li>
                        <li>Identifica talleres que se est√°n llenando r√°pido y considera abrir grupos adicionales</li>
                        <li>Exporta regularmente el listado de inscritos como respaldo</li>
                        <li>Si usas importaci√≥n CSV, haz pruebas con pocos registros primero</li>
                    </ul>
                    
                    <p><strong>Durante el evento:</strong></p>
                    <ul>
                        <li>Coloca los QR de asistencia en lugares visibles y de f√°cil acceso</li>
                        <li>Asigna personal para ayudar a participantes que tengan problemas con el registro</li>
                        <li>Ten a mano el enlace directo del formulario por si los QR fallan</li>
                        <li>Revisa el tab de Asistencias al final de cada d√≠a para confirmar registros</li>
                        <li>Toma capturas de pantalla de las estad√≠sticas diarias</li>
                    </ul>
                    
                    <p><strong>Despu√©s del evento:</strong></p>
                    <ul>
                        <li>Exporta el listado completo de inscripciones y asistencias</li>
                        <li>Revisa los reportes finales para an√°lisis y mejora de futuros eventos</li>
                        <li>Si configuraste encuesta, env√≠ala desde el Tab "Informaci√≥n"</li>
                        <li>Guarda los reportes y gr√°ficos para informes institucionales</li>
                    </ul>
                    
                    <div class="success-box">
                        <strong><i class="bi bi-star me-2"></i>Recomendaci√≥n especial:</strong>
                        Mant√©n siempre una hoja de c√°lculo externa con el listado de inscritos como respaldo. 
                        Exporta a Excel al menos una vez al d√≠a durante el periodo de inscripciones activas.
                    </div>
                </div>

                <!-- PREGUNTAS FRECUENTES -->
                <div class="step-card">
                    <h5>
                        <i class="bi bi-question-circle me-2"></i>
                        Preguntas Frecuentes
                    </h5>
                    
                    <h6 class="mt-3 mb-2">¬øPuedo editar la informaci√≥n b√°sica del evento desde aqu√≠?</h6>
                    <p>No, la informaci√≥n b√°sica (nombre, fechas, descripci√≥n) solo se puede editar desde la p√°gina "Gestionar Eventos". En la p√°gina de detalle solo puedes ver esta informaci√≥n.</p>

                    <h6 class="mt-3 mb-2">¬øPuedo crear una franja que dure varios d√≠as?</h6>
                    <p>No, cada franja es para un solo d√≠a. Si necesitas un bloque que se repita varios d√≠as (como "Almuerzo"), debes crear una franja separada por cada d√≠a.</p>

                    <h6 class="mt-3 mb-2">¬øCu√°ntos talleres puedo crear en una franja?</h6>
                    <p>No hay l√≠mite t√©cnico, pero recomendamos entre 3 y 10 talleres por franja para que los participantes tengan suficientes opciones sin sentirse abrumados.</p>

                    <h6 class="mt-3 mb-2">¬øLos participantes pueden cambiar sus talleres despu√©s de inscribirse?</h6>
                    <p>S√≠, si hay cupo disponible. Usa el QR de "Gesti√≥n de Talleres" para que los participantes puedan modificar su selecci√≥n.</p>

                    <h6 class="mt-3 mb-2">¬øQu√© pasa si un taller se llena?</h6>
                    <p>El taller desaparece de las opciones de inscripci√≥n autom√°ticamente cuando alcanza su capacidad m√°xima. Los participantes solo ver√°n talleres con cupos disponibles.</p>

                    <h6 class="mt-3 mb-2">¬øPuedo inscribir a alguien manualmente a talleres espec√≠ficos?</h6>
                    <p>No directamente desde esta p√°gina. La inscripci√≥n manual solo registra al participante en el evento. Para asignar talleres, debes usar el formulario p√∫blico o contactar al equipo de soporte t√©cnico.</p>

                    <h6 class="mt-3 mb-2">¬øSe env√≠a confirmaci√≥n por email cuando inscribo a alguien manualmente?</h6>
                    <p>No, las inscripciones manuales no generan emails autom√°ticos. Debes comunicar personalmente al participante que fue inscrito.</p>

                    <h6 class="mt-3 mb-2">¬øPuedo eliminar una inscripci√≥n por error?</h6>
                    <p>S√≠, pero ten cuidado: al eliminar una inscripci√≥n tambi√©n se eliminan todos sus registros de asistencia y sus inscripciones a talleres. Esta acci√≥n no se puede deshacer.</p>

                    <h6 class="mt-3 mb-2">¬øLos c√≥digos QR tienen fecha de vencimiento?</h6>
                    <p>Los QR de inscripci√≥n y talleres funcionan mientras el evento est√© activo. Los QR de asistencia solo funcionan para el d√≠a espec√≠fico para el que fueron generados.</p>

                    <h6 class="mt-3 mb-2">¬øPuedo descargar los c√≥digos QR?</h6>
                    <p>S√≠, cada modal de QR tiene botones para imprimir y descargar como imagen PNG. Tambi√©n puedes copiar el enlace directo si prefieres compartirlo por otros medios.</p>

                    <h6 class="mt-3 mb-2">¬øLa importaci√≥n CSV sobrescribe datos existentes?</h6>
                    <p>No, la importaci√≥n CSV solo AGREGA nuevas inscripciones. Si intentas importar un documento que ya existe, el sistema lo rechazar√° para evitar duplicados.</p>

                    <h6 class="mt-3 mb-2">¬øPuedo exportar las asistencias a Excel?</h6>
                    <p>Actualmente solo se puede exportar la lista de inscripciones. Para obtener un reporte de asistencias, debes usar el Tab "Reportes" y tomar capturas de pantalla o contactar al soporte t√©cnico.</p>

                    <h6 class="mt-3 mb-2">¬øLos gr√°ficos se actualizan en tiempo real?</h6>
                    <p>No, los gr√°ficos se generan cuando abres el Tab "Reportes". Si realizas cambios (nuevas inscripciones, asistencias), debes salir y volver a entrar al tab para que se refresquen los datos.</p>

                    <h6 class="mt-3 mb-2">¬øPuedo ver esta p√°gina desde mi celular?</h6>
                    <p>S√≠, la p√°gina est√° optimizada para dispositivos m√≥viles, pero recomendamos usar una computadora para tareas administrativas complejas como importaci√≥n de CSV o gesti√≥n de m√∫ltiples talleres.</p>

                    <h6 class="mt-3 mb-2">¬øQu√© significa "Read Only" en algunos permisos?</h6>
                    <p>Si tienes permiso de "Ver eventos" pero no de "Gestionar eventos", ver√°s toda la informaci√≥n pero no podr√°s crear, editar ni eliminar nada. Los botones de acci√≥n estar√°n ocultos.</p>
                </div>

                <!-- TARJETA PARA REPORTAR BUGS -->
                <div class="bug-report-card">
                    <i class="bi bi-bug-fill icon-large"></i>
                    <h4 class="mb-3">¬øEncontraste un problema o tienes una sugerencia?</h4>
                    <p class="mb-4">
                        Si experimentaste un error, algo no funciona como esperas, o tienes 
                        una sugerencia para mejorar el sistema, rep√≥rtalo aqu√≠.
                    </p>
                    <a href="../report-bug.html" class="btn btn-light btn-lg">
                        <i class="bi bi-exclamation-triangle me-2"></i>Reportar Bug o Problema
                    </a>
                </div>

            </div>
        </div>

    </div>

    <!-- BOT√ìN FLOTANTE PARA REPORTAR BUGS -->
    <a href="../report-bug.html" class="btn btn-danger btn-lg floating-bug-button" title="Reportar Bug">
        <i class="bi bi-bug-fill me-2"></i>Reportar Bug
    </a>

    <!-- SCRIPTS - ORDEN CR√çTICO -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // ==========================================
        // VARIABLES GLOBALES
        // ==========================================
        let currentUser = null;

        // ==========================================
        // CONFIGURACI√ìN DE LA P√ÅGINA
        // ==========================================
        const PAGE_CONFIG = {
            moduleName: 'Eventos',
            modulePath: 'events',
            pageTitle: 'Detalle del Evento',
            pagePath: 'events-detail.html',
            moduleDescription: 'Gesti√≥n completa de eventos, franjas, inscripciones y asistencias'
        };

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üìñ Iniciando p√°gina de manual...');
            
            try {
                // Verificar si existe la funci√≥n de colores corporativos
                if (typeof loadAndApplyBrandColors === 'function') {
                    await loadAndApplyBrandColors();
                }
                
                // Verificar sesi√≥n si la funci√≥n existe
                if (typeof getStoredSession === 'function') {
                    const session = getStoredSession();
                    if (session && session.user) {
                        currentUser = session.user;
                    }
                }
                
                // Actualizar informaci√≥n en la p√°gina
                updatePageInfo();
                
                console.log('‚úÖ P√°gina de manual lista');
                
            } catch (error) {
                console.error('‚ùå Error inicializando p√°gina:', error);
                if (typeof showMessage === 'function') {
                    showMessage('Error al cargar la p√°gina: ' + error.message, 'danger');
                }
            }
        });

        // ==========================================
        // ACTUALIZAR INFORMACI√ìN DE LA P√ÅGINA
        // ==========================================
        function updatePageInfo() {
            // Actualizar title
            document.title = `Manual - ${PAGE_CONFIG.moduleName} - ${PAGE_CONFIG.pageTitle} - SchoolNet`;
        }

        // ==========================================
        // UTILIDADES DE LOADING
        // ==========================================
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        // ==========================================
        // FUNCI√ìN DE MENSAJES
        // ==========================================
        function showMessage(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            if (!alertContainer) return;
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

    </script>
</body>
</html>
