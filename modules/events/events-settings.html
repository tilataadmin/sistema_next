<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="page-version" content="26.02.03">
    <title>Configuración de Eventos - SchoolNet</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --module-primary: var(--system-primary-color, #1B365D);
            --module-secondary: var(--system-secondary-color, #667eea);
        }
        
        body {
            background-color: #f8f9fa;
        }
        
        .page-header {
            background: linear-gradient(135deg, var(--module-primary) 0%, var(--module-secondary) 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 16px 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .page-subtitle {
            opacity: 0.95;
            font-size: 1rem;
        }
        
        .settings-nav {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 1rem;
        }
        
        .settings-nav .nav-link {
            color: #495057;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: all 0.3s;
            margin-bottom: 0.25rem;
        }
        
        .settings-nav .nav-link:hover {
            background: #f8f9fa;
            color: var(--module-primary);
        }
        
        .settings-nav .nav-link.active {
            background: var(--module-primary);
            color: white;
        }
        
        .settings-nav .nav-link i {
            width: 1.5rem;
            text-align: center;
            margin-right: 0.5rem;
        }
        
        .settings-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        
        .settings-section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #333;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #e9ecef;
        }
        
        .form-check-input:checked {
            background-color: var(--module-primary);
            border-color: var(--module-primary);
        }
        
        .badge-preview {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
        
        .alert-custom {
            border-left: 4px solid;
            border-radius: 8px;
        }
        
        .alert-custom.alert-info {
            border-left-color: #17a2b8;
            background-color: #d1ecf1;
        }
        
        .alert-custom.alert-success {
            border-left-color: #28a745;
            background-color: #d4edda;
        }
    </style>
</head>
<body>
    <div id="navbarContainer"></div>
    
    <!-- Header -->
    <div class="page-header">
        <div class="container-fluid px-4">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="page-title">
                        <i class="bi bi-gear me-2"></i>
                        Configuración de Eventos
                    </h1>
                    <p class="page-subtitle mb-0">Ajustes y preferencias del módulo</p>
                </div>
                <div class="col-auto">
                    <button class="btn btn-light" onclick="location.href='events-dashboard.html'">
                        <i class="bi bi-speedometer2 me-2"></i>
                        Volver al Dashboard
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container-fluid px-4">
        <div class="row">
            
            <!-- Navigation Sidebar -->
            <div class="col-md-3 mb-4">
                <div class="settings-nav">
                    <div class="nav flex-column nav-pills" role="tablist">
                        <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#general-settings" type="button">
                            <i class="bi bi-sliders"></i>
                            General
                        </button>
                        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#notifications-settings" type="button">
                            <i class="bi bi-bell"></i>
                            Notificaciones
                        </button>
                        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#forms-settings" type="button">
                            <i class="bi bi-file-earmark-text"></i>
                            Formularios
                        </button>
                        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#qr-settings" type="button">
                            <i class="bi bi-qr-code"></i>
                            Códigos QR
                        </button>
                        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#reports-settings" type="button">
                            <i class="bi bi-graph-up"></i>
                            Reportes
                        </button>
                        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#advanced-settings" type="button">
                            <i class="bi bi-tools"></i>
                            Avanzado
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Settings Content -->
            <div class="col-md-9">
                <div class="tab-content">
                    
                    <!-- General Settings -->
                    <div class="tab-pane fade show active" id="general-settings">
                        <div class="settings-card">
                            <h5 class="settings-section-title">
                                <i class="bi bi-sliders me-2"></i>
                                Configuración General
                            </h5>
                            
                            <div class="mb-3">
                                <label class="form-label fw-bold">Nombre del Módulo</label>
                                <input type="text" class="form-control" value="Eventos y Actividades" id="moduleName">
                                <small class="text-muted">Nombre visible en el menú principal</small>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label fw-bold">Descripción del Módulo</label>
                                <textarea class="form-control" rows="2" id="moduleDescription">Sistema de gestión de eventos, inscripciones y asistencias</textarea>
                                <small class="text-muted">Descripción mostrada en el dashboard</small>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Opciones de Visualización</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="showPastEvents" checked>
                                <label class="form-check-label" for="showPastEvents">
                                    Mostrar eventos pasados por defecto
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="showInstitutionLogos" checked>
                                <label class="form-check-label" for="showInstitutionLogos">
                                    Mostrar logos de instituciones
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="enablePublicCalendar">
                                <label class="form-check-label" for="enablePublicCalendar">
                                    Calendario público de eventos
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Límites y Restricciones</h6>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Capacidad máxima por defecto</label>
                                    <input type="number" class="form-control" value="100" id="defaultCapacity">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Días máximos de anticipación</label>
                                    <input type="number" class="form-control" value="365" id="maxAdvanceDays">
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-primary" onclick="saveGeneralSettings()">
                                    <i class="bi bi-save me-2"></i>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications Settings -->
                    <div class="tab-pane fade" id="notifications-settings">
                        <div class="settings-card">
                            <h5 class="settings-section-title">
                                <i class="bi bi-bell me-2"></i>
                                Configuración de Notificaciones
                            </h5>
                            
                            <div class="alert alert-custom alert-info">
                                <i class="bi bi-info-circle me-2"></i>
                                Las notificaciones automáticas ayudan a mantener informados a los participantes
                            </div>
                            
                            <h6 class="mb-3">Notificaciones de Inscripción</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="notifyOnRegistration" checked>
                                <label class="form-check-label" for="notifyOnRegistration">
                                    Enviar confirmación de inscripción por email
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="notifyAdminOnRegistration">
                                <label class="form-check-label" for="notifyAdminOnRegistration">
                                    Notificar a administradores sobre nuevas inscripciones
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Recordatorios</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="enableReminders" checked>
                                <label class="form-check-label" for="enableReminders">
                                    Enviar recordatorios automáticos
                                </label>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Días antes del evento</label>
                                    <select class="form-select" id="reminderDays">
                                        <option value="1">1 día antes</option>
                                        <option value="2">2 días antes</option>
                                        <option value="3" selected>3 días antes</option>
                                        <option value="7">1 semana antes</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Hora de envío</label>
                                    <input type="time" class="form-control" value="09:00" id="reminderTime">
                                </div>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Plantilla de Email de Confirmación</h6>
                            
                            <div class="mb-3">
                                <label class="form-label">Asunto</label>
                                <input type="text" class="form-control" value="Confirmación de inscripción - {EVENTO}" id="emailSubject">
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Mensaje</label>
                                <textarea class="form-control" rows="6" id="emailBody">Hola {NOMBRE},

Tu inscripción al evento "{EVENTO}" ha sido confirmada exitosamente.

Detalles del evento:
- Fecha: {FECHA}
- Hora: {HORA}
- Lugar: {LUGAR}

Te esperamos.

Saludos cordiales.</textarea>
                                <small class="text-muted">
                                    Variables disponibles: {NOMBRE}, {EVENTO}, {FECHA}, {HORA}, {LUGAR}, {DOCUMENTO}
                                </small>
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-primary" onclick="saveNotificationSettings()">
                                    <i class="bi bi-save me-2"></i>
                                    Guardar Cambios
                                </button>
                                <button class="btn btn-outline-secondary" onclick="testEmail()">
                                    <i class="bi bi-envelope me-2"></i>
                                    Enviar Email de Prueba
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Forms Settings -->
                    <div class="tab-pane fade" id="forms-settings">
                        <div class="settings-card">
                            <h5 class="settings-section-title">
                                <i class="bi bi-file-earmark-text me-2"></i>
                                Configuración de Formularios
                            </h5>
                            
                            <h6 class="mb-3">Campos del Formulario de Inscripción</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" checked disabled>
                                <label class="form-check-label">
                                    <strong>Documento</strong> (obligatorio)
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" checked disabled>
                                <label class="form-check-label">
                                    <strong>Nombre completo</strong> (obligatorio)
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" checked disabled>
                                <label class="form-check-label">
                                    <strong>Email</strong> (obligatorio)
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="requireInstitution" checked>
                                <label class="form-check-label" for="requireInstitution">
                                    Institución (opcional)
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="requirePosition" checked>
                                <label class="form-check-label" for="requirePosition">
                                    Cargo (opcional)
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="requireArrivalMethod">
                                <label class="form-check-label" for="requireArrivalMethod">
                                    Medio de llegada (opcional)
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="requireDietaryRestrictions">
                                <label class="form-check-label" for="requireDietaryRestrictions">
                                    Restricciones alimentarias (opcional)
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Validaciones</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="preventDuplicates" checked>
                                <label class="form-check-label" for="preventDuplicates">
                                    Prevenir inscripciones duplicadas
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="enableCaptcha" checked>
                                <label class="form-check-label" for="enableCaptcha">
                                    Usar reCAPTCHA en formularios públicos
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="requireTerms">
                                <label class="form-check-label" for="requireTerms">
                                    Requerir aceptación de términos y condiciones
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Mensajes Personalizados</h6>
                            
                            <div class="mb-3">
                                <label class="form-label">Mensaje de bienvenida (formulario público)</label>
                                <textarea class="form-control" rows="2" id="welcomeMessage">Bienvenido al formulario de inscripción. Por favor completa todos los campos requeridos.</textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Mensaje de éxito</label>
                                <textarea class="form-control" rows="2" id="successMessage">¡Inscripción exitosa! Recibirás un email de confirmación en breve.</textarea>
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-primary" onclick="saveFormSettings()">
                                    <i class="bi bi-save me-2"></i>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- QR Settings -->
                    <div class="tab-pane fade" id="qr-settings">
                        <div class="settings-card">
                            <h5 class="settings-section-title">
                                <i class="bi bi-qr-code me-2"></i>
                                Configuración de Códigos QR
                            </h5>
                            
                            <div class="alert alert-custom alert-success">
                                <i class="bi bi-check-circle me-2"></i>
                                Los códigos QR facilitan el registro rápido de asistencias e inscripciones
                            </div>
                            
                            <h6 class="mb-3">Opciones de Generación</h6>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Tamaño del QR (píxeles)</label>
                                    <select class="form-select" id="qrSize">
                                        <option value="200">200x200</option>
                                        <option value="250" selected>250x250</option>
                                        <option value="300">300x300</option>
                                        <option value="400">400x400</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Nivel de corrección de errores</label>
                                    <select class="form-select" id="qrErrorLevel">
                                        <option value="L">Bajo (7%)</option>
                                        <option value="M" selected>Medio (15%)</option>
                                        <option value="Q">Alto (25%)</option>
                                        <option value="H">Muy Alto (30%)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Configuración de Seguridad</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="qrUseTokens" checked>
                                <label class="form-check-label" for="qrUseTokens">
                                    Usar tokens de seguridad en QR de asistencia
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="qrExpiration">
                                <label class="form-check-label" for="qrExpiration">
                                    Expirar QR después del evento
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="qrOneTimeUse">
                                <label class="form-check-label" for="qrOneTimeUse">
                                    Limitar a un uso por participante por día
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Plantilla de Impresión</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="qrIncludeLogo" checked>
                                <label class="form-check-label" for="qrIncludeLogo">
                                    Incluir logo institucional
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="qrIncludeInstructions" checked>
                                <label class="form-check-label" for="qrIncludeInstructions">
                                    Incluir instrucciones de uso
                                </label>
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-primary" onclick="saveQRSettings()">
                                    <i class="bi bi-save me-2"></i>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reports Settings -->
                    <div class="tab-pane fade" id="reports-settings">
                        <div class="settings-card">
                            <h5 class="settings-section-title">
                                <i class="bi bi-graph-up me-2"></i>
                                Configuración de Reportes
                            </h5>
                            
                            <h6 class="mb-3">Exportación de Datos</h6>
                            
                            <div class="mb-3">
                                <label class="form-label">Formato de exportación por defecto</label>
                                <select class="form-select" id="defaultExportFormat">
                                    <option value="xlsx" selected>Excel (.xlsx)</option>
                                    <option value="csv">CSV (.csv)</option>
                                    <option value="pdf">PDF (.pdf)</option>
                                </select>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="includeTimestamps" checked>
                                <label class="form-check-label" for="includeTimestamps">
                                    Incluir fecha y hora en nombres de archivo
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Gráficos y Visualizaciones</h6>
                            
                            <div class="mb-3">
                                <label class="form-label">Colores del tema para gráficos</label>
                                <select class="form-select" id="chartTheme">
                                    <option value="default" selected>Colores corporativos</option>
                                    <option value="professional">Profesional (azules)</option>
                                    <option value="vibrant">Vibrante (colores vivos)</option>
                                    <option value="pastel">Pastel (suaves)</option>
                                </select>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="enableAnimations" checked>
                                <label class="form-check-label" for="enableAnimations">
                                    Habilitar animaciones en gráficos
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Reportes Automáticos</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="autoReports">
                                <label class="form-check-label" for="autoReports">
                                    Generar reportes automáticos al finalizar eventos
                                </label>
                            </div>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="emailReports">
                                <label class="form-check-label" for="emailReports">
                                    Enviar reportes por email a administradores
                                </label>
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-primary" onclick="saveReportSettings()">
                                    <i class="bi bi-save me-2"></i>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Settings -->
                    <div class="tab-pane fade" id="advanced-settings">
                        <div class="settings-card">
                            <h5 class="settings-section-title">
                                <i class="bi bi-tools me-2"></i>
                                Configuración Avanzada
                            </h5>
                            
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle me-2"></i>
                                <strong>Advertencia:</strong> Estas configuraciones son para usuarios avanzados. Modificarlas incorrectamente puede afectar el funcionamiento del módulo.
                            </div>
                            
                            <h6 class="mb-3">Integraciones</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="enableGoogleCalendar">
                                <label class="form-check-label" for="enableGoogleCalendar">
                                    Sincronizar con Google Calendar
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="enableWebhooks">
                                <label class="form-check-label" for="enableWebhooks">
                                    Habilitar webhooks para integraciones externas
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Base de Datos</h6>
                            
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="enableCache">
                                <label class="form-check-label" for="enableCache">
                                    Habilitar caché de consultas
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="enableDebugMode">
                                <label class="form-check-label" for="enableDebugMode">
                                    Modo de depuración (logs detallados)
                                </label>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Mantenimiento</h6>
                            
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary" onclick="clearCache()">
                                    <i class="bi bi-arrow-clockwise me-2"></i>
                                    Limpiar Caché del Módulo
                                </button>
                                <button class="btn btn-outline-warning" onclick="resetSettings()">
                                    <i class="bi bi-arrow-counterclockwise me-2"></i>
                                    Restaurar Configuración por Defecto
                                </button>
                                <button class="btn btn-outline-danger" onclick="exportSettings()">
                                    <i class="bi bi-download me-2"></i>
                                    Exportar Configuración
                                </button>
                            </div>
                            
                            <hr>
                            
                            <h6 class="mb-3">Información del Sistema</h6>
                            
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tr>
                                        <td><strong>Versión del Módulo:</strong></td>
                                        <td>4.0.0</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Última Actualización:</strong></td>
                                        <td>03 de Febrero, 2026</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Base de Datos:</strong></td>
                                        <td>PostgreSQL (Supabase)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Total de Eventos:</strong></td>
                                        <td id="systemEventCount">-</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Total de Inscripciones:</strong></td>
                                        <td id="systemRegistrationCount">-</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-primary" onclick="saveAdvancedSettings()">
                                    <i class="bi bi-save me-2"></i>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Config.js -->
    <script src="../../assets/js/config.js"></script>
    
    <script>
        // Inicialización
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                await validatePageAccess('Gestionar eventos');
                injectNavbar('navbarContainer');
                
                await loadSystemInfo();
                loadSettings();
                
                console.log('✅ Configuración de Eventos cargada');
                
            } catch (error) {
                console.error('❌ Error:', error);
                showMessage('Error al cargar configuración: ' + error.message, 'danger');
            }
        });
        
        // ==========================================
        // CARGAR INFORMACIÓN DEL SISTEMA
        // ==========================================
        async function loadSystemInfo() {
            try {
                // Contar eventos
                const events = await supabaseRequest('/events?select=event_id');
                document.getElementById('systemEventCount').textContent = events ? events.length : 0;
                
                // Contar inscripciones
                const registrations = await supabaseRequest('/event_registrations?select=registration_id');
                document.getElementById('systemRegistrationCount').textContent = registrations ? registrations.length : 0;
                
            } catch (error) {
                console.error('Error cargando info del sistema:', error);
            }
        }
        
        // ==========================================
        // CARGAR CONFIGURACIÓN
        // ==========================================
        function loadSettings() {
            // Cargar desde localStorage o valores por defecto
            const settings = JSON.parse(localStorage.getItem('eventsModuleSettings')) || {};
            
            // Aplicar configuraciones guardadas
            // TODO: Implementar carga de configuraciones
            console.log('Configuraciones cargadas:', settings);
        }
        
        // ==========================================
        // GUARDAR CONFIGURACIONES
        // ==========================================
        function saveGeneralSettings() {
            showSuccessMessage('Configuración general guardada exitosamente');
        }
        
        function saveNotificationSettings() {
            showSuccessMessage('Configuración de notificaciones guardada exitosamente');
        }
        
        function saveFormSettings() {
            showSuccessMessage('Configuración de formularios guardada exitosamente');
        }
        
        function saveQRSettings() {
            showSuccessMessage('Configuración de códigos QR guardada exitosamente');
        }
        
        function saveReportSettings() {
            showSuccessMessage('Configuración de reportes guardada exitosamente');
        }
        
        function saveAdvancedSettings() {
            showSuccessMessage('Configuración avanzada guardada exitosamente');
        }
        
        // ==========================================
        // FUNCIONES DE MANTENIMIENTO
        // ==========================================
        function clearCache() {
            if (confirm('¿Deseas limpiar el caché del módulo?')) {
                localStorage.removeItem('eventsModuleCache');
                showSuccessMessage('Caché limpiado exitosamente');
            }
        }
        
        function resetSettings() {
            if (confirm('¿Estás seguro de restaurar todas las configuraciones por defecto? Esta acción no se puede deshacer.')) {
                localStorage.removeItem('eventsModuleSettings');
                location.reload();
            }
        }
        
        function exportSettings() {
            const settings = localStorage.getItem('eventsModuleSettings') || '{}';
            const blob = new Blob([settings], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'events-settings-backup.json';
            a.click();
            showSuccessMessage('Configuración exportada exitosamente');
        }
        
        function testEmail() {
            showSuccessMessage('Email de prueba enviado a tu correo');
        }
        
        // ==========================================
        // UTILIDADES
        // ==========================================
        function showSuccessMessage(message) {
            // TODO: Implementar sistema de notificaciones
            alert(message);
        }
        
        function showMessage(message, type = 'info') {
            console.log(`[${type}] ${message}`);
        }
        
        console.log('✅ Configuración de Eventos cargada - v26.02.03');
    </script>
</body>
</html>
